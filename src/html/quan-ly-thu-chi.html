<!DOCTYPE html>
<html lang="vi" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">

<head>
    <meta charset="utf-8">
    <meta name="geo.region" content="vi">
    <meta name="language" content="vi">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>LOZIDO - Tất cả phiếu thu</title>
    <meta name="keywords"
        content="Phần mềm nhà trọ, phần mềm phòng trọ, phần mềm quản lý nhà trọ, phần mềm quản lý nhà trọ, quản lý nhà trọ, quản lý trọ, quản lý phòng trọ">
    <meta name="description"
        content="Phần mềm quản lý nhà  trọ trên điện thoại, máy tính, máy tính bảng, iPad hỗ trợ chủ nhà quản lý nhà trọ, phòng trọ, ký túc xá dễ dàng và tiện lợi mọi lúc mọi nơi, tiết kiệm thời gian và công sức">

    <meta name="robots" content="noindex, nofollow" />
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="csrf-token" content="kxYQeI0VRTTSOTGg7403Q8D94othHXKBNy8OQWXf">

    <meta name="author" content="LOZIDO - Quản lý nhà cho thuê">
    <meta name="copyright" content="LOZIDO - Quản lý nhà cho thuê - Platform Quan ly nha tro, phong tro">
    <meta name="abstract" content="Phần mềm quản lý nhà trọ, phòng trọ, ký túc xá, chung cư tốt nhất hiện nay">

    <meta property="og:image" content="https://quanlytro.me/householder-admin/images/lozido_facebook-recovered.jpg">
    <meta property="og:image:secure_url"
        content="https://quanlytro.me/householder-admin/images/lozido_facebook-recovered.jpg">
    <meta property="og:image:width" content="800">
    <meta property="og:image:height" content="370">
    <meta property="og:image:type" content="image/webp">

    <link rel="shortcut icon" href="https://quanlytro.me/images/favicon.ico" type="image/x-icon">
    <link rel="alternate" href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket" hreflang="vi-vn" />

    <script type="text/javascript">
        var recaptcha_site_key = '6Ld0LAYeAAAAABA67PAls5DpnkfNJ-rkgHbsSilR';
        var __environment = 'production';
    </script>

    <script src="jquery.min.js"></script>
    <script src="jquery-ui-1.8.13.min.js"></script>
    <script src="../js/feather.min.js"></script>
    <script src="sweetalert2@11"></script>
    <script src="popper.min.js"></script>
    <script src="bootstrap.min.js"></script>

    <script type="text/javascript" src="helper.js?"></script>
    <script type="text/javascript" src="format.js"></script>
    <script type="text/javascript" src="route-api.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript" src="transporter.js"></script>
    <script type="text/javascript" src="upload-image.js"></script>
    <style>
        .modal.show .btn-close {
            outline: 0;
            box-shadow: 0 0 0 .25rem rgb(255 87 34 / 9%);
            opacity: 1;
            border-radius: 100%;
            padding: 10px;
        }

        .btn {
            font-size: 14px !important;
            font-weight: 600 !important;
        }
    </style>
    <script type="text/javascript">
        $.ajaxSetup({
            headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
        });

        var __current_block = JSON.parse(JSON.stringify({ "id": 6920, "name": "MONIEQEWQ", "name_full": "Nh\u00e0 tr\u1ecd MONIEQEWQ", "user_id": 8168, "category": 0, "category_name": "Nh\u00e0 tr\u1ecd", "category_name_short": "Nh\u00e0 tr\u1ecd", "room_type": "room", "room_type_name": "ph\u00f2ng", "type": "floor", "room_total": 20, "count_floor": 1, "area": 15, "room_amount": 1000, "ele_amount": 0, "water_amount": 0, "price_items_cache": [{ "id": 22810, "name": "Ti\u1ec1n \u0111i\u1ec7n", "type": "constant", "unit": "kwh", "price": 1700, "rooms": { "payload": [{ "id": 100355, "name": "Ph\u00f2ng 1", "sort": null, "value": 100355, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100356, "name": "Ph\u00f2ng 2", "sort": null, "value": 100356, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100357, "name": "Ph\u00f2ng 3", "sort": null, "value": 100357, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100358, "name": "Ph\u00f2ng 4", "sort": null, "value": 100358, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100359, "name": "Ph\u00f2ng 5", "sort": null, "value": 100359, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100360, "name": "Ph\u00f2ng 6", "sort": null, "value": 100360, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100361, "name": "Ph\u00f2ng 7", "sort": null, "value": 100361, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100362, "name": "Ph\u00f2ng 8", "sort": null, "value": 100362, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100363, "name": "Ph\u00f2ng 9", "sort": null, "value": 100363, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100364, "name": "Ph\u00f2ng 10", "sort": null, "value": 100364, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100365, "name": "Ph\u00f2ng 11", "sort": null, "value": 100365, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100366, "name": "Ph\u00f2ng 12", "sort": null, "value": 100366, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100367, "name": "Ph\u00f2ng 13", "sort": null, "value": 100367, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100368, "name": "Ph\u00f2ng 14", "sort": null, "value": 100368, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100369, "name": "Ph\u00f2ng 15", "sort": null, "value": 100369, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100370, "name": "Ph\u00f2ng 16", "sort": null, "value": 100370, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100371, "name": "Ph\u00f2ng 17", "sort": null, "value": 100371, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100372, "name": "Ph\u00f2ng 18", "sort": null, "value": 100372, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100373, "name": "Ph\u00f2ng 19", "sort": null, "value": 100373, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100374, "name": "Ph\u00f2ng 20", "sort": null, "value": 100374, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }] }, "value": null, "frames": [], "status": "is_active", "history": null, "user_id": 8168, "block_id": 6920, "category": "ele", "type_text": "Theo gi\u00e1 tr\u1ecb c\u1ed1 \u0111\u1ecbnh", "unit_text": "KWh", "is_default": 1, "status_text": "\u0110ang s\u1eed d\u1ee5ng", "subtraction": 1 }, { "id": 22811, "name": "Ti\u1ec1n n\u01b0\u1edbc", "type": "constant", "unit": "khoi", "price": 18000, "rooms": { "payload": [{ "id": 100355, "name": "Ph\u00f2ng 1", "sort": null, "value": 100355, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100356, "name": "Ph\u00f2ng 2", "sort": null, "value": 100356, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100357, "name": "Ph\u00f2ng 3", "sort": null, "value": 100357, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100358, "name": "Ph\u00f2ng 4", "sort": null, "value": 100358, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100359, "name": "Ph\u00f2ng 5", "sort": null, "value": 100359, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100360, "name": "Ph\u00f2ng 6", "sort": null, "value": 100360, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100361, "name": "Ph\u00f2ng 7", "sort": null, "value": 100361, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100362, "name": "Ph\u00f2ng 8", "sort": null, "value": 100362, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100363, "name": "Ph\u00f2ng 9", "sort": null, "value": 100363, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100364, "name": "Ph\u00f2ng 10", "sort": null, "value": 100364, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100365, "name": "Ph\u00f2ng 11", "sort": null, "value": 100365, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100366, "name": "Ph\u00f2ng 12", "sort": null, "value": 100366, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100367, "name": "Ph\u00f2ng 13", "sort": null, "value": 100367, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100368, "name": "Ph\u00f2ng 14", "sort": null, "value": 100368, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100369, "name": "Ph\u00f2ng 15", "sort": null, "value": 100369, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100370, "name": "Ph\u00f2ng 16", "sort": null, "value": 100370, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100371, "name": "Ph\u00f2ng 17", "sort": null, "value": 100371, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100372, "name": "Ph\u00f2ng 18", "sort": null, "value": 100372, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100373, "name": "Ph\u00f2ng 19", "sort": null, "value": 100373, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100374, "name": "Ph\u00f2ng 20", "sort": null, "value": 100374, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }] }, "value": null, "frames": [], "status": "is_active", "history": null, "user_id": 8168, "block_id": 6920, "category": "water", "type_text": "Theo gi\u00e1 tr\u1ecb c\u1ed1 \u0111\u1ecbnh", "unit_text": "Kh\u1ed1i", "is_default": 1, "status_text": "\u0110ang s\u1eed d\u1ee5ng", "subtraction": 1 }, { "id": 22834, "name": "Ti\u1ec1n \u0111i\u1ec7n", "type": "constant", "unit": "kwh", "price": 1700, "rooms": { "payload": [{ "id": 100355, "name": "Ph\u00f2ng 1", "sort": null, "value": 100355, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }] }, "value": null, "frames": [], "status": "is_active", "history": null, "user_id": 8168, "block_id": 6920, "category": "other", "type_text": "Theo gi\u00e1 tr\u1ecb c\u1ed1 \u0111\u1ecbnh", "unit_text": "KWh", "is_default": 0, "status_text": "\u0110ang s\u1eed d\u1ee5ng", "subtraction": 0 }], "circle_order": 30, "deadline_bill": 30, "bill_setting": { "note": { "content": null }, "enable_qr": 1, "payment_default": "cash", "show_circle_day": 0, "single_send_zalo": 0, "template_bill_zalo": 1, "enable_rounding_money": 1, "extract_receipt_expense": 0 }, "app_renter_setting": { "allow_update_car": 1, "default_password": 123456789, "allow_close_clock": 0, "auto_create_account": 0, "allow_ticket_contract": 1, "allow_update_customer": 1 }, "room_group": [{ "id": 1, "name": "T\u1ea7ng tr\u1ec7t", "index": 0, "label": "T\u1ea7ng tr\u1ec7t", "value": 1 }], "max_member": 1, "open_door": null, "close_door": null, "rule": null, "extension": null, "data_log": { "id": 6920, "menu_label": { "pay_bill": 0, "room_list": "1\/20", "new_session": 19, "deposit_request": "0\/19", "terminate_contract": "0\/1" }, "block_report": { "id": 6911, "data": null, "block_id": 6920, "call_count": 0, "debt_count": 0, "post_count": 0, "view_count": 0, "empty_count": 19, "active_count": 1, "can_sale_count": 19, "debt_amount_total": 0, "deposit_temp_count": 0, "deposit_amount_total": 0, "male_dormitory_count": 0, "tick_terminate_count": 0, "will_terminate_count": 0, "deposit_contract_count": 0, "female_dormitory_count": 0, "renter_connected_count": 0, "deposit_temp_amount_total": 0, "debt_customer_amount_total": 0, "deposit_contract_amount_total": 0 } }, "setting": { "car_function": 1, "post_function": 1, "agent_function": 1, "asset_function": 1, "price_item_ele": 3, "price_item_wifi": 0, "price_item_trash": 0, "price_item_water": 3, "task_job_function": 1, "send_sms_when_create_bill": 1, "contract_document_function": 0 }, "province_id": 70, "district_id": 693, "ward_id": 25315, "address_component": { "address": "12313123 - \u0110\u01b0\u1eddng Phan \u0110\u00ecnh, Thanh H\u00f2a, B\u00f9 \u0110\u1ed1p, B\u00ecnh Ph\u01b0\u1edbc", "ward_id": "25315", "position": { "latitude": "10.7829132", "longitude": "106.6961898" }, "district_id": "693", "province_id": "70", "address_detail": "12313123 - \u0110\u01b0\u1eddng Phan \u0110\u00ecnh" }, "address": "12313123 - \u0110\u01b0\u1eddng Phan \u0110\u00ecnh, Thanh H\u00f2a, B\u00f9 \u0110\u1ed1p, B\u00ecnh Ph\u01b0\u1edbc", "latitude": 10.7829132, "longitude": 106.6961898, "auto_create_room": 1, "post_ids": [] }));

        var __permission_block = JSON.parse(JSON.stringify(null));

        let user = JSON.parse(JSON.stringify({ "staff": false, "free": false, "trial": true, "fee": false }));

    </script>
    <link href="../css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="../css/common.css" rel="stylesheet">
    <link href="../css/block.css?" rel="stylesheet">
</head>

<body>
    <div id="app_loading" class="text-center" style="padding:40vh 10px">
        <div class="inner-loading">
            <img style="margin: auto" src="https://quanlytro.me/images/icons/loading.gif" alt="Đang tải..."
                width="50px" />
            <i class="loading_text" style="font-size: 13px; margin-top: -10px;">Đang tải dữ liệu...</i>
        </div>
    </div>
    <header>
        <div class="header-inner">
            <!-- <div class="notification text-center" style="padding: 10px; background-color: #ffe8c8;">
                LOZIDO đã có thêm tính năng <strong>gửi hóa đơn tự động cho khách qua ZALO và APP dành riêng khách
                    thuê</strong>. Liên hệ chuyên viên để thêm thông tin qua: <b style="color: #0085ef">HOTLINE:
                    0965.227.453</b> hoặc chat <a href="https://zalo.me/0965227453" target="_bank"
                    style="color: #0085ef"><b>ZALO</b></a>
            </div> -->
            <div class="header-sticky">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <div class="container-fluid">
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                            data-bs-target="#lozido-main-menu" aria-controls="lozido-main-menu" aria-expanded="false"
                            aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"> </span>
                        </button>
                        <nav class="collapse navbar-collapse lozido-main-menu">
                            <ul class="navbar-nav main-menu-left  me-auto mb-2 mb-lg-0">
                                <!-- <li class="nav-item menu-item active">
                                    <a href="/" class="nav-link ">
                                        <i data-feather="arrow-left"></i>
                                        <img width="180px"
                                            src="https://quanlytro.me/images/logo-lozido-quan-ly-tro-white.png" />
                                    </a>
                                </li> -->
                            </ul>

                            <ul class="topbar-items main-menu-right navbar-nav">
                                <li class="nav-item menu-item active">
                                    <a href=index.html class="nav-link ">
                                        <i data-feather="home"></i>
                                        <span style="margin-top: 5px" class="text">Quản lý nhà</span>
                                    </a>
                                </li>
                                <li class="nav-item menu-item ">
                                    <a href="./tong-bao-cao.html" class="nav-link ">
                                        <i data-feather="pie-chart"></i>
                                        <span style="margin-top: 5px" class="text">Tổng báo cáo</span>
                                    </a>
                                    <!--Đăng tin-->
                                    <!-- </li>
                                                                                                                                                                    <li class="nav-item menu-item ">
                                            <a href="/dang-tin" class="nav-link ">
                                                <i data-feather="plus"></i>
                                                <span style="margin-top: 5px" class="text">Đăng tin</span>
                                            </a>
                                        </li> -->
                                    <!--Môi giới-->
                                    <!-- <li class="nav-item menu-item ">
                                            <a href="/mo-gioi" class="nav-link ">
                                                <i data-feather="users"></i>
                                                <span style="margin-top: 5px" class="text">Môi giới</span>
                                            </a>
                                        </li> -->
    
                                    <!-- <li class="nav-item menu-item ">
                                            <a href="/phan-quyen" class="nav-link ">
                                                <i data-feather="box"></i>
                                                <span style="margin-top: 5px" class="text">Công ty/nhóm</span>
                                            </a>
                                        </li> -->
                                <li class="nav-item menu-item ">
                                    <a href="/cai-dat" class="nav-link ">
                                        <i data-feather="settings"></i>
                                        <span style="margin-top: 5px" class="text">Cài đặt chung</span>
                                    </a>
                                </li>
    
                                <li class="nav-item btn-group menu-item ">
                                    <a href="javascript:;" class="nav-link" data-bs-toggle="dropdown" aria-expanded="false">
                                        <span class="count-notification badge">0</span>
                                        <i data-feather="bell"></i>
                                        <span style="margin-top: 5px" class="text">Thông báo</span>
                                    </a>
                                    <ul class="dropdown-menu notication-dropdown dropdown-menu-lg-end">
                                        <div class="text-center" style="padding: 20px">
                                            <img style="margin: auto" src="loading.jpg" alt="Đang tải..." width="50px" />
                                            <div>
                                                <i class="loading_text" style="font-size: 13px; margin-top: -10px;">Đang tải
                                                    thông báo...</i>
                                            </div>
                                        </div>
                                    </ul>
                                </li>
    
                                <li class="nav-item menu-item ">
                                    <a href="/tai-khoan" class="nav-link ">
                                        <i data-feather="user"></i>
                                        <span style="margin-top: 5px" class="text">Tài khoản</span>
                                    </a>
                                </li>
                                <li class="nav-item menu-item ">
                                    <a href="/dang-xuat" class="nav-link ">
                                        <i data-feather="log-out"></i>
                                        <span style="margin-top: 5px" class="text">Đăng xuất</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </nav>
            </div>
        </div>
    </header>
    <div>
        <div>
            <style type="text/css">
                .scrollable-content {
                    overflow-x: auto;
                    white-space: nowrap;
                    flex: 1;
                    position: relative;
                    scroll-behavior: smooth;
                    /* Thêm hiệu ứng cuộn mượt */
                }

                .scrollable-content-container button {
                    color: #fff;
                    border: none;
                    cursor: pointer;
                    transition: opacity 0.3s ease;
                    position: absolute;
                    top: 50%;
                    height: 96%;
                    width: 50px;
                    transform: translateY(-50%);
                    z-index: 1;
                }

                .scrollable-content-container button::before {
                    content: "";
                    position: absolute;
                    top: 50%;
                    left: 10px;
                    transform: translateY(-50%);
                    width: 30px;
                    height: 30px;
                    border-radius: 100%;
                    background: #000;
                    z-index: -1;
                }

                .scrollable-content-container button:hover::before {
                    background-color: #2f8932;
                }

                .scrollable-content-container button.hidden {
                    opacity: 0;
                    pointer-events: none;
                    /* Ngăn chặn sự kiện chuột khi ẩn */
                }

                .scrollable-content-container .scroll-left {
                    left: 0px;
                    flex: 0 0 auto;
                    background: linear-gradient(to right, rgb(255 255 255), rgb(255 255 255 / 0%));
                }

                .scrollable-content-container .scroll-right {
                    right: 0px;
                    flex: 0 0 auto;
                    background: linear-gradient(to left, rgb(255 255 255), rgb(255 255 255 / 0%));
                }
            </style>

            <div style="min-height: 125px;display: flex;padding: 0px 10px 0px 0px;">
                <!-- <div class="col-md-2 d-flex align-items-center justify-content-center" style="margin-right: 10px;">
                    <div class="current-block d-flex align-items-center" style="position: relative"
                        data-bs-toggle="modal" data-bs-target="#manageBlock">
                        <div class="d-flex align-items-center" style="flex-direction: row; flex:1">
                            <div class="icon-blocks">
                                <span class="count-block">1</span>
                                <i data-feather="home" class="feather-size-18"> </i>
                            </div>

                            <div style="padding: 20px 0px 20px 5px; flex:1">
                                <span style="font-size: 12px;">Đang quản lý</span>
                                <h4
                                    style="font-size: 14px; color: #15a05c; padding:0px; margin:0px; white-space: nowrap;max-width: 150px; overflow: hidden; text-overflow: ellipsis; ">
                                    <span>Nhà trọ IT MOTEL</span>
                                </h4>
                            </div>
                        </div>
                        <button class="shadow" id="add-block" style="position: absolute;
                        right: -14px;
                        top: 29px;
                        border-radius: 100%;
                        height: 35px;
                        width: 35px;
                        text-align: center;
                        padding: 0px;
                        background-color:  #1175c6;
                        color: #fff;
                        border: 1px solid  #1175c6;
                        z-index: 10;" data-bs-toggle="modal" data-bs-target="#addBlock">
                            <span data-bs-toggle="tooltip" data-bs-placement="top" title="Thêm mới nhà cho thuê">
                                <i data-feather="plus"> </i>
                            </span>
                        </button>
                    </div>
                </div> -->
                <div class="col-md-10" style="align-items: center; justify-content: space-between; display: flex;">
                    <div class=" scrollable-content-container"
                        style="position: relative; align-items: center; justify-content: space-between; display: flex;overflow: hidden;">
                        <!-- <div style="display: flex; flex-wrap: nowrap; overflow-x: auto; position: relative;"
                            class="scrollable-content"> -->
                        <a href="index.html" class="item-menu">
                            <div class="icon text-center">
                                <img width=55px src = "../assets/images/QL_Phong.png" />
                            </div>
                            <div class="key">
                                <span class="title"><b>Quản lý phòng</b></span>
                            </div>
                        </a>
                        <a href="./lap-phieu-thu.html" class="item-menu">
                            <div class="icon text-center">
                                <img width=55px src="../assets/images/QL_HD.webp" />
                            </div>
                            <div class="key">
                                <span class="title"><b>Quản lý hóa đơn</b></span>
                            </div>
                        </a>
                        <a href="./quan-ly-dich-vu.html" class="item-menu">
                            <div class="icon text-center">
                                <img width=55px src="../assets/images/QL_DV.webp" />
                            </div>
                            <div class="key">
                                <span class="title"><b>Quản lý dịch vụ</b></span>
                            </div>
                        </a>
                        <!-- <a href="./quan-ly-tai-san.html" class="item-menu">
                                <div class="icon text-center">
                                    <img width=55px src="QL_TS.webp" />
                                </div>
                                <div class="key">
                                    <span class="title"><b>Quản lý tài sản</b></span>
                                </div>
                            </a> -->
                        <a href="./quan-ly-hop-dong.html" class="item-menu">
                            <div class="icon text-center">
                                <img width=55px src="../assets/images/QL_HD.webp" />
                            </div>
                            <div class="key">
                                <span class="title"><b>Quản lý hợp đồng</b></span>
                            </div>
                        </a>
                        <a href="./quan-ly-khach-thue.html" class="item-menu">
                            <div class="icon text-center">
                                <img width=55px src="../assets/images/QL_KT.webp" />
                            </div>
                            <div class="key">
                                <span class="title"><b>Quản lý khách thuê</b></span>
                            </div>
                        </a>
                        <a href="./quan-ly-thu-chi.html" class="item-menu active">
                            <div class="icon text-center">
                                <img width=55px src="../assets/images/QL_TC.webp" />
                            </div>
                            <div class="key">
                                <span class="title"><b>Thu/Chi - Tổng kết</b></span>
                            </div>
                        </a>
                        <a href="./cai-dat.html" class="item-menu">
                            <div class="icon text-center">
                                <img width=55px src="../assets/images/CD.webp" />
                            </div>
                            <div class="key">
                                <span class="title"><b>Cài đặt</b></span>
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <script type="text/javascript">
                const $scrollableContent = $('.scrollable-content');
                const $scrollLeft = $('.scroll-left');
                const $scrollRight = $('.scroll-right');

                function updateButtonVisibility() {
                    const scrollLeft = $scrollableContent.scrollLeft();
                    const scrollWidth = $scrollableContent[0].scrollWidth - 10;
                    const clientWidth = $scrollableContent[0].clientWidth;

                    $scrollLeft.toggleClass('hidden', scrollLeft === 0);
                    $scrollRight.toggleClass('hidden', scrollLeft + clientWidth >= scrollWidth);
                }

                $scrollLeft.click(function () {
                    $scrollableContent.animate({ scrollLeft: 0 }, 100); // Hiệu ứng cuộn mượt
                });

                $scrollRight.click(function () {
                    const scrollWidth = $scrollableContent[0].scrollWidth - 10;
                    $scrollableContent.animate({ scrollLeft: scrollWidth }, 100); // Hiệu ứng cuộn mượt
                });

                $scrollableContent.on('scroll', updateButtonVisibility);

                updateButtonVisibility(); // Cập nhật trạng thái nút khi trang được tải
            </script>
            <div
                style="padding:15px 15px 15px 15px; background-color: #fff; border-radius: 10px; margin: 0 10px 10px 10px">
                <style>
                    .month-container,
                    .quarter-container {
                        align-items: center;
                        justify-content: space-between;
                        border: 1px solid #ebeced;
                        background-color: #f7f7f7;
                        border-radius: 10px;
                        padding: 5px 10px;
                    }

                    .month-container .item,
                    .quarter-container .item {
                        text-align: center;
                        padding: 5px;
                        cursor: pointer;
                        margin: -1px;
                        margin: 0px 5px;
                        border: 1px solid #f7f7f7;
                        max-height: 52px;
                    }

                    .month-container .item.active,
                    .quarter-container .item.active,
                    .month-container .item:hover,
                    .quarter-container .item:hover {
                        background-color: #ecfff6;
                        color: #198754;
                        border-radius: 5px;
                        border: 1px solid #a0d7bd;
                        box-shadow: 0 0 0 .16rem rgb(37 160 92 / 22%);
                    }

                    .white-space-break {
                        white-space: break-spaces !important;
                    }

                    .report-receipt-expense {}

                    .report-receipt-expense .item {
                        padding: 10px 20px;
                        background-color: #4caf5014;
                        margin: 10px;
                        margin-bottom: 0;
                        border-radius: 5px;
                    }

                    .report-receipt-expense .item .value {
                        font-size: 22px;
                        font-weight: bold;
                    }

                    .category .inner {
                        position: sticky;
                        top: 65px;
                    }

                    .header-category {
                        background-color: #eee;
                        padding: 10px;
                        border-radius: 5px;
                        margin-top: 15px;
                    }

                    .category .item {
                        border: 1px solid #eee;
                        border-radius: 5px;
                        margin-top: 10px;
                        padding: 10px;
                    }

                    .category-receipt .btn-round,
                    .category-expense .btn-round {
                        width: 40px !important;
                        height: 40px !important;
                    }

                    .category-receipt .item-input .btn,
                    .category-expense .item-input .btn {
                        padding: 1px 5px !important;
                    }

                    .pointer {
                        cursor: pointer;
                        color: #0d6efd;
                        text-decoration: underline
                    }

                    .drop-item {
                        border-bottom: solid #ccc 0.5px;
                        padding-bottom: 10px;
                    }

                    .table-2 .tabulator-row-even {
                        background-color: #ffffff !important;
                    }

                    .table-2 .tabulator-row-odd {
                        background-color: #e7e7e7 !important;
                    }
                </style>
                <div class="page-bills">
                    <div class="type-filter">
                        <div class="month-container d-flex">
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=12&year=2023"
                                class="pre-year text-start" style="width: 7.1428571428571%">
                                <i data-feather="arrow-left"></i>
                                Năm trước
                            </a>
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=1&year=2024" class="item"
                                style="width: 6.1428571428571%" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                title="Xem khoản thu-chi tháng 1/2024">
                                <div class="text">
                                    <b class="10">T.1</b>
                                </div>
                                <span>2024</span>
                            </a>
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=2&year=2024" class="item"
                                style="width: 6.1428571428571%" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                title="Xem khoản thu-chi tháng 2/2024">
                                <div class="text">
                                    <b class="10">T.2</b>
                                </div>
                                <span>2024</span>
                            </a>
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=3&year=2024" class="item"
                                style="width: 6.1428571428571%" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                title="Xem khoản thu-chi tháng 3/2024">
                                <div class="text">
                                    <b class="10">T.3</b>
                                </div>
                                <span>2024</span>
                            </a>
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=4&year=2024" class="item"
                                style="width: 6.1428571428571%" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                title="Xem khoản thu-chi tháng 4/2024">
                                <div class="text">
                                    <b class="10">T.4</b>
                                </div>
                                <span>2024</span>
                            </a>
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=5&year=2024" class="item"
                                style="width: 6.1428571428571%" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                title="Xem khoản thu-chi tháng 5/2024">
                                <div class="text">
                                    <b class="10">T.5</b>
                                </div>
                                <span>2024</span>
                            </a>
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=6&year=2024" class="item"
                                style="width: 6.1428571428571%" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                title="Xem khoản thu-chi tháng 6/2024">
                                <div class="text">
                                    <b class="10">T.6</b>
                                </div>
                                <span>2024</span>
                            </a>
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=7&year=2024" class="item"
                                style="width: 6.1428571428571%" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                title="Xem khoản thu-chi tháng 7/2024">
                                <div class="text">
                                    <b class="10">T.7</b>
                                </div>
                                <span>2024</span>
                            </a>
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=8&year=2024" class="item"
                                style="width: 6.1428571428571%" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                title="Xem khoản thu-chi tháng 8/2024">
                                <div class="text">
                                    <b class="10">T.8</b>
                                </div>
                                <span>2024</span>
                            </a>
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=9&year=2024" class="item"
                                style="width: 6.1428571428571%" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                title="Xem khoản thu-chi tháng 9/2024">
                                <div class="text">
                                    <b class="10">T.9</b>
                                </div>
                                <span>2024</span>
                            </a>
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=10&year=2024"
                                class="item active" style="width: 6.1428571428571%" data-bs-toggle="tooltip"
                                data-bs-placement="bottom" title="Xem khoản thu-chi tháng 10/2024">
                                <div class="text">
                                    <b class="10">T.10</b>
                                </div>
                                <span>2024</span>
                            </a>
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=11&year=2024" class="item"
                                style="width: 6.1428571428571%" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                title="Xem khoản thu-chi tháng 11/2024">
                                <div class="text">
                                    <b class="10">T.11</b>
                                </div>
                                <span>2024</span>
                            </a>
                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=12&year=2024" class="item"
                                style="width: 6.1428571428571%" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                title="Xem khoản thu-chi tháng 12/2024">
                                <div class="text">
                                    <b class="10">T.12</b>
                                </div>
                                <span>2024</span>
                            </a>

                            <a href="https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?month=1&year=2025"
                                class="next-year text-end" style="width: 7.1428571428571%">
                                Năm tới
                                <i data-feather="arrow-right"></i>
                            </a>
                        </div>
                    </div>

                    <div class="header-item">
                        <h4 class="title-item">
                            Khoản thu / chi - tổng kết Nhà trọ MONIEQEWQ
                            <i style="font-size: 14px;
                font-weight: normal;">Bạn sẽ thống kê được các khoản thu / chi qua hàng tháng, quý, năm.</i>
                        </h4>
                        <div class="input-group" style="width: 20%;">
                            <div class="form-floating">
                                <select class="form-select" name="type-filter" id="input-type-filter">
                                    <option value="month" selected>Theo tháng</option>
                                    <option value="quarter">Theo quý</option>
                                    <option value="year">Theo năm</option>
                                    <option value="date">Theo ngày</option>
                                </select>
                                <label for="input-type-filter">Tổng kết theo</label>
                            </div>
                            <span class="input-group-text" id="basic-addon1"><i data-feather="calendar"></i></span>
                        </div>
                    </div>

                    <script type="text/javascript"
                        src="https://quanlytro.me/tabulator-5.5/dist/js/tabulator.js"></script>
                    <script type="text/javascript"
                        src="https://quanlytro.me/tabulator-5.5/dist/js/jquery_wrapper.js"></script>
                    <script type="text/javascript"
                        src="https://quanlytro.me/householder-admin/plugins/flatpickr/js/flatpickr-4.6.9.min.js"></script>
                    <script type="text/javascript"
                        src="https://quanlytro.me/householder-admin/plugins/flatpickr/js/month-select-4.6.9.min.js"></script>
                    <script type="text/javascript"
                        src="https://quanlytro.me/householder-admin/plugins/flatpickr/js/vn.js"></script>
                    <script type="text/javascript"
                        src="https://quanlytro.me/householder-admin/plugins/xlsx.full.min.js"></script>

                    <script type="text/javascript"
                        src="https://quanlytro.me/householder-admin/js/tabulator-setting.js?version=1.3.8"></script>

                    <link href="https://quanlytro.me/householder-admin/plugins/flatpickr/css/flatpickr.min.css"
                        rel="stylesheet">
                    <link href="https://quanlytro.me/householder-admin/plugins/flatpickr/css/month-select.min.css"
                        rel="stylesheet">
                    <link href="https://quanlytro.me/tabulator-5.5/dist/css/tabulator_semanticui.min.css"
                        rel="stylesheet">
                    <div class="header-table header-item">
                        <div class="d-flex">
                            <div class="icon">
                                <i data-feather="filter"> </i>
                                <span id="filter-count">0</span>
                            </div>
                            <div class="d-flex ">
                                <div class="form-check check-filter form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="filter_done" data-value="type"
                                        value="receipts">
                                    <label class="form-check-label" for="filter_done">Tất cả phiếu thu (tiền
                                        vào)</label>
                                    <span class="count-filter receipt success">0</span>
                                </div>

                                <div class="form-check check-filter form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="filter_new" data-value="type"
                                        value="expenses">
                                    <label class="form-check-label" for="filter_new">Tất cả phiếu chi (tiền ra)</label>
                                    <span class="count-filter expense error">0</span>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex">
                            <div style="margin-right: 10px">
                                <div class="dropdown">
                                    <button class="btn btn-primary dropdown-toggle" type="button"
                                        id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i data-feather="file-text"></i>
                                        Q.lý danh mục
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                        <li><a class="drop-item dropdown-item" data-bs-toggle="modal"
                                                data-bs-type="receipt" data-bs-target="#receiptExpenseCategoryModal">
                                                <i data-feather="file-plus"></i>
                                                Thêm danh mục thu
                                            </a></li>
                                        <li><a class="drop-item dropdown-item" data-bs-toggle="modal"
                                                data-bs-type="receipt" data-bs-target="#category-receipt">
                                                <i data-feather="file-text"></i>
                                                Danh mục thu
                                            </a></li>
                                        <li><a class="drop-item dropdown-item" data-bs-toggle="modal"
                                                data-bs-type="expense" data-bs-target="#receiptExpenseCategoryModal">
                                                <i data-feather="file-plus"></i>
                                                Thêm danh mục chi
                                            </a></li>
                                        <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-type="expense"
                                                data-bs-target="#category-expense">
                                                <i data-feather="file-text"></i>
                                                Danh mục chi
                                            </a></li>
                                    </ul>
                                </div>
                            </div>
                            <button style="margin-right: 10px;" id="add-receipt" class="btn btn-success"
                                data-bs-toggle="modal" data-bs-type="receipt" data-bs-target="#receiptExpenseModal">
                                <i data-feather="file-plus"></i>
                                <span>Thêm phiếu thu</span>
                            </button>
                            <button style="margin-right: 10px" id="add-expense" class="btn btn-warning"
                                data-bs-toggle="modal" data-bs-type="expense" data-bs-target="#receiptExpenseModal">
                                <i data-feather="file-minus"></i>
                                <span>Thêm phiếu chi</span>
                            </button>
                            <div style="width: 2px;border-left: 2px solid #ccc; margin: 3px 0px;"> </div>
                            <button style="margin-right: 10px; margin-left: 10px" id="print" class="btn btn-primary">
                                <i data-feather="printer"></i>
                                In thu/chi
                            </button>
                            <button id="download-excel" class="btn btn-primary">
                                <i data-feather="file-text"></i>
                                Xuất excel
                            </button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6" style="display: flex; align-items: center;">
                            <div class="form-floating category-filter" style="width: 40%">
                                <select class="form-select" name="category" id="category-filter">
                                    <option value="">Tất cả</option>
                                    <option value="1">Thu tiền phòng</option>
                                    <option value="2">Thu tiền cọc</option>
                                    <option value="3">Thu tiền dịch vụ</option>
                                    <option value="4">Thu nợ</option>
                                    <option value="13">Thu cộng thêm hóa đơn</option>
                                    <option value="15">Thu tiền giường</option>
                                    <option value="16">Thu tiền hàng tháng</option>
                                    <option value="17">Thu tiền tháng đầu tiên</option>
                                    <option value="18">Thu tiền kết thúc hợp đồng</option>
                                    <option value="20">Thu tiền theo chu kỳ</option>
                                    <option value="21">Thu cọc giữ chỗ</option>
                                    <option value="5">Chi phí quản lý</option>
                                    <option value="6">Chi hoàn tiền cọc</option>
                                    <option value="7">Chi trả tiền điện</option>
                                    <option value="8">Chi trả tiền nước</option>
                                    <option value="9">Chi trả tiền wifi</option>
                                    <option value="10">Chi trả tiền cáp TV</option>
                                    <option value="11">Chi Cho vay</option>
                                    <option value="12">Chi Trả nợ</option>
                                    <option value="14">Chi giảm trừ hóa đơn</option>
                                    <option value="19">Chi hoàn trả tiền kết thúc hợp đồng</option>
                                    <option value="22">Chi hoàn cọc giữ chỗ</option>
                                    <option value="23">Chi hoa hồng môi giới</option>
                                    <option value="24">Chi tiền thuê nhà</option>
                                </select>
                                <label for="category">Lọc theo danh mục</label>
                            </div>
                            <div class="form-floating" style="width: 20%;margin-left: 10px;">
                                <select class="form-select" name="report" id="report-filter">
                                    <option value="0">Theo chi tiết</option>
                                    <option value="1">Theo tháng</option>
                                </select>
                                <label for="category">Mẫu báo cáo</label>
                            </div>
                            <div class="filter-date d-none" style="display: flex;margin-left: 10px;"
                                id="filter-range-date">
                                <div class="input-group date" style="margin-right: 15px;">
                                    <div class="form-floating">
                                        <input type="text" class="form-control month-flat-picker" name="range-date"
                                            id="range-date" data-format="date" placeholder="Nhập tháng">
                                        <label for="range-date">Ngày <span style="font-size: 12px;color: red;">(Tối đa
                                                60 ngày)</span></label>
                                    </div>
                                    <label class="input-group-text" for="range-date"><i data-feather="calendar">
                                        </i></label>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="report-receipt-expense d-flex justify-content-end align-items-center">
                                <div class="item receipt">
                                    <div class="text-end">Tổng khoản thu (tiền vào)</div>
                                    <div class="value text-success">
                                        <i data-feather="trending-up"></i>
                                        <span class="total">+ 0 đ</span>
                                    </div>
                                </div>
                                <div class="item expense">
                                    <div class="text-end">Tổng khoản chi (tiền ra)</div>
                                    <div class="value text-danger">
                                        <i data-feather="trending-down"></i>
                                        <span class="total">- 0 đ</span>
                                    </div>
                                </div>
                                <div class="item profit" style="margin-right: 0px;">
                                    <div class="text-end">Lợi nhuận</div>
                                    <div class="value text-success">
                                        <span class="total">0 đ</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row g-3">
                        <div class="col-12">
                            <div id="table" class="celled"></div>
                            <div id="table-2" class="celled table-2"></div>
                        </div>
                    </div>
                    <script type="text/javascript">
                        Tabulator.extendModule("edit", "editors", common_editors);
                        Tabulator.extendModule("format", "formatters", Object.assign(common_formatters, {
                            receiptExpenseIcon: function (cell, formatterParams) {
                                let icons = {
                                    "receipt": `${feather.icons['clipboard'].toSvg({ width: 20, height: 20 })}`,
                                    "local-offer": `${feather.icons['lock'].toSvg({ width: 20, height: 20 })}`
                                };
                                if (typeof cell.getData()?.category_icon !== "undefined" && typeof icons[cell.getData().category_icon] !== 'undefined')
                                    return `<div style="background-color:${cell.getData()?.category_color ?? '#dc3545'}; border-radius: 100%; padding: 3px; text-align: center; cursor: pointer; width: 30px;height: 30px;color:#fff;margin: auto;">
                                ${icons[cell.getData().category_icon]}
                            </div>`;

                                return `<div style="background-color: #dc3545; border-radius: 100%; padding: 3px; text-align: center; cursor: pointer; width: 30px;height: 30px;color:#fff;margin: auto;">${feather.icons['clipboard'].toSvg({
                                    width: 20,
                                    height: 20
                                })}</div>`;
                            },
                            bill: function (cell, formatterParams) {
                                return cell.getData()?.bill_id ? 'Chi tiết hóa đơn' : 'Không có hóa đơn';
                            },
                        }));
                        Tabulator.extendModule("validate", "validators", common_validators);

                        Tabulator.extendModule("accessor", "accessors", Object.assign(common_accessor, {
                            category: function (value, data, type, accessorParams) {
                                return data?.name ? data.name : 'Dữ liệu sai'
                            },
                            type: function (value, data, type, accessorParams) {
                                return data?.type ? data.type_text : "Chưa biết"
                            },
                            payment_method: function (value, data, type, accessorParams) {
                                return data?.payment_method ? data.payment_method_text : "Chưa biết"
                            },
                        }));

                    </script>
                    <div id="buttom-save-container">
                        <div style="margin-right: 10px">Bạn có <span id="count-edit">5</span> mục thay đổi bạn có muốn
                            lưu ?
                        </div>
                        <div class="btn btn-danger" id="clear-change" style="margin-right: 10px"><i
                                data-feather="x"></i> Xóa tất cả
                            thay đổi
                        </div>
                        <div class="btn btn-primary" id="save-change"><i data-feather="save"></i> Lưu thay đổi</div>
                    </div>
                    <script type="text/javascript">
                        var receipt_categories = JSON.parse(JSON.stringify([{ "id": 1, "user_id": 8168, "value": 1, "icon": "receipt", "color": "#2ECC40", "name": "Thu ti\u1ec1n ph\u00f2ng", "label": "Thu ti\u1ec1n ph\u00f2ng", "description": null, "type": "receipts", "block_id": null, "sort": 22 }, { "id": 2, "user_id": 8168, "value": 2, "icon": "local-offer", "color": "#1a73e8", "name": "Thu ti\u1ec1n c\u1ecdc", "label": "Thu ti\u1ec1n c\u1ecdc", "description": null, "type": "receipts", "block_id": null, "sort": 17 }, { "id": 3, "user_id": 8168, "value": 3, "icon": "apartment", "color": "#0074D9", "name": "Thu ti\u1ec1n d\u1ecbch v\u1ee5", "label": "Thu ti\u1ec1n d\u1ecbch v\u1ee5", "description": null, "type": "receipts", "block_id": null, "sort": 18 }, { "id": 4, "user_id": 8168, "value": 4, "icon": "dry", "color": "#39CCCC", "name": "Thu n\u1ee3", "label": "Thu n\u1ee3", "description": null, "type": "receipts", "block_id": null, "sort": 14 }, { "id": 13, "user_id": 8168, "value": 13, "icon": "local-offer", "color": "#000000", "name": "Thu c\u1ed9ng th\u00eam h\u00f3a \u0111\u01a1n", "label": "Thu c\u1ed9ng th\u00eam h\u00f3a \u0111\u01a1n", "description": null, "type": "receipts", "block_id": null, "sort": 15 }, { "id": 15, "user_id": 8168, "value": 15, "icon": "local-offer", "color": "#000000", "name": "Thu ti\u1ec1n gi\u01b0\u1eddng", "label": "Thu ti\u1ec1n gi\u01b0\u1eddng", "description": null, "type": "receipts", "block_id": null, "sort": 22 }, { "id": 16, "user_id": 8168, "value": 16, "icon": "local-offer", "color": "#000000", "name": "Thu ti\u1ec1n h\u00e0ng th\u00e1ng", "label": "Thu ti\u1ec1n h\u00e0ng th\u00e1ng", "description": null, "type": "receipts", "block_id": null, "sort": 21 }, { "id": 17, "user_id": 8168, "value": 17, "icon": "local-offer", "color": "#000000", "name": "Thu ti\u1ec1n th\u00e1ng \u0111\u1ea7u ti\u00ean", "label": "Thu ti\u1ec1n th\u00e1ng \u0111\u1ea7u ti\u00ean", "description": null, "type": "receipts", "block_id": null, "sort": 20 }, { "id": 18, "user_id": 8168, "value": 18, "icon": "local-offer", "color": "#000000", "name": "Thu ti\u1ec1n k\u1ebft th\u00fac h\u1ee3p \u0111\u1ed3ng", "label": "Thu ti\u1ec1n k\u1ebft th\u00fac h\u1ee3p \u0111\u1ed3ng", "description": null, "type": "receipts", "block_id": null, "sort": 20 }, { "id": 20, "user_id": 8168, "value": 20, "icon": "local-offer", "color": "#000000", "name": "Thu ti\u1ec1n theo chu k\u1ef3", "label": "Thu ti\u1ec1n theo chu k\u1ef3", "description": null, "type": "receipts", "block_id": null, "sort": 19 }, { "id": 21, "user_id": 8168, "value": 21, "icon": "local-offer", "color": "#000000", "name": "Thu c\u1ecdc gi\u1eef ch\u1ed7", "label": "Thu c\u1ecdc gi\u1eef ch\u1ed7", "description": null, "type": "receipts", "block_id": null, "sort": 16 }]));
                        var expense_categories = JSON.parse(JSON.stringify([{ "id": 5, "user_id": 8168, "value": 5, "icon": "admin-panel-settings", "color": "#7325a2", "name": "Chi ph\u00ed qu\u1ea3n l\u00fd", "label": "Chi ph\u00ed qu\u1ea3n l\u00fd", "description": null, "type": "expenses", "block_id": null, "sort": 7 }, { "id": 6, "user_id": 8168, "value": 6, "icon": "local-offer", "color": "#3472df", "name": "Chi ho\u00e0n ti\u1ec1n c\u1ecdc", "label": "Chi ho\u00e0n ti\u1ec1n c\u1ecdc", "description": null, "type": "expenses", "block_id": null, "sort": 12 }, { "id": 7, "user_id": 8168, "value": 7, "icon": "bolt", "color": "#FF4136", "name": "Chi tr\u1ea3 ti\u1ec1n \u0111i\u1ec7n", "label": "Chi tr\u1ea3 ti\u1ec1n \u0111i\u1ec7n", "description": null, "type": "expenses", "block_id": null, "sort": 9 }, { "id": 8, "user_id": 8168, "value": 8, "icon": "opacity", "color": "#F012BE", "name": "Chi tr\u1ea3 ti\u1ec1n n\u01b0\u1edbc", "label": "Chi tr\u1ea3 ti\u1ec1n n\u01b0\u1edbc", "description": null, "type": "expenses", "block_id": null, "sort": 8 }, { "id": 9, "user_id": 8168, "value": 9, "icon": "wifi", "color": "#85144b", "name": "Chi tr\u1ea3 ti\u1ec1n wifi", "label": "Chi tr\u1ea3 ti\u1ec1n wifi", "description": null, "type": "expenses", "block_id": null, "sort": 6 }, { "id": 10, "user_id": 8168, "value": 10, "icon": "live-tv", "color": "#111111", "name": "Chi tr\u1ea3 ti\u1ec1n c\u00e1p TV", "label": "Chi tr\u1ea3 ti\u1ec1n c\u00e1p TV", "description": null, "type": "expenses", "block_id": null, "sort": 5 }, { "id": 11, "user_id": 8168, "value": 11, "icon": "local-offer", "color": "#333", "name": "Chi Cho vay", "label": "Chi Cho vay", "description": null, "type": "expenses", "block_id": null, "sort": 4 }, { "id": 12, "user_id": 8168, "value": 12, "icon": "local-offer", "color": "#953", "name": "Chi Tr\u1ea3 n\u1ee3", "label": "Chi Tr\u1ea3 n\u1ee3", "description": null, "type": "expenses", "block_id": null, "sort": 3 }, { "id": 14, "user_id": 8168, "value": 14, "icon": "local-offer", "color": "#000000", "name": "Chi gi\u1ea3m tr\u1eeb h\u00f3a \u0111\u01a1n", "label": "Chi gi\u1ea3m tr\u1eeb h\u00f3a \u0111\u01a1n", "description": null, "type": "expenses", "block_id": null, "sort": 11 }, { "id": 19, "user_id": 8168, "value": 19, "icon": "local-offer", "color": "#000000", "name": "Chi ho\u00e0n tr\u1ea3 ti\u1ec1n k\u1ebft th\u00fac h\u1ee3p \u0111\u1ed3ng", "label": "Chi ho\u00e0n tr\u1ea3 ti\u1ec1n k\u1ebft th\u00fac h\u1ee3p \u0111\u1ed3ng", "description": null, "type": "expenses", "block_id": null, "sort": 13 }, { "id": 22, "user_id": 8168, "value": 22, "icon": "local-offer", "color": "#000000", "name": "Chi ho\u00e0n c\u1ecdc gi\u1eef ch\u1ed7", "label": "Chi ho\u00e0n c\u1ecdc gi\u1eef ch\u1ed7", "description": null, "type": "expenses", "block_id": null, "sort": 12 }, { "id": 23, "user_id": 8168, "value": 23, "icon": "local-offer", "color": "#000000", "name": "Chi hoa h\u1ed3ng m\u00f4i gi\u1edbi", "label": "Chi hoa h\u1ed3ng m\u00f4i gi\u1edbi", "description": null, "type": "expenses", "block_id": null, "sort": 13 }, { "id": 24, "user_id": 8168, "value": 24, "icon": "local-offer", "color": "#000000", "name": "Chi ti\u1ec1n thu\u00ea nh\u00e0", "label": "Chi ti\u1ec1n thu\u00ea nh\u00e0", "description": null, "type": "expenses", "block_id": null, "sort": 12 }]));
                        const editReceiptExpense = (id, type) => {
                            $(`#item-${type}-${id}`).addClass('d-none');
                            $(`#input-${type}-${id}`).removeClass('d-none');
                        }

                        const cancelReceiptExpense = (id, type, name) => {
                            $(`#item-${type}-${id}`).removeClass('d-none');
                            $(`#input-${type}-${id}`).addClass('d-none');
                            $(`#input-${type}-${id}`).find(`input[name="${type}_item"]`).val(name)
                        }

                        const deleteReceiptExpense = (id) => {
                            Swal.fire({
                                title: 'Thông báo!',
                                text: "Nếu xóa danh mục này tất cả các phiếu thu thuộc danh mục này sẽ bị xóa theo. Bạn chắc chắn muốn xóa",
                                icon: 'warning',
                                showCancelButton: true,
                                cancelButtonColor: '#d33',
                                confirmButtonColor: '#3085d6',
                                confirmButtonText: 'Vâng! tôi muốn xóa',
                                cancelButtonText: 'Không xóa'
                            }).then((result) => {
                                if (result.isConfirmed) {
                                    $.transferData({
                                        method: "GET",
                                        url: __helper.url.urlPattern(__routeApi.receiptsExpenses.disableCategory, {
                                            category_id: parseInt(id)
                                        }),
                                        success: (res) => {
                                            Swal.fire({
                                                title: 'Thành công!',
                                                text: res.message + '. Hệ thống sẽ tải lại trang.',
                                                icon: 'success',
                                                confirmButtonColor: '#3c9e47',
                                                confirmButtonText: 'Tải lại trang'
                                            }).then((result) => {
                                                window.location.reload();
                                            });
                                        },
                                        fail: (res) => {
                                            Swal.fire({
                                                title: 'Thông báo!',
                                                text: res.message,
                                                icon: 'warning',
                                                confirmButtonText: 'Đã hiểu'
                                            });
                                        }
                                    });
                                }
                            });
                        }

                        const submitEditReceiptExpense = (id, type) => {
                            var category_name = $(`#input-${type}-${id}`).find(`input[name="${type}_item"]`).val()
                            if (category_name.length > 0) {
                                $.transferData({
                                    method: "POST",
                                    url: __helper.url.urlPattern(__routeApi.receiptsExpenses.editCategory, {
                                        category_id: parseInt(id)
                                    }),
                                    data: {
                                        name: category_name
                                    },
                                    success: (res) => {
                                        Swal.fire({
                                            title: 'Thành công!',
                                            text: res.message,
                                            icon: 'success',
                                            confirmButtonColor: '#3c9e47',
                                            confirmButtonText: 'Đóng'
                                        });
                                        window.location.reload();
                                        // $(`#item-${type}-${id}`).removeClass('d-none');
                                        // $(`#input-${type}-${id}`).addClass('d-none');
                                        // $(`#category-name-${id}`).text(res.data.name);
                                        // $(`#input-${type}-${id}`).find(`input[name="${type}_item"]`).val(res.data.name)
                                    },
                                    fail: (res) => {
                                        Swal.fire({
                                            title: 'Thông báo!',
                                            text: res.message,
                                            icon: 'warning',
                                            confirmButtonText: 'Đã hiểu'
                                        });
                                    }
                                });
                            } else {
                                Swal.fire({
                                    title: 'Thông báo!',
                                    text: 'Tên danh mục không thể để trống',
                                    icon: 'warning',
                                    confirmButtonText: 'Đã hiểu'
                                });
                            }

                        }

                        $(document).ready(function () {
                            let __el = {
                                table: $("#table"),
                                table_2: $("#table-2"),
                                filter_check: $(".header-table .form-check-input"),
                                type_filter: $("#input-type-filter"),
                                count_filter: $("#filter-count"),
                                category_filter: $("#category-filter"),
                                report_filter: $("#report-filter"),
                                count_edit: $("#count-edit"),
                                button_save_container: $("#buttom-save-container"),
                                save_change: $("#save-change"),
                                clear_change: $("#clear-change"),
                                download: $("#download-excel"),
                                total_receipt: $('.report-receipt-expense .receipt .value .total'),
                                total_expense: $('.report-receipt-expense .expense .value .total'),
                                total_profit: $('.report-receipt-expense .profit .value .total'),
                                modal_bill_detail: $("#billDetail"),
                                bill_detail_form: $("#bill-detail-form"),
                                print: $("#print"),
                            };

                            let dataEdited = {};
                            let tableDataNewSession = {};
                            let tableDataInit = [];
                            let tableData = {};
                            let columns = {};
                            let filters = {
                                type: [],
                                type_filter: "month",
                                quarter: parseInt(4),
                                month: parseInt(`10`),
                                year: parseInt(`2024`)
                            };
                            let report_type = 0;
                            let modal_bill_detail = bootstrap.Modal.getInstance(__el.modal_bill_detail.get(0)) || new bootstrap.Modal(__el.modal_bill_detail.get(0), null);

                            if (__el.type_filter.val() === 'date')
                                $('#filter-range-date').removeClass('d-none');
                            else
                                $('#filter-range-date').addClass('d-none');

                            //Build Tabulator
                            var table = new Tabulator(__el.table.get(0), {
                                index: 'id',
                                layout: "fitColumns",
                                resizableColumnFit: true,
                                reactiveData: true,
                                height: false,
                                columnHeaderVertAlign: 'middle',
                                minHeight: 200,
                                selectable: false,
                                groupBy: 'date',
                                groupUpdateOnCellEdit: true,
                                groupHeader: function (value, count, data, group) {
                                    return `${new Date(value).toLocaleDateString('vi', {
                                        year: "numeric",
                                        month: "2-digit",
                                        day: "numeric"
                                    })}<span style='color:#d00; margin-left:10px;'>(${count}) khoản</span>`;
                                },
                                groupHeaderDownload: function (value, count, data, group) {
                                    return `${new Date(value).toLocaleDateString('vi', {
                                        year: "numeric",
                                        month: "2-digit",
                                        day: "numeric"
                                    })} (${count}) khoản`;
                                },
                                placeholder: `<div class="empty-table" style="margin: auto; display: inline-grid;"><img width="200px" src="https://quanlytro.me/images/empty-box-4085812-3385481.webp"/>Không tìm thấy dữ liệu!</div>`,
                            });

                            var table_2 = new Tabulator(__el.table_2.get(0), {
                                index: 'id',
                                layout: "fitColumns",
                                resizableColumnFit: true,
                                reactiveData: true,
                                height: false,
                                columnHeaderVertAlign: 'middle',
                                minHeight: 200,
                                selectable: false,
                            });


                            table.on("cellEdited", function (cell) {
                                if (cell.getValue() !== cell.getInitialValue() && (cell.getValue() !== '' ||
                                    (cell.getInitialValue() && cell.getInitialValue() === undefined))) {
                                    cell.getData().is_edited = true;
                                    cell.getRow().update(cell.getData());
                                    dataEdited[cell.getData().id] = cell.getData();
                                    $(cell.getRow().getCell('id').getElement()).find('div').addClass("edited");
                                    checkShowEdit();
                                    __el.count_edit.text(Object.keys(dataEdited).length);
                                }
                            });

                            function renderCount() {
                                __el.count_filter.text(table.getData().length);
                                if (tableDataInit?.length >= 1) {
                                    $(".count-filter.receipt").text(__countStatus(tableDataInit, 'receipts', 'type'));
                                    $(".count-filter.expense").text(__countStatus(tableDataInit, 'expenses', 'type'));
                                }
                                var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
                                var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                                    return new bootstrap.Tooltip(tooltipTriggerEl)
                                });
                            }

                            window.receiptExpenseTable = table;

                            const prepareColumns = function (column) {
                                if (column?.clickMenu && typeof commonClickMenu[column?.clickMenu] !== "undefined")
                                    column.clickMenu = commonClickMenu[column?.clickMenu];

                                if (column?.cellClick) {
                                    if (typeof commonCellClick[column?.cellClick] !== "undefined")
                                        column.cellClick = commonCellClick[column?.cellClick];

                                    if (column?.cellClick === 'bill') {
                                        column.cellClick = function (e, cell) {
                                            if (cell.getValue()) {
                                                let bill_id = cell.getData().bill_id;
                                                modal_bill_detail.show({ bill_id });
                                            }

                                        }
                                    }
                                }

                                if (column?.formatter) {
                                    if (column.formatter === 'bill') {
                                        column.formatter = function (cell, formatterParams) {
                                            let bill_id = cell.getData().bill_id;
                                            if (bill_id) {
                                                cell.getElement().classList.add("pointer");
                                            } else {
                                                cell.getElement().classList.add("edit_disable");
                                            }
                                            return cell.getValue() ? 'Chi tiết hóa đơn' : '<span style="color:#b5b7bb">Không có hóa đơn</span>';
                                        }
                                    }
                                }


                                if (column.field === 'category') {
                                    let category = receipt_categories.concat(expense_categories);
                                    column.formatterParams = {
                                        list: category
                                    };
                                }

                                column.editable = function (cell) {
                                    return false;
                                }

                                return column;
                            };

                            const checkShowEdit = function () {
                                dataEdited && Object.keys(dataEdited).length > 0 ?
                                    __el.button_save_container.addClass('show') :
                                    __el.button_save_container.removeClass('show');
                            };

                            const loadData = (filter = null) => $.transferData({
                                method: "POST",
                                url: __helper.url.urlPattern(__routeApi.receiptsExpenses.list, {
                                    block_id: parseInt(6920)
                                }),
                                data: {
                                    filter: filter ?? null
                                },
                                success: (res) => {
                                    if (parseInt(report_type) === 1) {
                                        table = table_2;
                                        $('.check-filter').hide();
                                        $('.category-filter').hide();
                                        __el.table_2.show();
                                        __el.table.hide();
                                    } else {
                                        table = table;
                                        $('.check-filter').show();
                                        $('.category-filter').show();
                                        __el.table.show();
                                        __el.table_2.hide();
                                    };

                                    if (res?.data?.columns && res?.data?.data) {

                                        columns = res?.data?.columns;
                                        tableData = res?.data?.data;
                                        columns.map((column) => {
                                            prepareColumns(column);
                                            if (column?.columns && column.columns.length > 0) {
                                                column.columns.map((col, index_col) => {
                                                    column.columns[index_col] = prepareColumns(col);
                                                });
                                            }
                                            return column;
                                        });

                                        tableDataNewSession = JSON.parse(JSON.stringify(tableData));
                                        if (!tableDataInit || Object.keys(tableDataInit).length === 0) {
                                            tableDataInit = [...(res?.data?.data ?? [])];
                                        }

                                        table.setColumns(columns);
                                        table.setData(tableData);

                                        let total_receipt = res?.data?.total_receipt ?? 0;
                                        let total_expense = res?.data?.total_expense ?? 0;
                                        let total_profit = total_receipt - total_expense;

                                        __el.total_receipt.data('total', total_receipt).text(__format.currency(total_receipt));
                                        __el.total_expense.data('total', total_expense).text(__format.currency(total_expense));
                                        __el.total_profit.data('total', total_profit).text(__format.currency(total_profit));
                                        __el.count_filter.text(tableData.length);
                                    } else {
                                        tableDataNewSession = null;
                                        table.setData(null);
                                    }
                                    renderCount();
                                },
                                fail: (res) => {
                                    tableDataNewSession = null;
                                    table.setData(null);
                                },
                                error: (e) => {
                                    console.log(e);
                                }
                            });

                            loadData(filters);

                            __el.type_filter.on('change', (e) => {
                                window.location.href = "https://quanlytro.me/quan-ly/6920/thu-chi-tong-ket?type_filter=" + __el.type_filter.val();
                            });

                            __el.category_filter.on('change', (e) => {
                                let cagegory_id = e.target.value
                                if (cagegory_id.length > 0)
                                    filters.category = parseInt(cagegory_id);
                                else
                                    filters.category = null;

                                loadData(filters);
                            });

                            __el.report_filter.on('change', (e) => {
                                report_type = e.target.value
                                if (report_type.length > 0)
                                    filters.report_type = parseInt(report_type);
                                else
                                    filters.report_type = null;

                                loadData(filters);
                            });

                            __el.filter_check.on('change', (e) => {
                                let value = e.target.value.split(',');
                                if (value.length > 1) {
                                    let newData = [...filters[e.target.dataset.value]];
                                    value.map((item) => {
                                        __togglePresent(newData, item);
                                    });

                                    filters[e.target.dataset.value] = newData;
                                } else {
                                    let newData = [...filters[e.target.dataset.value]];
                                    __togglePresent(newData, value[0]);
                                    filters[e.target.dataset.value] = newData;
                                }
                                loadData(filters);
                            });

                            __el.clear_change.click(() => {
                                dataEdited = {};
                                checkShowEdit();
                                table.setData(JSON.parse(JSON.stringify(tableDataNewSession)));
                            });

                            __el.save_change.click(() => {
                                if (Object.keys(dataEdited).length === 0) {
                                    Swal.fire({
                                        title: 'Thông báo!',
                                        text: 'Không có gì thay đổi!',
                                        icon: 'error',
                                        confirmButtonText: 'Đã hiểu'
                                    });

                                    return false;
                                }

                                let dataSend = JSON.parse(JSON.stringify(dataEdited));

                                $.transferData({
                                    method: 'POST',
                                    url: __helper.url.urlPattern(__routeApi.receiptsExpenses.updateSeries),
                                    data: {
                                        data_edited: dataSend,
                                        block_id: parseInt(6920)
                                    },
                                    textLoading: 'Đang lưu thông tin...',
                                    success: (res) => {
                                        Swal.fire({
                                            title: 'Thao tác thành công!',
                                            text: res.message + '. Hệ thống sẽ tải lại trang!',
                                            icon: 'success',
                                            confirmButtonText: 'Tải trang'
                                        }).then(function (res) {
                                            window.location.reload();
                                        });

                                        dataEdited = {};
                                        checkShowEdit();

                                        table.updateData(res.data);
                                    },
                                    fail: (res) => {
                                        Swal.fire({
                                            title: 'Thông báo!',
                                            text: res.message,
                                            icon: 'error',
                                            confirmButtonColor: '#3c9e47',
                                            confirmButtonText: 'Đã hiểu'
                                        });
                                    }
                                });
                            });

                            __el.download.click((e) => {
                                let sheetName = __current_block?.name.slice(0, 30).replace(/[:\.\/?*\[\]]/g, '_');
                                table.download("xlsx", "danh_sach_phieu_thu.xlsx", { sheetName: sheetName });
                            });

                            flatpickr($('input[name="range-date"]'), {
                                mode: "range",
                                enableTime: false,
                                dateFormat: "d/m/Y",
                                locale: 'vn',
                                defaultDate: 'today',
                                maxDate: "today",
                                minDate: new Date().fp_incr(-60),
                                onChange: ([start, end]) => {
                                    if (start && end) {
                                        if (filters.date_start != start && filters.date_end != end) {
                                            filters.date_start = start;
                                            filters.date_end = end;
                                            loadData(filters);
                                        }
                                    }
                                }
                            });

                            __el.print.click((e) => {
                                $.transferData({
                                    method: "POST",
                                    url: __helper.url.urlPattern(__routeApi.receiptsExpenses.showHtmlList),
                                    data: {
                                        filter: filters ?? null
                                    },
                                    success: (res) => {
                                        w = window.open();
                                        w.document.write(res.data);
                                        w.print();
                                        w.close();
                                    },
                                    fail: (res) => {
                                        console.log(res);
                                    },
                                    error: (e) => {
                                        console.log(e);
                                    }
                                });
                            })

                            __settingSaveChangeContainer(__el.table);
                        });
                    </script>

                </div>
                <!-- Modal deposit temp -->
                <div class="modal fade" data-bs-backdrop="static" id="receiptExpenseCategoryModal" tabindex="-1"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div
                                    style="margin-right: 15px;outline: 0;box-shadow: 0 0 0 .25rem rgb(76 175 80 / 16%);opacity: 1;border-radius: 100%;width: 36px;height: 36px;justify-content: center;align-items: center;display: flex;background-color: #b1e1b8;">
                                    <i data-feather="clipboard"> </i>
                                </div>
                                <h5 class="modal-title">Thêm danh mục <span class="type-name">thu</span></h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form method="POST" class="needs-validation" id="receipt-expense-category-form"
                                    novalidate>
                                    <div class="row mt-2">
                                        <div class="col-12 mt-2">
                                            <div class="form-floating">
                                                <input type="text" class="form-control" name="name" id="input_name"
                                                    required>
                                                <label for="input_name">Nhập tên danh mục <span
                                                        class="type-name">thu</span></label>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer modal-footer--sticky">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                                <button type="button" id="submit-receipt-expense-category-form" class="btn btn-primary">
                                    Thêm danh mục <span class="type-name"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <script type="text/javascript">
                    $(document).ready(function () {
                        let __el = {
                            form: $('#receipt-expense-category-form'),
                            modal: $("#receiptExpenseCategoryModal"),
                            submit: $('#submit-receipt-expense-category-form'),
                        };

                        let typeList = {
                            receipt: {
                                value: 'receipts',
                                name: 'thu',
                                label: 'thu',
                            },
                            expense: {
                                value: 'expenses',
                                name: 'chi',
                                label: 'chi'
                            },
                        };

                        let currentType = null;

                        new __modalForm(
                            __el.modal.get(0),
                            __el.form.get(0),
                            __el.submit.get(0)
                        ).start(null, {
                            __openModalForm: function (event) {
                                let button = event.relatedTarget;
                                currentType = typeList[button.getAttribute('data-bs-type')];
                                __el.modal.find('.type-name').text(currentType.name);
                            },
                            __submitModalForm: function (e) {
                                let data = __el.form.getObjectOfForm();

                                if (!__el.form.get(0).checkValidity()) {
                                    __el.form.get(0).classList.add('was-validated');
                                    Swal.fire({
                                        title: 'Thông báo!',
                                        text: "Vui lòng nhập đầy đủ thông tin trước khi thực hiện",
                                        icon: 'error',
                                        confirmButtonColor: '#3c9e47',
                                        confirmButtonText: 'Đã hiểu'
                                    });
                                    return false;
                                }

                                data.type = currentType.value;

                                $.transferData({
                                    method: "POST",
                                    url: __helper.url.urlPattern(__routeApi.receiptsExpenses.addCategory, {
                                        block_id: parseInt(6920)
                                    }),
                                    data,
                                    textLoading: 'Đang lưu thông tin...',
                                    success: function (res) {
                                        Swal.fire({
                                            title: 'Thông báo!',
                                            text: res.message + '. Hệ thống sẽ tải lại trang.',
                                            icon: 'success',
                                            confirmButtonColor: '#3c9e47',
                                            confirmButtonText: 'Tải lại trang'
                                        }).then((result) => {
                                            bootstrap.Modal.getInstance(__el.modal.get(0)).hide();

                                            if (currentType === 'receipts') {
                                                res?.data &&
                                                    receipt_categories.push(res.data);
                                            } else {
                                                res?.data &&
                                                    expense_categories.push(res.data);
                                            }
                                            window.location.reload();
                                        });
                                    },
                                    fail: function (res) {
                                        Swal.fire({
                                            title: 'Thông báo!',
                                            text: res.message,
                                            icon: 'error',
                                            confirmButtonColor: '#3c9e47',
                                            confirmButtonText: 'Đã hiểu'
                                        });
                                    }
                                })
                            }
                        });
                    });
                </script>
                <!-- Modal add new session -->
                <div class="modal fade" data-bs-backdrop="static" id="receiptExpenseModal" tabindex="-1"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div
                                    style="margin-right: 15px;outline: 0;box-shadow: 0 0 0 .25rem rgb(76 175 80 / 16%);opacity: 1;border-radius: 100%;width: 36px;height: 36px;justify-content: center;align-items: center;display: flex;background-color: #b1e1b8;">
                                    <i data-feather="book"> </i>
                                </div>
                                <h5 class="modal-title">Thêm phiếu <span class="type-name">thu</span></h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form method="POST" class="needs-validation" id="receipt-expense-form" novalidate>
                                    <input type="hidden" name="_token" value="kxYQeI0VRTTSOTGg7403Q8D94othHXKBNy8OQWXf">
                                    <div class="row g-2">
                                        <div class="col-12 mt-2">
                                            <div class="form-floating">
                                                <input data-format="numeric" type="text"
                                                    style="font-weight: bold;font-size: 18px;color: #3c9e46;"
                                                    class="form-control" name="amount" id="input_amount"
                                                    placeholder="Nhập số tiền (đ)" required>
                                                <label for="input_amount">Nhập số tiền <span
                                                        class="type-name">thu</span></label>
                                            </div>
                                        </div>

                                        <div class="col-12 mt-2">
                                            <div class="form-floating">
                                                <select id="input_payment_method" name="payment_method"
                                                    class="form-select form-control" required>
                                                    <option value="cash">Trả tiền mặt</option>
                                                    <option value="transfer_by_bank">Chuyển khoản</option>
                                                </select>
                                                <label for="input_payment_method">Phương thức thanh toán</label>
                                            </div>
                                        </div>

                                        <div class="col-12 mt-2">
                                            <div class="form-floating">
                                                <input type="text" class="form-control" name="negotiator"
                                                    id="input-negotiator" placeholder="Nhập tên người ở" required>
                                                <label for="input-negotiator">Người thanh toán</label>
                                                <div class="invalid-feedback">
                                                    Vui lòng nhập tên người thanh toán
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-12 mt-2">
                                            <div class="form-floating">
                                                <textarea type="text" rows="10" style="min-height: 70px"
                                                    class="form-control" name="content" id="input_content"
                                                    placeholder="Nhập nội dung thanh toán" required></textarea>
                                                <label for="input_content">Nội dung thanh toán</label>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-floating">
                                                <select data-format="numeric" id="input-category" name="category"
                                                    class="form-select form-control" required>
                                                    <option>Chọn danh mục</option>
                                                </select>
                                                <label for="input-category">Danh mục <span
                                                        class="type-name">thu</span></label>
                                            </div>
                                        </div>

                                        <div class="col-12">
                                            <div class="input-group">
                                                <div class="form-floating">
                                                    <input type="text" class="form-control date-flat-picker" name="date"
                                                        id="input-date" data-format="date" placeholder="Ngày lập phiếu"
                                                        pattern="\d{1,2}\/\d{1,2}\/\d{4}" required>
                                                    <label for="input-date">Ngày lập phiếu</label>
                                                </div>
                                                <label class="input-group-text" for="date_join"><i
                                                        data-feather="calendar"> </i></label>
                                            </div>
                                            <div class="invalid-feedback">
                                                Vui lòng nhập nhận phiếu <span class="type-name">thu</span>
                                            </div>
                                        </div>

                                        <div class="col-12">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="repeat"
                                                    id="repeat" value="1">
                                                <label class="form-check-label" for="repeat">
                                                    <b>Tự động tạo hàng tháng</b>
                                                    <p>Tự động tạo lại phiếu thu/chi này hàng tháng</p>
                                                </label>
                                            </div>
                                        </div>


                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer modal-footer--sticky">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                                <button type="button" id="submit-receipt-expense-form" class="btn btn-primary">
                                    <i data-feather="plus"> </i>
                                    Thêm phiếu <span class="type-name">thu</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <script type="text/javascript">
                    $(document).ready(function () {
                        let __el = {
                            form: $('#receipt-expense-form'),
                            modal: $("#receiptExpenseModal"),
                            submit: $('#submit-receipt-expense-form'),

                            count_filter: $("#filter-count"),

                            total_receipt: $('.report-receipt-expense .receipt .value .total'),
                            total_expense: $('.report-receipt-expense .expense .value .total'),
                            total_profit: $('.report-receipt-expense .profit .value .total'),
                        };

                        let typeList = {
                            receipt: {
                                value: 'receipts',
                                name: 'thu',
                                label: 'thu',
                            },
                            expense: {
                                value: 'expenses',
                                name: 'chi',
                                label: 'chi'
                            },
                        };

                        let currentType = null;

                        flatpickr(__el.form.find('input[name="date"]'), {
                            defaultDate: 'today',
                            allowInput: true,
                            enableTime: false,
                            dateFormat: "d/m/Y",
                            locale: 'vn'
                        });

                        new __modalForm(
                            __el.modal.get(0),
                            __el.form.get(0),
                            __el.submit.get(0)
                        ).start(null, {
                            __openModalForm: function (event) {
                                let button = event.relatedTarget;
                                currentType = typeList[button.getAttribute('data-bs-type')];
                                console.log(receipt_categories);
                                if (currentType.value === 'receipts') {
                                    __el.form.find('select[name="category"]').html('');
                                    receipt_categories.map((item) => {
                                        __el.form.find('select[name="category"]').append(`<option value="${item.id}">${item.name}</option>`)
                                    });
                                } else {
                                    __el.form.find('select[name="category"]').html('');
                                    expense_categories.map((item) => {
                                        __el.form.find('select[name="category"]').append(`<option value="${item.id}">${item.name}</option>`)
                                    });
                                }
                                __el.modal.find('.type-name').text(currentType.name);
                            },
                            __submitModalForm: function (e) {
                                let data = __el.form.getObjectOfForm();

                                if (!__el.form.get(0).checkValidity()) {
                                    __el.form.get(0).classList.add('was-validated');
                                    Swal.fire({
                                        title: 'Thông báo!',
                                        text: "Vui lòng nhập đầy đủ thông tin trước khi thực hiện",
                                        icon: 'error',
                                        confirmButtonColor: '#3c9e47',
                                        confirmButtonText: 'Đã hiểu'
                                    });
                                    return false;
                                }

                                data.type = currentType.value;
                                data.block_id = __current_block?.id;

                                $.transferData({
                                    method: "POST",
                                    url: __helper.url.urlPattern(__routeApi.receiptsExpenses.create),
                                    data,
                                    textLoading: `Đang thêm phiếu ${currentType.name}...`,
                                    success: function (res) {
                                        Swal.fire({
                                            title: 'Thông báo!',
                                            text: res.message,
                                            icon: 'success',
                                            confirmButtonColor: '#3c9e47',
                                            confirmButtonText: 'Đóng'
                                        }).then((result) => {
                                            bootstrap.Modal.getInstance(__el.modal.get(0)).hide();

                                            if (res.data && window.receiptExpenseTable) {
                                                window.receiptExpenseTable.updateOrAddData([res.data]);

                                                let total_receipt = __el.total_receipt.data('total') ?? 0;
                                                let total_expense = __el.total_expense.data('total') ?? 0;
                                                if (currentType.value === 'receipts') {
                                                    total_receipt += data.amount;
                                                } else {
                                                    total_expense += data.amount;
                                                }
                                                let total_profit = total_receipt - total_expense;

                                                __el.total_receipt.data('total', total_receipt).text(__format.currency(total_receipt));
                                                __el.total_expense.data('total', total_expense).text(__format.currency(total_expense));
                                                __el.total_profit.data('total', total_profit).text(__format.currency(total_profit));
                                                __el.count_filter.text(parseInt(__el.count_filter.text) + 1);
                                            }
                                        });
                                    },
                                    fail: function (res) {
                                        Swal.fire({
                                            title: 'Thông báo!',
                                            text: res.message,
                                            icon: 'error',
                                            confirmButtonColor: '#3c9e47',
                                            confirmButtonText: 'Đã hiểu'
                                        });
                                    }
                                })
                            }

                        });
                    });
                </script>
                <!-- Modal deposit temp -->
                <style type="text/css">
                    #billDetail .item.d-flex.justify-content-between {
                        padding: 10px;
                    }

                    #billDetail .item.d-flex.justify-content-between:not(:last-child) {
                        border-bottom: 0.5px solid #ccc;
                    }
                </style>
                <div class="modal fade" data-bs-backdrop="static" id="billDetail" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div
                                    style="margin-right: 15px;outline: 0;box-shadow: 0 0 0 .25rem rgb(76 175 80 / 16%);opacity: 1;border-radius: 100%;width: 36px;height: 36px;justify-content: center;align-items: center;display: flex;background-color: #b1e1b8;">
                                    <i data-feather="file-text"> </i>
                                </div>
                                <h5 class="modal-title">Chi tiết hóa đơn</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body" style="position: relative; display: grid;">
                                <div class="bill-detail-loading" style="position: absolute;
                width: 100%;
                height: 100%;
                background-color: #00000030;
                align-items: center;
                justify-content: center;
                display: flex;">
                                    <div class="text-center" style="padding: 20px">
                                        <img style="margin: auto" src="https://quanlytro.me/images/icons/loading.gif"
                                            alt="Đang tải..." width="50px" />
                                        <div>
                                            <i class="loading_text" style="font-size: 13px; margin-top: -10px;">Đang tải
                                                thông báo...</i>
                                        </div>
                                    </div>
                                </div>
                                <form method="POST" class="needs-validation" id="bill-detail-form" novalidate>
                                    <div class="row mt-2 bill-detail">
                                        <div class="col-12">
                                            <div style="border: 0.5px solid #ccc; border-radius: 10px;">
                                                <div class="item d-flex justify-content-between">
                                                    <span>Ngày tạo hóa đơn</span><b class="bill-date"></b>
                                                </div>
                                                <div class="item d-flex justify-content-between">
                                                    <span>Ly do thu tiền</span><b class="bill-reason"></b>
                                                </div>
                                                <div class="item d-flex justify-content-between">
                                                    <span>Số điện thoại liên hệ</span><b class="bill-phone"></b>
                                                </div>
                                                <div class="item d-flex justify-content-between">
                                                    <span>Tình trạng</span><span style="background-color: #000"
                                                        class="badge bill-status"></span>
                                                </div>
                                                <div class="item justify-content-between"
                                                    style="padding: 10px; border-bottom: 0.5px solid #ccc;">
                                                    <div class="d-flex justify-content-start"
                                                        style="margin-bottom: 10px">
                                                        <i style="margin-right: 5px" data-feather="file-text"> </i>
                                                        <b>Danh mục tính tiền</b>
                                                    </div>
                                                    <div>
                                                        <div class="item-bill-room-amount"
                                                            style="background-color: #eee; margin-bottom: 10px; border-radius: 7px">
                                                            <div
                                                                class="item d-flex justify-content-between align-items-center">
                                                                <div>
                                                                    <div>Tiền thuê</div>
                                                                    <div>
                                                                        <b class="detail-room-amount">
                                                                            30 ngày x 2.000.000đ
                                                                        </b>
                                                                    </div>
                                                                </div>
                                                                <b class="total_room_amount">2.200.000đ</b>
                                                            </div>
                                                        </div>

                                                        <div class="item-bill-deposit"
                                                            style="background-color: #eee; margin-bottom: 10px; border-radius: 7px">
                                                            <div
                                                                class="item d-flex justify-content-between align-items-center">
                                                                <div>
                                                                    <div class="label-deposit">Tiền cọc</div>
                                                                </div>
                                                                <b class="deposit_contract_amount">2.200.000đ</b>
                                                            </div>
                                                            <div class="item-bill-pre-deposit item d-flex justify-content-between align-items-center"
                                                                style="font-size: 12px;
                                            color: gray;">
                                                                <div>
                                                                    <div class="label-pre-deposit">Tiền cọc đã thu trước
                                                                    </div>
                                                                </div>
                                                                <b class="pre_deposit_contract_amount">0 đ</b>
                                                            </div>
                                                        </div>

                                                        <div class="item-bill-price-item"
                                                            style="background-color: #eee; margin-bottom: 10px; border-radius: 7px">
                                                            <div
                                                                class="item d-flex justify-content-between align-items-center">
                                                                <div>
                                                                    <div>Tiền dịch vụ</div>
                                                                </div>
                                                                <b class="total_price_item">2.200.000đ</b>
                                                            </div>
                                                        </div>
                                                        <div class="item-bill-addition"
                                                            style="background-color: #eee; margin-bottom: 10px; border-radius: 7px">
                                                            <div
                                                                class="item d-flex justify-content-between align-items-center">
                                                                <div>
                                                                    <div class="addition_text">Giảm trừ</div>
                                                                </div>
                                                                <b class="addition_value">2.200.000đ</b>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="item d-flex justify-content-between">
                                                    <span>Giá trị hóa đơn</span><b class="bill-value"></b>
                                                </div>
                                                <div class="item d-flex justify-content-between">
                                                    <span class="bill-paid-total-text">Đã thu</span><b
                                                        class="bill-paid-total"></b>
                                                </div>
                                                <div class="item d-flex justify-content-between">
                                                    <span>Tổng số lần thu</span><b><b class="bill-count_pay_bill"></b>
                                                        Lần</b>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bill-history">
                                            <div class="col-12 mt-2 mb-2">
                                                <div class="title-item-small">
                                                    <b>Lịch sử thu tiền</b>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div style="border: 0.5px solid #ccc; border-radius: 10px;">
                                                    <div class="history-pay">

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </form>
                            </div>
                            <div class="modal-footer modal-footer--sticky">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                            </div>
                        </div>
                    </div>
                </div>

                <script type="text/javascript">
                    $(document).ready(function () {
                        let __el = {
                            modal_bill_detail: $("#billDetail")
                        };

                        __el.modal_bill_detail.get(0).addEventListener('shown.bs.modal', function (e) {
                            if (!e?.relatedTarget?.bill_id) {
                                Swal.fire({
                                    title: 'Thông báo!',
                                    text: 'Không chỉ định thông tin hóa đơn!',
                                    icon: 'error',
                                    confirmButtonText: 'Đã hiểu'
                                });
                                return false;
                            }

                            $.transferData({
                                method: "GET",
                                url: __helper.url.urlPattern(__routeApi.bill.show, {
                                    id: parseInt(e?.relatedTarget?.bill_id)
                                }),
                                loadingEle: __el.modal_bill_detail.find('.bill-detail-loading'),
                                textLoading: 'Đang tải chi tiết hóa đơn...',
                                success: (res) => {
                                    let bill = res.data;
                                    //@TODO: show price item....
                                    __el.modal_bill_detail.find('.bill-date').text(bill.date_format);
                                    // Xử lý tiền thuê nhà
                                    if (bill.total_room_amount > 0) {
                                        __el.modal_bill_detail.find('.item-bill-room-amount').show();
                                        __el.modal_bill_detail.find('.detail-room-amount').text(`${bill.total_day} ngày x ${__format.currency(bill.room_amount_unit)}`);
                                        __el.modal_bill_detail.find('.total_room_amount').text(`${__format.currency(bill.total_room_amount)}`);
                                    } else {
                                        __el.modal_bill_detail.find('.item-bill-room-amount').hide();
                                    }

                                    // Xử lý tiền cọc
                                    if (bill.deposit_contract_amount) {
                                        __el.modal_bill_detail.find('.item-bill-deposit').show();
                                        if (bill.deposit_contract_amount > 0) {
                                            __el.modal_bill_detail.find('.label-deposit').text("Thu tiền cọc");
                                            __el.modal_bill_detail.find('.deposit_contract_amount').text(__format.currency(bill.deposit_contract_amount));

                                        } else {
                                            __el.modal_bill_detail.find('.label-deposit').text("Trả tiền cọc");
                                            __el.modal_bill_detail.find('.deposit_contract_amount').text(`${__format.currency(bill.deposit_contract_amount)}`);
                                        }
                                    } else {
                                        __el.modal_bill_detail.find('.item-bill-deposit').hide();
                                    }

                                    // Xử lý tiền cọc giữ chỗ
                                    if (parseInt(bill.pre_deposit_contract_amount) > 0) {
                                        __el.modal_bill_detail.find('.item-bill-pre-deposit').show();
                                        __el.modal_bill_detail.find('.label-pre-deposit').text("Tiền cọc đã thu trước");
                                        __el.modal_bill_detail.find('.pre_deposit_contract_amount').text(__format.currency(bill.pre_deposit_contract_amount));
                                    } else {
                                        __el.modal_bill_detail.find('.item-bill-pre-deposit').hide();
                                    }

                                    // Xử lý tiền dịch vụ
                                    if (bill.total_price_item > 0) {
                                        __el.modal_bill_detail.find('.item-bill-price-item').show();
                                        __el.modal_bill_detail.find('.total_price_item').text(`${__format.currency(bill.total_price_item)}`);
                                    } else {
                                        __el.modal_bill_detail.find('.item-bill-price-item').hide();
                                    }

                                    // Xử lý tiền giảm trừ/cộng thêm
                                    if (bill.addition != 0) {
                                        __el.modal_bill_detail.find('.item-bill-addition').show();
                                        bill.addition === 1 ? __el.modal_bill_detail.find('.addition_text').text('Cộng thêm') : __el.modal_bill_detail.find('.addition_text').text('Giảm trừ')
                                        __el.modal_bill_detail.find('.addition_value').text(`${__format.currency(bill.addition_value)}`);
                                    } else {
                                        __el.modal_bill_detail.find('.item-bill-addition').hide();
                                    }

                                    bill.total > 0 ? __el.modal_bill_detail.find('.bill-paid-total-text').text('Đã thu') : __el.modal_bill_detail.find('.bill-paid-total-text').text('Đã hoàn lại');
                                    __el.modal_bill_detail.find('.bill-phone').text(bill?.room?.customers[0]?.phone);
                                    __el.modal_bill_detail.find('.bill-value').text(__format.currency(bill.total));
                                    __el.modal_bill_detail.find('.bill-paid-total').text(__format.currency(bill.paid_total));

                                    __el.modal_bill_detail.find('.bill-reason').text(bill.reason);
                                    __el.modal_bill_detail.find('.bill-count_pay_bill').text(bill.count_pay_bill);

                                    if (bill.payBills.length > 0) {
                                        __el.modal_bill_detail.find('.bill-history').show();
                                        $.each(bill.payBills, function (index, item) {
                                            __el.modal_bill_detail.find('.history-pay').append(`
                            <div class="item d-flex justify-content-between">
                                <span>Ngày thu</span><span class="bill-pay-date">${item.created_at_format}</span>
                            </div>
                            <div class="item d-flex justify-content-between">
                                <span>Số tiền thu</span><span class="bill-pay-date">${__format.currency(item.paid_total)}</span>
                            </div>
                            `)
                                        });
                                    } else {
                                        __el.modal_bill_detail.find('.bill-history').hide();
                                    }
                                },
                            });
                        });

                        __el.modal_bill_detail.get(0).addEventListener('hide.bs.modal', function (e) {
                            __el.modal_bill_detail.find('.history-pay .item').remove();
                            __el.modal_bill_detail.find('.bill-date').text('');
                        });
                    });
                </script>
                <!-- Modal categry expense -->
                <div class="modal fade" id="category-expense" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div
                                    style="margin-right: 15px;outline: 0;box-shadow: 0 0 0 .25rem rgb(76 175 80 / 16%);opacity: 1;border-radius: 100%;width: 36px;height: 36px;justify-content: center;align-items: center;display: flex;background-color: #b1e1b8;">
                                    <i data-feather="users"> </i>
                                </div>
                                <h5 class="modal-title">Danh mục chi</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                </button>
                            </div>
                            <div class="modal-body category">
                                <div class="row category-expense">
                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-5">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-5">Chi phí quản lý</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-5">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi phí quản lý">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-5" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(5,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-5" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(5,'expense','Chi phí quản lý');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-6">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-6">Chi hoàn tiền cọc</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-6">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi hoàn tiền cọc">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-6" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(6,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-6" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(6,'expense','Chi hoàn tiền cọc');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-7">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-7">Chi trả tiền điện</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-7">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi trả tiền điện">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-7" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(7,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-7" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(7,'expense','Chi trả tiền điện');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-8">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-8">Chi trả tiền nước</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-8">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi trả tiền nước">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-8" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(8,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-8" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(8,'expense','Chi trả tiền nước');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-9">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-9">Chi trả tiền wifi</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-9">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi trả tiền wifi">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-9" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(9,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-9" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(9,'expense','Chi trả tiền wifi');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-10">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-10">Chi trả tiền cáp TV</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-10">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi trả tiền cáp TV">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-10" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(10,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-10" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(10,'expense','Chi trả tiền cáp TV');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-11">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-11">Chi Cho vay</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-11">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi Cho vay">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-11" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(11,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-11" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(11,'expense','Chi Cho vay');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-12">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-12">Chi Trả nợ</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-12">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi Trả nợ">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-12" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(12,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-12" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(12,'expense','Chi Trả nợ');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-14">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-14">Chi giảm trừ hóa đơn</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-14">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi giảm trừ hóa đơn">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-14" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(14,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-14" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(14,'expense','Chi giảm trừ hóa đơn');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-19">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-19">Chi hoàn trả tiền kết thúc hợp đồng</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-19">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi hoàn trả tiền kết thúc hợp đồng">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-19" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(19,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-19" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(19,'expense','Chi hoàn trả tiền kết thúc hợp đồng');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-22">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-22">Chi hoàn cọc giữ chỗ</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-22">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi hoàn cọc giữ chỗ">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-22" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(22,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-22" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(22,'expense','Chi hoàn cọc giữ chỗ');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-23">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-23">Chi hoa hồng môi giới</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-23">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi hoa hồng môi giới">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-23" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(23,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-23" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(23,'expense','Chi hoa hồng môi giới');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-expense-24">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-24">Chi tiền thuê nhà</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-expense-24">
                                            <div>
                                                <input type="text" class="form-control" name="expense_item"
                                                    value="Chi tiền thuê nhà">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-expense-24" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(24,'expense')">Lưu</button>
                                                <button type="button" id="cancel-expense-24" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(24,'expense','Chi tiền thuê nhà');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="modal-footer modal-footer--sticky">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                            </div>
                        </div>
                    </div>
                </div><!-- Modal categry receipt -->
                <div class="modal fade" id="category-receipt" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div
                                    style="margin-right: 15px;outline: 0;box-shadow: 0 0 0 .25rem rgb(76 175 80 / 16%);opacity: 1;border-radius: 100%;width: 36px;height: 36px;justify-content: center;align-items: center;display: flex;background-color: #b1e1b8;">
                                    <i data-feather="users"> </i>
                                </div>
                                <h5 class="modal-title">Danh mục thu</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                </button>
                            </div>
                            <div class="category modal-body">
                                <div class="category-receipt row">
                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-receipt-1">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-1">Thu tiền phòng</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-receipt-1">
                                            <div>
                                                <input type="text" class="form-control" name="receipt_item"
                                                    value="Thu tiền phòng">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-receipt-1" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(1,'receipt')">Lưu</button>
                                                <button type="button" id="cancel-receipt-1" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(1,'receipt','Thu tiền phòng');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-receipt-2">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-2">Thu tiền cọc</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-receipt-2">
                                            <div>
                                                <input type="text" class="form-control" name="receipt_item"
                                                    value="Thu tiền cọc">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-receipt-2" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(2,'receipt')">Lưu</button>
                                                <button type="button" id="cancel-receipt-2" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(2,'receipt','Thu tiền cọc');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-receipt-3">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-3">Thu tiền dịch vụ</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-receipt-3">
                                            <div>
                                                <input type="text" class="form-control" name="receipt_item"
                                                    value="Thu tiền dịch vụ">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-receipt-3" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(3,'receipt')">Lưu</button>
                                                <button type="button" id="cancel-receipt-3" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(3,'receipt','Thu tiền dịch vụ');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-receipt-4">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-4">Thu nợ</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-receipt-4">
                                            <div>
                                                <input type="text" class="form-control" name="receipt_item"
                                                    value="Thu nợ">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-receipt-4" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(4,'receipt')">Lưu</button>
                                                <button type="button" id="cancel-receipt-4" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(4,'receipt','Thu nợ');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-receipt-13">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-13">Thu cộng thêm hóa đơn</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-receipt-13">
                                            <div>
                                                <input type="text" class="form-control" name="receipt_item"
                                                    value="Thu cộng thêm hóa đơn">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-receipt-13" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(13,'receipt')">Lưu</button>
                                                <button type="button" id="cancel-receipt-13" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(13,'receipt','Thu cộng thêm hóa đơn');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-receipt-15">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-15">Thu tiền giường</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-receipt-15">
                                            <div>
                                                <input type="text" class="form-control" name="receipt_item"
                                                    value="Thu tiền giường">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-receipt-15" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(15,'receipt')">Lưu</button>
                                                <button type="button" id="cancel-receipt-15" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(15,'receipt','Thu tiền giường');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-receipt-16">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-16">Thu tiền hàng tháng</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-receipt-16">
                                            <div>
                                                <input type="text" class="form-control" name="receipt_item"
                                                    value="Thu tiền hàng tháng">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-receipt-16" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(16,'receipt')">Lưu</button>
                                                <button type="button" id="cancel-receipt-16" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(16,'receipt','Thu tiền hàng tháng');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-receipt-17">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-17">Thu tiền tháng đầu tiên</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-receipt-17">
                                            <div>
                                                <input type="text" class="form-control" name="receipt_item"
                                                    value="Thu tiền tháng đầu tiên">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-receipt-17" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(17,'receipt')">Lưu</button>
                                                <button type="button" id="cancel-receipt-17" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(17,'receipt','Thu tiền tháng đầu tiên');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-receipt-18">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-18">Thu tiền kết thúc hợp đồng</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-receipt-18">
                                            <div>
                                                <input type="text" class="form-control" name="receipt_item"
                                                    value="Thu tiền kết thúc hợp đồng">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-receipt-18" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(18,'receipt')">Lưu</button>
                                                <button type="button" id="cancel-receipt-18" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(18,'receipt','Thu tiền kết thúc hợp đồng');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-receipt-20">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-20">Thu tiền theo chu kỳ</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-receipt-20">
                                            <div>
                                                <input type="text" class="form-control" name="receipt_item"
                                                    value="Thu tiền theo chu kỳ">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-receipt-20" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(20,'receipt')">Lưu</button>
                                                <button type="button" id="cancel-receipt-20" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(20,'receipt','Thu tiền theo chu kỳ');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="item d-flex justify-content-between" id="item-receipt-21">
                                            <div class="d-flex">
                                                <div class="d-flex align-items-center">
                                                    <i data-feather="tag"> </i>
                                                </div>
                                                <div>
                                                    <b id="category-name-21">Thu cọc giữ chỗ</b>
                                                    <div><i style="font-size: 13px; color:#ff5722">Hệ thống tạo, không
                                                            thể chỉnh sửa</i></div>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                            </div>
                                        </div>
                                        <div class="item item-input d-flex justify-content-between d-none"
                                            id="input-receipt-21">
                                            <div>
                                                <input type="text" class="form-control" name="receipt_item"
                                                    value="Thu cọc giữ chỗ">
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" id="submit-receipt-21" class="btn btn-primary"
                                                    onclick="submitEditReceiptExpense(21,'receipt')">Lưu</button>
                                                <button type="button" id="cancel-receipt-21" class="btn btn-secondary"
                                                    onclick="cancelReceiptExpense(21,'receipt','Thu cọc giữ chỗ');">Hủy</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer modal-footer--sticky">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal manage block -->
        <div class="modal fade" id="manageBlock" tabindex="-1" aria-labelledby="manageBlockLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header modal-header--sticky">
                        <i style="margin-right: 15px" data-feather="home"> </i>
                        <h5 class="modal-title" id="manageBlockLabel">
                            Danh sách nhà trọ của bạn
                            <p style="font-size: 14px; font-weight: normal; font-style: italic; margin: 0">Tới 1 nhà trọ
                                và quản lý</p>
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"> </button>
                    </div>
                    <div class="modal-body">
                        <div class="item-feature active d-flex align-items-center justify-content-between mb-2">
                            <div class="info" style="flex: 1">
                                <h6>Nhà trọ MONIEQEWQ</h6>
                                <p>12313123 - Đường Phan Đình, Thanh Hòa, Bù Đốp, Bình Phước</p>
                            </div>

                            <div class="btn-round disabled btn-secondary" data-bs-toggle="tooltip"
                                data-bs-placement="top" title="Không thể xóa nhà trọ đang thao tác">
                                <i data-feather="trash-2"> </i>
                            </div>

                            <div class="btn-round btn-edit" data-bs-toggle="modal" data-bs-target="#addBlock"
                                data-block='{"id":6920,"name":"MONIEQEWQ","name_full":"Nh\u00e0 tr\u1ecd MONIEQEWQ","user_id":8168,"category":0,"category_name":"Nh\u00e0 tr\u1ecd","category_name_short":"Nh\u00e0 tr\u1ecd","room_type":"room","room_type_name":"ph\u00f2ng","type":"floor","room_total":20,"count_floor":1,"area":15,"room_amount":1000,"ele_amount":0,"water_amount":0,"price_items_cache":[{"id":22810,"name":"Ti\u1ec1n \u0111i\u1ec7n","type":"constant","unit":"kwh","price":1700,"rooms":{"payload":[{"id":100355,"name":"Ph\u00f2ng 1","sort":null,"value":100355,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100356,"name":"Ph\u00f2ng 2","sort":null,"value":100356,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100357,"name":"Ph\u00f2ng 3","sort":null,"value":100357,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100358,"name":"Ph\u00f2ng 4","sort":null,"value":100358,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100359,"name":"Ph\u00f2ng 5","sort":null,"value":100359,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100360,"name":"Ph\u00f2ng 6","sort":null,"value":100360,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100361,"name":"Ph\u00f2ng 7","sort":null,"value":100361,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100362,"name":"Ph\u00f2ng 8","sort":null,"value":100362,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100363,"name":"Ph\u00f2ng 9","sort":null,"value":100363,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100364,"name":"Ph\u00f2ng 10","sort":null,"value":100364,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100365,"name":"Ph\u00f2ng 11","sort":null,"value":100365,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100366,"name":"Ph\u00f2ng 12","sort":null,"value":100366,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100367,"name":"Ph\u00f2ng 13","sort":null,"value":100367,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100368,"name":"Ph\u00f2ng 14","sort":null,"value":100368,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100369,"name":"Ph\u00f2ng 15","sort":null,"value":100369,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100370,"name":"Ph\u00f2ng 16","sort":null,"value":100370,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100371,"name":"Ph\u00f2ng 17","sort":null,"value":100371,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100372,"name":"Ph\u00f2ng 18","sort":null,"value":100372,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100373,"name":"Ph\u00f2ng 19","sort":null,"value":100373,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100374,"name":"Ph\u00f2ng 20","sort":null,"value":100374,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"}]},"value":null,"frames":[],"status":"is_active","history":null,"user_id":8168,"block_id":6920,"category":"ele","type_text":"Theo gi\u00e1 tr\u1ecb c\u1ed1 \u0111\u1ecbnh","unit_text":"KWh","is_default":1,"status_text":"\u0110ang s\u1eed d\u1ee5ng","subtraction":1},{"id":22811,"name":"Ti\u1ec1n n\u01b0\u1edbc","type":"constant","unit":"khoi","price":18000,"rooms":{"payload":[{"id":100355,"name":"Ph\u00f2ng 1","sort":null,"value":100355,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100356,"name":"Ph\u00f2ng 2","sort":null,"value":100356,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100357,"name":"Ph\u00f2ng 3","sort":null,"value":100357,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100358,"name":"Ph\u00f2ng 4","sort":null,"value":100358,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100359,"name":"Ph\u00f2ng 5","sort":null,"value":100359,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100360,"name":"Ph\u00f2ng 6","sort":null,"value":100360,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100361,"name":"Ph\u00f2ng 7","sort":null,"value":100361,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100362,"name":"Ph\u00f2ng 8","sort":null,"value":100362,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100363,"name":"Ph\u00f2ng 9","sort":null,"value":100363,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100364,"name":"Ph\u00f2ng 10","sort":null,"value":100364,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100365,"name":"Ph\u00f2ng 11","sort":null,"value":100365,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100366,"name":"Ph\u00f2ng 12","sort":null,"value":100366,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100367,"name":"Ph\u00f2ng 13","sort":null,"value":100367,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100368,"name":"Ph\u00f2ng 14","sort":null,"value":100368,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100369,"name":"Ph\u00f2ng 15","sort":null,"value":100369,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100370,"name":"Ph\u00f2ng 16","sort":null,"value":100370,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100371,"name":"Ph\u00f2ng 17","sort":null,"value":100371,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100372,"name":"Ph\u00f2ng 18","sort":null,"value":100372,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100373,"name":"Ph\u00f2ng 19","sort":null,"value":100373,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100374,"name":"Ph\u00f2ng 20","sort":null,"value":100374,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"}]},"value":null,"frames":[],"status":"is_active","history":null,"user_id":8168,"block_id":6920,"category":"water","type_text":"Theo gi\u00e1 tr\u1ecb c\u1ed1 \u0111\u1ecbnh","unit_text":"Kh\u1ed1i","is_default":1,"status_text":"\u0110ang s\u1eed d\u1ee5ng","subtraction":1},{"id":22834,"name":"Ti\u1ec1n \u0111i\u1ec7n","type":"constant","unit":"kwh","price":1700,"rooms":{"payload":[{"id":100355,"name":"Ph\u00f2ng 1","sort":null,"value":100355,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"}]},"value":null,"frames":[],"status":"is_active","history":null,"user_id":8168,"block_id":6920,"category":"other","type_text":"Theo gi\u00e1 tr\u1ecb c\u1ed1 \u0111\u1ecbnh","unit_text":"KWh","is_default":0,"status_text":"\u0110ang s\u1eed d\u1ee5ng","subtraction":0}],"circle_order":30,"deadline_bill":30,"bill_setting":{"note":{"content":null},"enable_qr":1,"payment_default":"cash","show_circle_day":0,"single_send_zalo":0,"template_bill_zalo":1,"enable_rounding_money":1,"extract_receipt_expense":0},"app_renter_setting":{"allow_update_car":1,"default_password":123456789,"allow_close_clock":0,"auto_create_account":0,"allow_ticket_contract":1,"allow_update_customer":1},"room_group":[{"id":1,"name":"T\u1ea7ng tr\u1ec7t","index":0,"label":"T\u1ea7ng tr\u1ec7t","value":1}],"max_member":1,"open_door":null,"close_door":null,"rule":null,"extension":null,"data_log":{"id":6920,"menu_label":{"pay_bill":0,"room_list":"1\/20","new_session":19,"deposit_request":"0\/19","terminate_contract":"0\/1"},"block_report":{"id":6911,"data":null,"block_id":6920,"call_count":0,"debt_count":0,"post_count":0,"view_count":0,"empty_count":19,"active_count":1,"can_sale_count":19,"debt_amount_total":0,"deposit_temp_count":0,"deposit_amount_total":0,"male_dormitory_count":0,"tick_terminate_count":0,"will_terminate_count":0,"deposit_contract_count":0,"female_dormitory_count":0,"renter_connected_count":0,"deposit_temp_amount_total":0,"debt_customer_amount_total":0,"deposit_contract_amount_total":0}},"setting":{"car_function":1,"post_function":1,"agent_function":1,"asset_function":1,"price_item_ele":3,"price_item_wifi":0,"price_item_trash":0,"price_item_water":3,"task_job_function":1,"send_sms_when_create_bill":1,"contract_document_function":0},"province_id":70,"district_id":693,"ward_id":25315,"address_component":{"address":"12313123 - \u0110\u01b0\u1eddng Phan \u0110\u00ecnh, Thanh H\u00f2a, B\u00f9 \u0110\u1ed1p, B\u00ecnh Ph\u01b0\u1edbc","ward_id":"25315","position":{"latitude":"10.7829132","longitude":"106.6961898"},"district_id":"693","province_id":"70","address_detail":"12313123 - \u0110\u01b0\u1eddng Phan \u0110\u00ecnh"},"address":"12313123 - \u0110\u01b0\u1eddng Phan \u0110\u00ecnh, Thanh H\u00f2a, B\u00f9 \u0110\u1ed1p, B\u00ecnh Ph\u01b0\u1edbc","latitude":10.7829132,"longitude":106.6961898,"auto_create_room":1,"post_ids":[]}'>
                                <div style="width: 100%; height: 100%; align-items: center;
                            display: inherit;
                            text-align: center;
                            justify-content: center; color: #000" data-bs-toggle="tooltip" data-bs-placement="top"
                                    title="Chỉnh sửa Nhà trọ">
                                    <i data-feather="edit"> </i>
                                </div>
                            </div>

                            <a class="btn-round btn-go-to" data-bs-toggle="tooltip" data-bs-placement="top"
                                title="Tới quản lý Nhà trọ" href="/quan-ly/nha-tro/6920">
                                <i data-feather="arrow-right"> </i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#manageBlock .btn-edit").click(function (e) {
                    let ModalAddBlock = $($(this).data('bsTarget'));
                    ModalAddBlock &&
                        ModalAddBlock.data('block', $(this).data('block'));
                });

                $("#manageBlock .btn-delete").click(function (e) {
                    Swal.fire({
                        title: 'Thông báo!',
                        text: "Bạn có chắc chắn muốn xóa nhà trọ",
                        icon: 'warning',
                        showCancelButton: true,
                        cancelButtonColor: '#d33',
                        confirmButtonColor: '#3085d6',
                        confirmButtonText: 'Vâng! tôi muốn xóa',
                        cancelButtonText: 'Không xóa'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $.transferData({
                                method: "GET",
                                url: __helper.url.urlPattern(__routeApi.block.delete, {
                                    block_id: parseInt($(this).data('id'))
                                }),
                                success: (res) => {
                                    Swal.fire({
                                        title: 'Thành công!',
                                        text: res.message,
                                        icon: 'success',
                                        confirmButtonColor: '#3c9e47',
                                        confirmButtonText: 'Đóng'
                                    }).then((result) => {
                                        window.location.href = index.html;
                                    });
                                }
                            });
                        }
                    });
                });
            });
        </script>
        <!-- Modal add block -->
        <div class="modal fade" data-bs-backdrop="static" id="addBlock" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <div
                            style="margin-right: 15px;outline: 0;box-shadow: 0 0 0 .25rem rgb(76 175 80 / 16%);opacity: 1;border-radius: 100%;width: 36px;height: 36px;justify-content: center;align-items: center;display: flex;background-color: #b1e1b8;">
                            <i data-feather="home"> </i>
                        </div>
                        <h5 class="modal-title">Thêm nhà trọ</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"> </button>
                    </div>
                    <div class="modal-body">
                        <form method="POST" class="needs-validation" id="add-block-form" novalidate>
                            <input type="hidden" name="_token" value="kxYQeI0VRTTSOTGg7403Q8D94othHXKBNy8OQWXf">
                            <div class="row g-3">
                                <div class="col-12">
                                    <div class="title-item-small">
                                        <b>Thông tin:</b>
                                        <i class="des">Các thông tin nhà trọ cơ bản</i>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="category" name="category"
                                            class="form-select form-control" required>
                                            <option value="0">Nhà trọ</option>
                                            <option value="1">Ký túc xá/sleepbox</option>
                                            <option value="2">Chung cư mini</option>
                                            <option value="5">Tòa nhà chung cư</option>
                                            <option value="3">Nhà nguyên căn</option>
                                            <option value="4">Văn phòng cho thuê</option>
                                        </select>
                                        <label for="category">Loại nhà trọ</label>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-floating">
                                        <input type="text" class="form-control" name="name" id="name" required
                                            placeholder="Tên nhà trọ">
                                        <label for="name">Tên nhà trọ</label>
                                        <div class="invalid-feedback">
                                            Vui lòng nhập tên nhà trọ
                                        </div>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 invisible d-none">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="room_type_room"
                                            name="room_type" value="room">
                                        <label class="form-check-label" for="room_type_room">
                                            <b>Thuê theo phòng</b>
                                            <p>Tính tiền thuê theo phòng</p>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="room_type_bed" name="room_type"
                                            value="bed">
                                        <label class="form-check-label" for="room_type_bed">
                                            <b>Thuê theo giường</b>
                                            <p>Tính tiền theo giường</p>
                                        </label>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="title-item-small">
                                        <b>Chọn phương thức khởi tạo dữ liệu</b>
                                        <i class="des">Chọn 1 trong 3 phương thức tạo khởi tạo dữ liệu</i>
                                    </div>
                                </div>
                                <div class="col-12 mt-2 type-input-room hide-when-edit d-flex"
                                    style="text-align: center;">
                                    <style type="text/css">
                                        .type-input-room .item {
                                            width: 100%;
                                            border: 1px solid #ccc;
                                            margin: 5px;
                                            padding: 5px;
                                            border-radius: 10px;
                                        }
                                    </style>
                                    <div class="item">
                                        <div class="form-check form-check-inline">
                                            <input data-format="numeric" class="form-check-input" type="radio"
                                                name="auto_create_room" id="enable" checked value="1">
                                            <label class="form-check-label" for="enable">
                                                <b>Tạo dữ liệu <span class="room_type_name">phòng</span> tự động </b>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="form-check form-check-inline">
                                            <input data-format="numeric" class="form-check-input" type="radio"
                                                name="auto_create_room" id="excel" value="2">
                                            <label class="form-check-label" for="excel">
                                                <b>Tạo dữ liệu <span class="room_type_name">phòng</span> từ Excel</b>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="form-check form-check-inline">
                                            <input data-format="numeric" class="form-check-input" type="radio"
                                                name="auto_create_room" id="disable" value="0">
                                            <label class="form-check-label" for="disable">
                                                <b>Tạo dữ liệu <span class="room_type_name">phòng</span> thủ công </b>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2 info-auto-create-room-enable">
                                    <div class="loz-alert info mt-2 mb-2">
                                        <div class="icon flex-0">
                                            <i data-feather="info" size="20"> </i>
                                        </div>
                                        <div class="des flex-1">
                                            <b>Ghi chú:</b> Vui lòng chọn số tầng và nhập số <span
                                                class="room_type_name">phòng</span> để hệ thống tự động tạo dữ liệu
                                            <span class="room_type_name">phòng</span> cho bạn
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2 d-none info-auto-create-room-disable">
                                    <div class="loz-alert warning mt-2 mb-2">
                                        <div class="icon flex-0">
                                            <i data-feather="info" size="20"> </i>
                                        </div>
                                        <div class="des flex-1">
                                            <b>Ghi chú:</b> Bạn phải thực hiện tạo dữ liệu cho từng <span
                                                class="room_type_name">phòng</span> bằng thủ công.
                                        </div>
                                    </div>
                                </div>

                                <div class="d-none import-from-excel-layout">
                                    <style type="text/css">
                                        .stepProgress {
                                            position: relative;
                                            padding-left: 45px;
                                            list-style: none;
                                        }

                                        .stepProgress::before {
                                            display: inline-block;
                                            content: '';
                                            position: absolute;
                                            top: 0;
                                            left: 15px;
                                            width: 10px;
                                            height: 100%;
                                            border-left: 2px solid #CCC;
                                        }

                                        .stepProgress-item {
                                            position: relative;
                                            counter-increment: list;
                                        }

                                        .stepProgress-item:not(:last-child) {
                                            padding-bottom: 20px;
                                        }

                                        .stepProgress-item::before {
                                            display: inline-block;
                                            content: '';
                                            position: absolute;
                                            left: -30px;
                                            height: 100%;
                                            width: 10px;
                                        }

                                        .stepProgress-item::after {
                                            content: '';
                                            display: inline-block;
                                            position: absolute;
                                            top: 0;
                                            left: -39px;
                                            width: 20px;
                                            height: 20px;
                                            border: 2px solid #CCC;
                                            border-radius: 50%;
                                            background-color: #FFF;
                                        }
                                    </style>
                                    <ul class="stepProgress">
                                        <li class="stepProgress-item">Bước 1: Tải file mẫu</li>
                                        <li class="stepProgress-item">Bước 2: Nhập dữ liệu của bạn vào file mẫu</li>
                                        <li class="stepProgress-item">Bước 3: Upload file mẫu lên để nhập liệu</li>
                                    </ul>
                                    <div class="row g-2">
                                        <div class="col-6 mt-2 import-excel">
                                            <div class="image-upload-simple" style="height: 100px;">
                                                <input type="file" style="display: none" id="file-excel" accept=".xlsx">
                                                <div class="container-upload " id="import-excel-trigger"
                                                    style="border: 2px dashed #ccc;">
                                                    <div class="placeholder __add-more-imge"
                                                        style="display: grid;cursor: pointer !important;width: 100%;align-items: center;justify-content: center;height: 100%;margin:-10px;">
                                                        <div class="icon-upload" style="margin:auto"><svg
                                                                xmlns="http://www.w3.org/2000/svg" width="30"
                                                                height="30" viewBox="0 0 24 24" fill="none"
                                                                stroke="currentColor" stroke-width="2"
                                                                stroke-linecap="round" stroke-linejoin="round"
                                                                class="feather feather-upload-cloud">
                                                                <polyline points="16 16 12 12 8 16"></polyline>
                                                                <line x1="12" y1="12" x2="12" y2="21"></line>
                                                                <path
                                                                    d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3">
                                                                </path>
                                                                <polyline points="16 16 12 12 8 16"></polyline>
                                                            </svg>
                                                        </div>
                                                        <label style="text-decoration:underline" id="text-import">File
                                                            Excel cần nhập dữ liệu</label>
                                                    </div>
                                                </div>
                                                <div class="invalid-feedback"> Vui lòng chọn file Excel</div>
                                            </div>
                                        </div>
                                        <div class="col-6 mt-2 download-template-excel">
                                            <a href="/download-template-excel" style=" color: inherit;">
                                                <div class="image-upload-simple" style="height: 100px;">
                                                    <div class="container-upload " id="download-excel-trigger"
                                                        style="border: 2px dashed #ccc;">
                                                        <div class="placeholder __add-more-imge"
                                                            style="display: grid;cursor: pointer !important;width: 100%;align-items: center;justify-content: center;height: 100%;margin:-10px;">
                                                            <div class="icon-upload" style="margin:auto">
                                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                                    viewBox="0 0 24 24" width="24" height="24"
                                                                    class="main-grid-item-icon" fill="none"
                                                                    stroke="currentColor" stroke-linecap="round"
                                                                    stroke-linejoin="round" stroke-width="2">
                                                                    <polyline points="8 17 12 21 16 17" />
                                                                    <line x1="12" x2="12" y1="12" y2="21" />
                                                                    <path
                                                                        d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29" />
                                                                </svg>
                                                            </div>
                                                            <label style="text-decoration:underline"
                                                                id="text-download">Tải file Excel mẫu</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </a>

                                        </div>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 count_floor">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="count_floor" name="count_floor"
                                            class="form-select form-control" required>
                                            <option value="1">Tầng trệt (không có tầng)</option>
                                            <option value="2">2 tầng (Gồm 1 trệt + 1 tầng)</option>
                                            <option value="3">3 tầng (Gồm 1 trệt + 2 tầng)</option>
                                            <option value="4">4 tầng (Gồm 1 trệt + 3 tầng)</option>
                                            <option value="5">5 tầng (Gồm 1 trệt + 4 tầng)</option>
                                            <option value="6">6 tầng (Gồm 1 trệt + 5 tầng)</option>
                                            <option value="7">7 tầng (Gồm 1 trệt + 6 tầng)</option>
                                            <option value="8">8 tầng (Gồm 1 trệt + 7 tầng)</option>
                                        </select>
                                        <label for="count_floor">Loại nhà trọ</label>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 total-room">
                                    <div class="form-floating">
                                        <input data-format="numeric" type="text" class="form-control" name="room_total"
                                            id="room_total" placeholder="Số phòng/giường" required>
                                        <label for="room_total">Số <span class="room_type_name">phòng</span></label>
                                        <div class="invalid-feedback">
                                            Vui lòng nhập tổng số <span class="room_type_name">phòng</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="title-item-small">
                                        <b>Địa chỉ:</b>
                                        <i class="des">Giúp cho khách thuê của bạn có thể tìm thấy nhà trọ của bạn dễ
                                            dàng hơn</i>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div id="block_address" class="address_component_container row g-2">
                                        <div class="col-6 mt-2">
                                            <div class="form-floating">
                                                <select data-format="numeric" name="address_component[province_id]"
                                                    class="form-select form-control province" required>
                                                    <option value="">Tỉnh/Thành phố</option>
                                                </select>
                                                <label for="province">Chọn Tỉnh/Thành phố</label>
                                                <div class="invalid-feedback">
                                                    Vui lòng chọn thành phố
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-6 mt-2">
                                            <div class="form-floating">
                                                <select data-format="numeric" name="address_component[district_id]"
                                                    class="form-select form-control district" required>
                                                    <option value="">Quận/Huyện</option>
                                                </select>
                                                <label for="district">Chọn Quận/Huyện</label>
                                                <div class="invalid-feedback">
                                                    Vui lòng chọn quận hoặc huyện
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 mt-2">
                                            <div class="form-floating">
                                                <select data-format="numeric" name="address_component[ward_id]"
                                                    class="form-select form-control ward" required>
                                                    <option value="">Phường/Xã</option>
                                                </select>
                                                <label for="ward">Chọn Phường/Xã</label>
                                                <div class="invalid-feedback">
                                                    Vui lòng chọn phường hoặc xã
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 mt-2">
                                            <div class="form-floating">
                                                <input type="text" class="form-control address_detail"
                                                    name="address_component[address_detail]"
                                                    placeholder="ví dụ: 122 - Đường Nguyễn Duy Trinh" required>
                                                <label for="address_detail">Địa chỉ chi tiết. Ví dụ: 122 - Đường Nguyễn
                                                    Duy Trinh</label>
                                                <div class="invalid-feedback">
                                                    Vui lòng nhập địa chỉ chi tiết
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <script type="text/javascript">
                                        $(document).ready(function () {
                                            let __el = {
                                                province: $("#block_address").find(".province"),
                                                district: $("#block_address").find(".district"),
                                                ward: $("#block_address").find(".ward"),

                                                address_detail: $("#block_address").find(".address_detail"),
                                                address_show_container: $("#block_address").find(".address-detail-show-container"),
                                                address_show: $("#block_address").find(".address-detail-show"),
                                            };

                                            function getAddressFull() {
                                                let arrayText = [
                                                    __el.address_detail.val(),
                                                    __el.ward.find('option:selected').text().trim(),
                                                    __el.district.find('option:selected').text().trim(),
                                                    __el.province.find('option:selected').text().trim()
                                                ];
                                                if (arrayText[0].lengh !== '' && arrayText[1].lengh !== '' && arrayText[2].lengh !== '' && arrayText[2].lengh !== '') {
                                                    __el.address_show_container.show();
                                                    __el.address_show.text(arrayText.join(', '));
                                                } else {
                                                    __el.address_show_container.hide();
                                                }
                                            }

                                            __el.address_detail.keyup((e) => {
                                                getAddressFull();
                                            });

                                            __el.province.change(function () {
                                                __el.district.empty();
                                                __el.ward.empty();

                                                $.transferData({
                                                    url: __helper.url.urlPattern(__routeApi.location.showProvince, {
                                                        id: parseInt($(this).val())
                                                    }),
                                                    method: 'GET',
                                                    success: function (res) {
                                                        __el.district.append(`<option value=''>Quận/Huyện</option>`);
                                                        $.each(res.data.districts, function (key, value) {
                                                            __el.district.append(`<option value='${value.id}'>${value.name}</option>`);
                                                        });
                                                        getAddressFull();
                                                    }
                                                });

                                            });

                                            __el.district.change(function () {
                                                __el.ward.empty();
                                                $.transferData({
                                                    url: __helper.url.urlPattern(__routeApi.location.showDistrict, {
                                                        id: parseInt($(this).val())
                                                    }),
                                                    method: 'GET',
                                                    success: function (res) {
                                                        __el.ward.append(`<option value=''>Phường/Xã</option>`);
                                                        $.each(res.data.wards, function (key, value) {
                                                            __el.ward.append(`<option value='${value.id}'>${value.name}</option>`);
                                                        });
                                                        getAddressFull();
                                                    }
                                                });
                                            });

                                            __el.ward.change(function () {
                                                getAddressFull();
                                            });
                                        });
                                    </script>

                                </div>

                                <div class="col-12 mt-2 text-center" style="display: none">
                                    <div style="border: 1px solid #ccc; border-radius: 5px; padding: 10px">
                                        <i data-feather="map-pin"></i>
                                        <input type="hidden" required value="10.7829132" class="form-control"
                                            name="address_component[position][latitude]"
                                            id="address_component[position][latitude]">
                                        <input type="hidden" required value="106.6961898" class="form-control"
                                            name="address_component[position][longitude]"
                                            id="address_component[position][longitude]">
                                        <div class="invalid-feedback">
                                            Vui lòng thêm vị trí nhà trọ
                                        </div>
                                        <b>Vị trí nhà trọ</b>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="title-item-small">
                                        <b>Thông tin cơ bản:</b>
                                        <i class="des not-edit">Thông tin diện tích, giá thuê, số lượng thành viên</i>
                                        <i class="des note" style="color:red; display: none"> <b>*Các thông tin dưới đây
                                                chỉ áp dụng cho lúc tạo nhà trọ tự động và khởi tạo đăng tin cho
                                                thuê</b></i>
                                    </div>
                                </div>

                                <div class="col-6 hide-when-not-room">
                                    <div class="form-floating">
                                        <input data-format="numeric" type="text" class="form-control" name="area"
                                            id="area" value="15" required placeholder="Nhập diện tích">
                                        <label for="area">Diện tích (m2)</label>
                                        <div class="invalid-feedback">
                                            Vui lòng nhập diện tích
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-floating">
                                        <input data-format="numeric" type="text" class="form-control" name="room_amount"
                                            id="room_amount" placeholder="Giá thuê" required>
                                        <label for="room_amount">Giá thuê trung bình (đ)</label>
                                        <div class="invalid-feedback">
                                            Vui lòng nhập giá thuê
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 hide-when-not-room">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="max_member" name="max_member"
                                            class="form-select form-control">
                                            <option value="1">1 người ở</option>
                                            <option value="2">2 người ở</option>
                                            <option value="3">3 người ở</option>
                                            <option value="4">4 người ở</option>
                                            <option value="5">5-6 người ở</option>
                                            <option value="6">7-10 người ở</option>
                                            <option value="0">Không giới hạn</option>
                                        </select>
                                        <label for="max_member">Tối đa người ở / <span
                                                class="room_type_name">phòng</span></label>
                                    </div>
                                </div>

                                <div class="col-12 hide-when-edit">
                                    <div class="title-item-small">
                                        <b>Cài đặt dịch vụ:</b>
                                        <i class="des">Thiết lập các dịch vụ khi khách thuê sử dụng khi thuê</i>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="setting[price_item_ele]"
                                            name="setting[price_item_ele]" class="form-select form-control">
                                            <option value="0">Miễn phí/Không sử dụng</option>
                                            <option value="1">Tính theo người</option>
                                            <option value="2">Tính theo tháng</option>
                                            <option value="3" selected>Tính theo đồng hồ (phổ biến)</option>
                                        </select>
                                        <label for="setting[price_item_ele]">Dịch vụ điện</label>
                                    </div>
                                </div>
                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="setting[price_item_water]"
                                            name="setting[price_item_water]" class="form-select form-control">
                                            <option value="0">Miễn phí/Không sử dụng</option>
                                            <option value="1">Tính theo người</option>
                                            <option value="2">Tính theo tháng</option>
                                            <option value="3" selected>Tính theo đồng hồ (phổ biến)</option>
                                        </select>
                                        <label for="setting[price_item_water]">Dịch vụ nước</label>
                                    </div>
                                </div>
                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="setting[price_item_trash]"
                                            name="setting[price_item_trash]" class="form-select form-control">
                                            <option value="0">Miễn phí/Không sử dụng</option>
                                            <option value="1">Tính theo người</option>
                                            <option value="2">Tính theo tháng</option>
                                        </select>
                                        <label for="setting[price_item_trash]">Dịch vụ rác</label>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="setting[price_item_wifi]"
                                            name="setting[price_item_wifi]" class="form-select form-control">
                                            <option value="0">Miễn phí/Không sử dụng</option>
                                            <option value="1">Tính theo người</option>
                                            <option value="2">Tính theo tháng</option>
                                        </select>
                                        <label for="setting[price_item_wifi]">Dịch vụ wifi/internet</label>
                                    </div>
                                </div>

                                <div class="col-12 hide-when-edit">
                                    <div class="title-item-small">
                                        <b>Cài đặt tính năng:</b>
                                        <i class="des">Thiết lập các tính năng cho nhà trọ</i>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" value="1"
                                            id="setting[asset_function]" name="setting[asset_function]" checked>
                                        <label class="form-check-label" for="setting[asset_function]">
                                            <b>Quản lý tài sản</b>
                                            <p>Quản lý tài sản khách thuê sử dụng</p>
                                        </label>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" value="1"
                                            id="setting[car_function]" name="setting[car_function]" checked>
                                        <label class="form-check-label" for="setting[car_function]">
                                            <b>Quản lý xe</b>
                                            <p>Các thông tin xe của khách thuê</p>
                                        </label>
                                    </div>
                                </div>

                                <div class="col-6 mt-2">
                                    <div class="form-check form-switch">
                                        <input data-format="numeric" class="form-check-input" type="checkbox" value="1"
                                            id="setting[agent_function]" name="setting[agent_function]" checked>
                                        <label class="form-check-label" for="setting[agent_function]">
                                            <b>Quản lý mô giới</b>
                                            <p>Các thông tin về mô giới</p>
                                        </label>
                                    </div>
                                </div>

                                <div class="col-6 mt-2">
                                    <div class="form-check form-switch">
                                        <input data-format="numeric" class="form-check-input" type="checkbox" value="1"
                                            id="setting[post_function]" name="setting[post_function]" checked>
                                        <label class="form-check-label" for="setting[post_function]">
                                            <b>Quản lý tin đăng</b>
                                            <p>Các thông tin về tin đăng</p>
                                        </label>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" value="1"
                                            id="setting[send_sms_when_create_bill]"
                                            name="setting[send_sms_when_create_bill]" checked>
                                        <label class="form-check-label" for="setting[send_sms_when_create_bill]">
                                            <b>Gửi tin nhắn tự động cho khách thuê</b>
                                            <p>Giửi tin nhắn SMS tự động cho khách thuê sau khi lập phiếu</p>
                                        </label>
                                    </div>

                                </div>

                                <div class="col-12">
                                    <div class="title-item-small">
                                        <b>Cài đặt cho phiếu thu (hóa đơn):</b>
                                        <i class="des">Thiết lập cho hóa đơn khi bạn lập hóa đơn tiền thuê cho khách
                                            thuê</i>
                                    </div>
                                </div>

                                <div class="col-6">
                                    <div class="form-floating">
                                        <input data-format="numeric" type="text" class="form-control" id="circle_order"
                                            name="circle_order" placeholder="Ngày lập hóa đơn" min="1" max="31"
                                            required>
                                        <label for="circle_order">Ngày lập hóa đơn và trong khoảng 1 đến 31</label>
                                        <div class="invalid-feedback">
                                            Vui lòng nhập ngày lập hóa đơn
                                        </div>
                                    </div>
                                    <div class="loz-alert info mt-2 mb-2">
                                        <div class="icon flex-0">
                                            <i data-feather="info" size="20"> </i>
                                        </div>
                                        <div class="des flex-1">
                                            <b>Thông tin:</b> Khi đến ngày lập hóa đơn hệ thống sẽ nhắc nhở qua
                                            thông báo
                                        </div>
                                    </div>
                                    <p>
                                        - Là ngày lập hóa đơn tiền điện, nước...<br>
                                        - Nhập một ngày trong tháng. Nếu không nhập mặc định là cuối tháng.
                                    </p>
                                </div>

                                <div class="col-6">
                                    <div class="form-floating">
                                        <input data-format="numeric" type="text" class="form-control" id="deadline_bill"
                                            name="deadline_bill" placeholder="Ngày lập hóa đơn" min="1" max="20"
                                            required>
                                        <label for="deadline_bill">Hạn đóng tiền</label>
                                        <div class="invalid-feedback">
                                            Vui lòng nhập hạn đóng tiền và trong khoảng 1 đến 20 ngày
                                        </div>
                                    </div>
                                    <div class="loz-alert info mt-2 mb-2">
                                        <div class="icon flex-0">
                                            <i data-feather="info" size="20"> </i>
                                        </div>
                                        <div class="des flex-1">
                                            <b>Thông tin:</b> Khi khách đóng tiền không đúng thời hạn hệ thống sẽ nhắc
                                            nhở
                                        </div>
                                    </div>
                                    <p>
                                        <b>Ví dụ:</b> Bạn lập phiếu ngày 01 và hạn đóng tiền thuê trọ ở đây là 5 ngày
                                        thì ngày 05
                                        sẽ là ngày hết hạn
                                    </p>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer modal-footer--sticky">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                        <button type="button" id="submit-block" class="btn btn-primary">
                            <i data-feather="plus"> </i>
                            Thêm nhà trọ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            $(document).ready(function () {
                var __el = {
                    form: $('#add-block-form'),
                    modal: $("#addBlock"),
                    submit: $('#submit-block'),
                    province: $("#province"),
                    district: $("#district"),
                    ward: $("#ward"),

                };

                let dataBlock = null;

                const excelFile = (file) => {
                    try {
                        var reader = new FileReader();
                        reader.readAsBinaryString(file);
                        reader.onload = function (e) {

                            var data = e.target.result;

                            var workbook = XLSX.read(data, {
                                type: 'binary',
                                UTC: false
                            });

                            if (workbook.SheetNames && workbook.SheetNames.length !== 0) {
                                const jsonData = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]], { header: 1 });
                                if (jsonData.length !== 0) {
                                    let header = jsonData[0];
                                    let data = [];
                                    jsonData.forEach((row, rowIndex) => {
                                        if (row.length !== 0 && rowIndex !== 0) {
                                            data[rowIndex] = []
                                            row.forEach((value, colIndex) => {
                                                let header = jsonData[0][colIndex];
                                                data[rowIndex].push({
                                                    colIndex: colIndex,
                                                    name: header,
                                                    value: value
                                                });
                                            })
                                        }

                                    })

                                    $.transferData({
                                        method: "POST",
                                        url: __helper.url.urlPattern(__routeApi.checkDataFromFile),
                                        data: {
                                            data_excel: data
                                        },
                                        success: (res) => {
                                            __el.form.find('#count_floor').val(res.data.count_floor).change();
                                            Swal.fire({
                                                title: 'Thành công!',
                                                text: res.message,
                                                icon: 'success',
                                                confirmButtonColor: '#3c9e47',
                                                confirmButtonText: 'Đóng'
                                            });
                                        },
                                        fail: (res) => {
                                            Swal.fire({
                                                title: 'Dữ liệu không chính xác',
                                                html: res.message,
                                                icon: 'error',
                                                confirmButtonText: 'Đã hiểu'
                                            });

                                            $('#file-excel').val('');
                                            $('#text-import').text('Chưa có tệp nào được chọn');
                                        }
                                    });
                                }
                            }
                        }
                    } catch (e) {
                        console.error(e);
                    }
                }

                const changeRoomType = (room_type) => {
                    if (room_type === 'room') {
                        __el.form.find('input[name="room_total"]').attr('placeholder', 'Nhập số phòng');
                        __el.form.find('.room_type_name').text('phòng');
                        __el.form.find('.hide-when-not-room').show();

                    } else {
                        __el.form.find('input[name="room_total"]').attr('placeholder', 'Nhập số giường');
                        __el.form.find('.room_type_name').text('giường');
                        __el.form.find('.hide-when-not-room').hide();
                    }
                };

                __el.form.find("#import-excel-trigger").on("click", function () {
                    __el.form.find("#file-excel").click();
                });

                __el.modal.find("#province").change(function () {
                    __el.modal.find("#district").empty();
                    __el.modal.find("#ward").empty();

                    $.transferData({
                        url: __helper.url.urlPattern(__routeApi.location.showProvince, {
                            id: parseInt($(this).val())
                        }),
                        method: 'GET',
                        loadingEle: false,
                        success: function (res) {
                            __el.modal.find("#district").append(`<option value=''>Chọn Quận/Huyện</option>`);
                            $.each(res.data.districts, function (key, value) {
                                __el.modal.find("#district").append(`<option value='${value.id}'>${value.name}</option>`);
                            });
                        }
                    });

                });

                __el.modal.find("#district").change(function () {
                    __el.modal.find("#ward").empty();
                    $.transferData({
                        url: __helper.url.urlPattern(__routeApi.location.showDistrict, {
                            id: parseInt($(this).val())
                        }),
                        method: 'GET',
                        loadingEle: false,
                        success: function (res) {
                            __el.modal.find("#ward").append(`<option value=''>Chọn Phường/Xã</option>`);
                            $.each(res.data.wards, function (key, value) {
                                __el.modal.find("#ward").append(`<option value='${value.id}'>${value.name}</option>`);
                            });
                        }
                    });
                });


                __el.form.on("change", "#file-excel", function (e) {
                    var file = e.target.files[0];
                    if (file) {
                        __el.form.find("#text-import").text(file.name)
                        excelFile(file);
                    } else {
                        alert("Vui lòng chọn file excel để tiếp tục!");
                    }
                });

                __el.form.on('change', 'input[name="room_type"]', function (e) {
                    changeRoomType($(this).val())
                });

                __el.form.on('change', 'select[name="category"]', function (e) {
                    if ($(this).val() == 1)
                        __el.form.find('#room_type_bed').prop('checked', true).change();
                    else
                        __el.form.find('#room_type_room').prop('checked', true).change();

                });

                __el.form.on('change', 'input[name="auto_create_room"]', function (e) {
                    if (__el.form.find("#disable").is(':checked')) {
                        __el.form.find("#file-excel").removeAttr('required');
                        __el.form.find("#room_total").removeAttr('required');

                        __el.form.find("#room_total").attr("disabled", true);
                        __el.form.find("#room_total").val(0);

                        __el.form.find('.total-room').removeClass("d-none");
                        __el.form.find('.count_floor').removeClass("d-none");
                        __el.form.find('.import-from-excel-layout').addClass("d-none");
                        __el.form.find(".info-auto-create-room-enable").addClass("d-none");
                        __el.form.find(".info-auto-create-room-disable").removeClass("d-none");
                        __el.form.find('.total-room').addClass("d-none");
                        __el.form.find('.count_floor').addClass("d-none");

                        __el.form.find('#file-excel').val('');
                        __el.form.find('#text-import').text('File Excel cần nhập dữ liệu');

                    } else if (__el.form.find("#enable").is(':checked')) {
                        __el.form.find("#room_total").attr('required', 'required');
                        __el.form.find("#file-excel").removeAttr('required');

                        __el.form.find("#room_total").removeAttr("disabled");
                        __el.form.find("#room_total").val('');

                        __el.form.find('.total-room').removeClass("d-none");
                        __el.form.find('.count_floor').removeClass("d-none");
                        __el.form.find(".info-auto-create-room-enable").removeClass("d-none");
                        __el.form.find(".info-auto-create-room-disable").addClass("d-none");

                        __el.form.find('.import-from-excel-layout').addClass("d-none");

                        __el.form.find('#file-excel').val('');
                        __el.form.find('#text-import').text('File Excel cần nhập dữ liệu');

                    } else if (__el.form.find("#excel").is(':checked')) {
                        __el.form.find('.total-room').addClass("d-none");
                        __el.form.find('.count_floor').addClass("d-none");
                        __el.form.find(".info-auto-create-room-enable").addClass("d-none");
                        __el.form.find('.import-from-excel-layout').removeClass("d-none");
                        __el.form.find(".info-auto-create-room-disable").addClass("d-none");
                        __el.form.find("#room_total").removeAttr('required');

                        __el.form.find("#file-excel").attr('required', 'required');
                    }
                });

                __el.form.on('change', '#room_total', function (e) {
                    if (parseInt($(this).val()) === 0) {
                        __el.form.find('#auto_create_room').prop('checked', false);
                        __el.form.find("#auto_create_room").attr("disabled", true);
                    } else {
                        __el.form.find('#auto_create_room').prop('checked', true);
                        __el.form.find("#auto_create_room").removeAttr("disabled");
                    }
                });


                new __modalForm(
                    __el.modal.get(0),
                    __el.form.get(0),
                    __el.submit.get(0)
                ).start(null, {
                    __openModalForm: function () {
                        __el.form.get(0).reset();
                        dataBlock = __el.modal.data('block');
                        __el.modal.find('.title-disable').remove();
                        __el.modal.find('input[name="count_floor"]').remove();
                        __el.modal.find("#province").empty();
                        __el.modal.find("#district").empty();
                        __el.modal.find("#ward").empty();
                        if (dataBlock) {
                            __el.modal.find('.count_floor').before(`
                    <div class="col-12 title-disable">
                        <div class="title-item-small">
                            <b>Thông tin không thể chỉnh sửa:</b>
                            <i class="des">Các thông tin dưới đây không thể được chỉnh sửa</i>
                        </div>
                    </div>`);
                            __el.modal.find('.not-edit').hide();
                            __el.modal.find('.note').show();
                            __el.modal.find('#count_floor').attr("disabled", true);
                            __el.modal.find('#count_floor').after(`<input type="hidden" data-format="numeric" class="form-control" name="count_floor" placeholder="Số phòng/giường" value="${dataBlock.count_floor}">`);
                            __el.modal.find('#room_total').attr("readonly", true);
                            __el.modal.find('.hide-when-edit').addClass("d-none");

                            $.transferData({
                                method: "POST",
                                url: __helper.url.urlPattern(__routeApi.location.init),
                                data: {
                                    'province_id': dataBlock.province_id,
                                    'district_id': dataBlock.district_id,
                                    'ward_id': dataBlock.ward_id,
                                },
                                loadingEle: false,
                                success: (res) => {
                                    $.each(res.data.provinces, function (key, province) {
                                        __el.modal.find(".province").append(`<option value='${province.id}'>${province.short_name}</option>`);
                                        if (parseInt(province.id) === parseInt(dataBlock.province_id))
                                            $(`.province option[value=${province.id}]`).prop('selected', true);
                                    });

                                    $.each(res.data.districts, function (key, district) {
                                        __el.modal.find(".district").append(`<option value='${district.id}'>${district.name}</option>`);
                                        if (parseInt(district.id) === parseInt(dataBlock.district_id))
                                            $(`.district option[value=${district.id}]`).prop('selected', true);
                                    });

                                    $.each(res.data.wards, function (key, ward) {
                                        __el.modal.find(".ward").append(`<option value='${ward.id}'>${ward.name}</option>`);
                                        if (parseInt(ward.id) === parseInt(dataBlock.ward_id))
                                            $(`.ward option[value=${ward.id}]`).prop('selected', true);
                                    });
                                },
                            });

                            __el.modal.find('.modal-title').text(`Chỉnh sửa ${dataBlock.category_name} ${dataBlock.name}`);
                            __el.modal.find('.modal-footer .btn-primary').text(`Chỉnh sửa ${dataBlock.category_name}`);
                            __el.form.setObjectToForm(dataBlock);
                            changeRoomType(dataBlock.room_type);
                        } else {
                            __el.modal.find('.not-edit').show();
                            __el.modal.find('.note').hide();
                            __el.modal.find('input[name="count_floor"]').remove();
                            __el.modal.find('.title-disable').remove();
                            __el.modal.find('#count_floor').attr("disabled", false);
                            __el.modal.find('#room_total').attr("readonly", false);
                            __el.form.find('input[name="room_type"]').val(['room']);
                            __el.modal.find('.hide-when-edit').removeClass("d-none");
                            changeRoomType('room');

                            __el.modal.find(".district").empty();
                            __el.modal.find(".ward").empty();
                            if (!__el.modal.find(".province option[value='79']").length) {
                                $.transferData({
                                    method: "GET",
                                    url: __helper.url.urlPattern(__routeApi.location.provinces),
                                    loadingEle: false,
                                    success: (res) => {
                                        __el.modal.find(".province").empty();
                                        __el.modal.find(".province").append(`<option value=''>Chọn Tỉnh/Thành phố</option>`);
                                        $.each(res.data, function (key, value) {
                                            __el.modal.find(".province").append(`<option value='${value.id}'>${value.short_name}</option>`);
                                        });
                                    },
                                });
                            }
                        }
                    },
                    __closeModalForm: function () {
                        __el.form.get(0).reset();
                        __el.form.get(0).classList.remove('was-validated');

                        __el.modal.data('block', null);

                        __el.modal.find('.modal-title').text("Thêm nhà trọ");
                        __el.modal.find('.modal-footer .btn-primary').text("Thêm nhà trọ");
                        __el.modal.find('input[name="auto_create_room"][value="1"]').prop('checked', true).change();
                    },
                    __submitModalForm: function (e) {
                        let data = __el.form.getObjectOfForm();
                        if (!__el.form.get(0).checkValidity()) {
                            __el.form.get(0).classList.add('was-validated');
                            Swal.fire({
                                title: 'Thông báo!',
                                text: "Vui lòng nhập đầy đủ thông tin trước khi thực hiện",
                                icon: 'error',
                                confirmButtonText: 'Đã hiểu'
                            });
                            return false;
                        }

                        if (parseInt(__el.form.find('input[name="auto_create_room"]:checked').val()) === 2) { }
                        data.file = $("#file-excel")[0].files[0]

                        data.address_component['address'] = ([
                            __el.modal.find(".address_detail").val(),
                            __el.modal.find(".ward option:selected").val() ? __el.modal.find(".ward option:selected").text() : '',
                            __el.modal.find(".district option:selected").val() ? __el.modal.find(".district option:selected").text() : '',
                            __el.modal.find(".province option:selected").val() ? __el.modal.find(".province option:selected").text() : '',
                        ]).join(', ');

                        let url = !dataBlock ? __helper.url.urlPattern(__routeApi.block.create) : __helper.url.urlPattern(__routeApi.block.update, {
                            block_id: parseInt(dataBlock.id)
                        });

                        $.transferForm({
                            method: "POST",
                            url,
                            data,
                            success: function (res) {
                                Swal.fire({
                                    title: 'Thành công!',
                                    text: res.message,
                                    icon: 'success',
                                    confirmButtonColor: '#3c9e47',
                                    confirmButtonText: 'Đóng'
                                }).then((result) => {
                                    window.location.href = index.html;
                                });
                            },
                            fail: (res) => {
                                Swal.fire({
                                    title: 'Thông báo!',
                                    text: res.message,
                                    icon: 'error',
                                    confirmButtonText: 'Đã hiểu'
                                });
                            }
                        });
                    },
                });
            });
        </script>
    </div>
    <!-- <div class="text-center mt-5"><span style="color: #727272; font-style: italic;">Copyright @ <strong
                style="color: #000">LOZIDO - Quản lý nhà cho thuê</strong> 2020</span></div>
    <div class="text-center">
        <p style="color: #727272; font-style: italic;">Version <strong style="color: #000">1.3.8</strong></p>
    </div> -->
    <div class="zalo-container fix item-contact">
        <a id="zalo-btn" href="https://zalo.me/0965227453" target="_blank" rel="noopener">
            <div class="animated_zalo infinite zoomIn_zalo cmoz-alo-circle"></div>
            <div class="animated_zalo infinite pulse_zalo cmoz-alo-circle-fill"></div>
            <span>
                <img width="100%" src="https://quanlytro.me/images/icons/zalo-icon-white.webp"
                    alt="Liên hệ với LOZIDO - Quản lý nhà cho thuê qua Zalo">
            </span>
        </a>
    </div>

    <script>
        feather.replace();

        $(document).ready(function () {
            $(document).find('input[data-format="numeric"][type="text"]').map((key, element) => {
                element.addEventListener('keyup', e => {
                    let value = $(element).val();
                    let number = __helper.convertStringToNumber(value);
                    let newVal = __format.currencyInput(number);

                    $(element).val(value === '' ? '' : isNaN(number) ? '' : newVal);
                });
            });

            $(document).find('input[data-format="stringNumber"]').map((key, element) => {
                element.addEventListener('keyup', e => {
                    $(element).val(__format.phone($(element).val()));
                });
            });

            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl)
            });

            setTimeout(() => {
                $.transferData({
                    url: __helper.url.urlPattern(__routeApi.notification.all, {
                        page: 1
                    }),
                    loadingEle: false,
                    success: (res) => {
                        $('.count-notification').text(res?.data?.unread_count ?? 0);
                        res?.data?.notifications?.length > 0 &&
                            $(".notication-dropdown").html('') &&
                            res.data.notifications.map((notification) => {
                                $(".notication-dropdown").append($(`
                                <li style="cursor: pointer" class="item-notication d-flex align-items-center">
                                        <div class="icon ${!notification?.read_at ? 'not-read' : ''}">
                                            <i data-feather="bell" size="20"></i>
                                        </div>
                                        <div class="content">
                                            <div class="des">
                                                <b>
                                                    ${notification?.data?.title ?? ''}
                                                </b>
                                                <p>${notification?.data?.body ?? ''}</p>
                                            </div>
                                            <div class="time">${notification?.created_at ?? ''}</div>
                                        </div>
                                </li>
                            `).click((e) => {
                                    Swal.fire({
                                        title: 'Thông báo!',
                                        text: "Tính năng đi đến thông báo đang phát triển. Hệ thống sẽ hoàn thành sớm!",
                                        icon: 'warning',
                                        confirmButtonText: 'Đã hiểu'
                                    });
                                }));
                            });
                        feather.replace();
                    },
                    fail: (res) => {

                    }
                });
            }, 5000);

        });
    </script>
</body>

</html>