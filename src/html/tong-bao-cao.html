<!DOCTYPE html>
<html lang="vi" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">

<head>
    <meta charset="utf-8">
    <meta name="geo.region" content="vi">
    <meta name="language" content="vi">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>LOZIDO - Tổng hợp báo cáo</title>
    <meta name="keywords"
        content="Phần mềm nhà trọ, phần mềm phòng trọ, phần mềm quản lý nhà trọ, phần mềm quản lý nhà trọ, quản lý nhà trọ, quản lý trọ, quản lý phòng trọ">
    <meta name="description"
        content="Phần mềm quản lý nhà  trọ trên điện thoại, máy tính, máy tính bảng, iPad hỗ trợ chủ nhà quản lý nhà trọ, phòng trọ, ký túc xá dễ dàng và tiện lợi mọi lúc mọi nơi, tiết kiệm thời gian và công sức">

    <meta name="robots" content="noindex, nofollow" />
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="csrf-token" content="9bs2SmME9AQZBHs8I7jQCUEim92A5FOWdHcrUSvh">

    <meta name="author" content="LOZIDO - Quản lý nhà cho thuê">
    <meta name="copyright" content="LOZIDO - Quản lý nhà cho thuê - Platform Quan ly nha tro, phong tro">
    <meta name="abstract" content="Phần mềm quản lý nhà trọ, phòng trọ, ký túc xá, chung cư tốt nhất hiện nay">

    <meta property="og:image" content="https://quanlytro.me/householder-admin/images/lozido_facebook-recovered.jpg">
    <meta property="og:image:secure_url"
        content="https://quanlytro.me/householder-admin/images/lozido_facebook-recovered.jpg">
    <meta property="og:image:width" content="800">
    <meta property="og:image:height" content="370">
    <meta property="og:image:type" content="image/webp">

    <link rel="shortcut icon" href="https://quanlytro.me/images/favicon.ico" type="image/x-icon">
    <link rel="alternate" href="https://quanlytro.me/bao-cao" hreflang="vi-vn" />

    <script type="text/javascript">
        var recaptcha_site_key = '6Ld0LAYeAAAAABA67PAls5DpnkfNJ-rkgHbsSilR';
        var __environment = 'production';
    </script>

    <script src="jquery.min.js"></script>
    <script src="jquery-ui-1.8.13.min.js"></script>
    <script src="../js/feather.min.js"></script>
    <script src="sweetalert2@11"></script>
    <script src="popper.min.js"></script>
    <script src="bootstrap.min.js"></script>

    <script type="text/javascript" src="helper.js?"></script>
    <script type="text/javascript" src="format.js"></script>
    <script type="text/javascript" src="route-api.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript" src="transporter.js"></script>
    <script type="text/javascript" src="upload-image.js"></script>
    <style>
        .modal.show .btn-close {
            outline: 0;
            box-shadow: 0 0 0 .25rem rgb(255 87 34 / 9%);
            opacity: 1;
            border-radius: 100%;
            padding: 10px;
        }

        .btn {
            font-size: 14px !important;
            font-weight: 600 !important;
        }
    </style>
    <script type="text/javascript">
        $.ajaxSetup({
            headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
        });

        var __current_block = JSON.parse(JSON.stringify({ "id": 6920, "name": "MONIEQEWQ", "name_full": "Nh\u00e0 tr\u1ecd MONIEQEWQ", "user_id": 8168, "category": 0, "category_name": "Nh\u00e0 tr\u1ecd", "category_name_short": "Nh\u00e0 tr\u1ecd", "room_type": "room", "room_type_name": "ph\u00f2ng", "type": "floor", "room_total": 20, "count_floor": 1, "area": 15, "room_amount": 1000, "ele_amount": 0, "water_amount": 0, "price_items_cache": [{ "id": 22810, "name": "Ti\u1ec1n \u0111i\u1ec7n", "type": "constant", "unit": "kwh", "price": 1700, "rooms": { "payload": [{ "id": 100355, "name": "Ph\u00f2ng 1", "sort": null, "value": 100355, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100356, "name": "Ph\u00f2ng 2", "sort": null, "value": 100356, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100357, "name": "Ph\u00f2ng 3", "sort": null, "value": 100357, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100358, "name": "Ph\u00f2ng 4", "sort": null, "value": 100358, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100359, "name": "Ph\u00f2ng 5", "sort": null, "value": 100359, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100360, "name": "Ph\u00f2ng 6", "sort": null, "value": 100360, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100361, "name": "Ph\u00f2ng 7", "sort": null, "value": 100361, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100362, "name": "Ph\u00f2ng 8", "sort": null, "value": 100362, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100363, "name": "Ph\u00f2ng 9", "sort": null, "value": 100363, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100364, "name": "Ph\u00f2ng 10", "sort": null, "value": 100364, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100365, "name": "Ph\u00f2ng 11", "sort": null, "value": 100365, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100366, "name": "Ph\u00f2ng 12", "sort": null, "value": 100366, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100367, "name": "Ph\u00f2ng 13", "sort": null, "value": 100367, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100368, "name": "Ph\u00f2ng 14", "sort": null, "value": 100368, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100369, "name": "Ph\u00f2ng 15", "sort": null, "value": 100369, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100370, "name": "Ph\u00f2ng 16", "sort": null, "value": 100370, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100371, "name": "Ph\u00f2ng 17", "sort": null, "value": 100371, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100372, "name": "Ph\u00f2ng 18", "sort": null, "value": 100372, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100373, "name": "Ph\u00f2ng 19", "sort": null, "value": 100373, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100374, "name": "Ph\u00f2ng 20", "sort": null, "value": 100374, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }] }, "value": null, "frames": [], "status": "is_active", "history": null, "user_id": 8168, "block_id": 6920, "category": "ele", "type_text": "Theo gi\u00e1 tr\u1ecb c\u1ed1 \u0111\u1ecbnh", "unit_text": "KWh", "is_default": 1, "status_text": "\u0110ang s\u1eed d\u1ee5ng", "subtraction": 1 }, { "id": 22811, "name": "Ti\u1ec1n n\u01b0\u1edbc", "type": "constant", "unit": "khoi", "price": 18000, "rooms": { "payload": [{ "id": 100355, "name": "Ph\u00f2ng 1", "sort": null, "value": 100355, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100356, "name": "Ph\u00f2ng 2", "sort": null, "value": 100356, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100357, "name": "Ph\u00f2ng 3", "sort": null, "value": 100357, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100358, "name": "Ph\u00f2ng 4", "sort": null, "value": 100358, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100359, "name": "Ph\u00f2ng 5", "sort": null, "value": 100359, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100360, "name": "Ph\u00f2ng 6", "sort": null, "value": 100360, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100361, "name": "Ph\u00f2ng 7", "sort": null, "value": 100361, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100362, "name": "Ph\u00f2ng 8", "sort": null, "value": 100362, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100363, "name": "Ph\u00f2ng 9", "sort": null, "value": 100363, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100364, "name": "Ph\u00f2ng 10", "sort": null, "value": 100364, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100365, "name": "Ph\u00f2ng 11", "sort": null, "value": 100365, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100366, "name": "Ph\u00f2ng 12", "sort": null, "value": 100366, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100367, "name": "Ph\u00f2ng 13", "sort": null, "value": 100367, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100368, "name": "Ph\u00f2ng 14", "sort": null, "value": 100368, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100369, "name": "Ph\u00f2ng 15", "sort": null, "value": 100369, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100370, "name": "Ph\u00f2ng 16", "sort": null, "value": 100370, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100371, "name": "Ph\u00f2ng 17", "sort": null, "value": 100371, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100372, "name": "Ph\u00f2ng 18", "sort": null, "value": 100372, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100373, "name": "Ph\u00f2ng 19", "sort": null, "value": 100373, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }, { "id": 100374, "name": "Ph\u00f2ng 20", "sort": null, "value": 100374, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }] }, "value": null, "frames": [], "status": "is_active", "history": null, "user_id": 8168, "block_id": 6920, "category": "water", "type_text": "Theo gi\u00e1 tr\u1ecb c\u1ed1 \u0111\u1ecbnh", "unit_text": "Kh\u1ed1i", "is_default": 1, "status_text": "\u0110ang s\u1eed d\u1ee5ng", "subtraction": 1 }, { "id": 22834, "name": "Ti\u1ec1n \u0111i\u1ec7n", "type": "constant", "unit": "kwh", "price": 1700, "rooms": { "payload": [{ "id": 100355, "name": "Ph\u00f2ng 1", "sort": null, "value": 100355, "status": "is_empty", "group_id": null, "priority": null, "room_amount": null, "status_text": "\u0110ang tr\u1ed1ng", "circle_month": null, "active_status": "pending_create_bill", "priority_text": "Kh\u00f4ng x\u00e1c \u0111\u1ecbnh", "customer_count": null, "active_status_text": "Ch\u1edd k\u1ef3 thu t\u1edbi" }] }, "value": null, "frames": [], "status": "is_active", "history": null, "user_id": 8168, "block_id": 6920, "category": "other", "type_text": "Theo gi\u00e1 tr\u1ecb c\u1ed1 \u0111\u1ecbnh", "unit_text": "KWh", "is_default": 0, "status_text": "\u0110ang s\u1eed d\u1ee5ng", "subtraction": 0 }], "circle_order": 30, "deadline_bill": 30, "bill_setting": { "note": { "content": null }, "enable_qr": 1, "payment_default": "cash", "show_circle_day": 0, "single_send_zalo": 0, "template_bill_zalo": 1, "enable_rounding_money": 1, "extract_receipt_expense": 0 }, "app_renter_setting": { "allow_update_car": 1, "default_password": 123456789, "allow_close_clock": 0, "auto_create_account": 0, "allow_ticket_contract": 1, "allow_update_customer": 1 }, "room_group": [{ "id": 1, "name": "T\u1ea7ng tr\u1ec7t", "index": 0, "label": "T\u1ea7ng tr\u1ec7t", "value": 1 }], "max_member": 1, "open_door": null, "close_door": null, "rule": null, "extension": null, "data_log": { "id": 6920, "menu_label": { "pay_bill": 0, "room_list": "0\/20", "new_session": 20, "deposit_request": "0\/20", "terminate_contract": "0\/0" }, "block_report": { "id": 6911, "data": null, "block_id": 6920, "call_count": 0, "debt_count": 0, "post_count": 0, "view_count": 0, "empty_count": 20, "active_count": 0, "can_sale_count": 20, "debt_amount_total": 0, "deposit_temp_count": 0, "deposit_amount_total": 0, "male_dormitory_count": 0, "tick_terminate_count": 0, "will_terminate_count": 0, "deposit_contract_count": 0, "female_dormitory_count": 0, "renter_connected_count": 0, "deposit_temp_amount_total": 0, "debt_customer_amount_total": 0, "deposit_contract_amount_total": 0 } }, "setting": { "car_function": 1, "post_function": 1, "agent_function": 1, "asset_function": 1, "price_item_ele": 3, "price_item_wifi": 0, "price_item_trash": 0, "price_item_water": 3, "task_job_function": 1, "send_sms_when_create_bill": 1, "contract_document_function": 0 }, "province_id": 70, "district_id": 693, "ward_id": 25315, "address_component": { "address": "12313123 - \u0110\u01b0\u1eddng Phan \u0110\u00ecnh, Thanh H\u00f2a, B\u00f9 \u0110\u1ed1p, B\u00ecnh Ph\u01b0\u1edbc", "ward_id": "25315", "position": { "latitude": "10.7829132", "longitude": "106.6961898" }, "district_id": "693", "province_id": "70", "address_detail": "12313123 - \u0110\u01b0\u1eddng Phan \u0110\u00ecnh" }, "address": "12313123 - \u0110\u01b0\u1eddng Phan \u0110\u00ecnh, Thanh H\u00f2a, B\u00f9 \u0110\u1ed1p, B\u00ecnh Ph\u01b0\u1edbc", "latitude": 10.7829132, "longitude": 106.6961898, "auto_create_room": 1, "post_ids": [] }));

        var __permission_block = JSON.parse(JSON.stringify(null));

        let user = JSON.parse(JSON.stringify({ "staff": false, "free": false, "trial": true, "fee": false }));

    </script>
    <link href="../css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="../css/common.css" rel="stylesheet">
    <link href="../css/block.css?" rel="stylesheet">
</head>

<body>
    <div id="app_loading" class="text-center" style="padding:40vh 10px">
        <div class="inner-loading">
            <img style="margin: auto" src="https://quanlytro.me/images/icons/loading.gif" alt="Đang tải..."
                width="50px" />
            <i class="loading_text" style="font-size: 13px; margin-top: -10px;">Đang tải dữ liệu...</i>
        </div>
    </div>
    <header>
        <div class="header-inner">
            <!-- <div class="notification text-center" style="padding: 10px; background-color: #ffe8c8;">
                LOZIDO đã có thêm tính năng <strong>gửi hóa đơn tự động cho khách qua ZALO và APP dành riêng khách
                    thuê</strong>. Liên hệ chuyên viên để thêm thông tin qua: <b style="color: #0085ef">HOTLINE:
                    0965.227.453</b> hoặc chat <a href="https://zalo.me/0965227453" target="_bank"
                    style="color: #0085ef"><b>ZALO</b></a>
            </div> -->
            <div class="header-sticky">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <div class="container-fluid">
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                            data-bs-target="#lozido-main-menu" aria-controls="lozido-main-menu" aria-expanded="false"
                            aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"> </span>
                        </button>
                        <nav class="collapse navbar-collapse lozido-main-menu">
                            <ul class="navbar-nav main-menu-left  me-auto mb-2 mb-lg-0">
                                <!-- <li class="nav-item menu-item active">
                                    <a href="/" class="nav-link ">
                                        <i data-feather="arrow-left"></i>
                                        <img width="180px"
                                            src="https://quanlytro.me/images/logo-lozido-quan-ly-tro-white.png" />
                                    </a>
                                </li> -->
                            </ul>

                            <ul class="topbar-items main-menu-right navbar-nav">
                                <li class="nav-item menu-item">
                                    <a href=index.html class="nav-link ">
                                        <i data-feather="home"></i>
                                        <span style="margin-top: 5px" class="text">Quản lý nhà</span>
                                    </a>
                                </li>
                                <li class="nav-item menu-item active ">
                                    <a href="./tong-bao-cao.html" class="nav-link ">
                                        <i data-feather="pie-chart"></i>
                                        <span style="margin-top: 5px" class="text">Tổng báo cáo</span>
                                    </a>
                                    <!--Đăng tin-->
                                    <!-- </li>
                                                                                                                                                                    <li class="nav-item menu-item ">
                                            <a href="/dang-tin" class="nav-link ">
                                                <i data-feather="plus"></i>
                                                <span style="margin-top: 5px" class="text">Đăng tin</span>
                                            </a>
                                        </li> -->
                                    <!--Môi giới-->
                                    <!-- <li class="nav-item menu-item ">
                                            <a href="/mo-gioi" class="nav-link ">
                                                <i data-feather="users"></i>
                                                <span style="margin-top: 5px" class="text">Môi giới</span>
                                            </a>
                                        </li> -->
    
                                    <!-- <li class="nav-item menu-item ">
                                            <a href="/phan-quyen" class="nav-link ">
                                                <i data-feather="box"></i>
                                                <span style="margin-top: 5px" class="text">Công ty/nhóm</span>
                                            </a>
                                        </li> -->
                                <li class="nav-item menu-item ">
                                    <a href="./cai-dat-chung.html" class="nav-link ">
                                        <i data-feather="settings"></i>
                                        <span style="margin-top: 5px" class="text">Cài đặt chung</span>
                                    </a>
                                </li>
    
                                <li class="nav-item btn-group menu-item ">
                                    <a href="javascript:;" class="nav-link" data-bs-toggle="dropdown" aria-expanded="false">
                                        <span class="count-notification badge">0</span>
                                        <i data-feather="bell"></i>
                                        <span style="margin-top: 5px" class="text">Thông báo</span>
                                    </a>
                                    <ul class="dropdown-menu notication-dropdown dropdown-menu-lg-end">
                                        <div class="text-center" style="padding: 20px">
                                            <img style="margin: auto" src="loading.jpg" alt="Đang tải..." width="50px" />
                                            <div>
                                                <i class="loading_text" style="font-size: 13px; margin-top: -10px;">Đang tải
                                                    thông báo...</i>
                                            </div>
                                        </div>
                                    </ul>
                                </li>
    
                                <li class="nav-item menu-item ">
                                    <a href="./tai-khoan.html" class="nav-link ">
                                        <i data-feather="user"></i>
                                        <span style="margin-top: 5px" class="text">Tài khoản</span>
                                    </a>
                                </li>
                                <li class="nav-item menu-item ">
                                    <a href="/dang-xuat" class="nav-link ">
                                        <i data-feather="log-out"></i>
                                        <span style="margin-top: 5px" class="text">Đăng xuất</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </nav>
            </div>
        </div>
    </header>
    <div>
        <div>
            <style type="text/css">
                .scrollable-content {
                    overflow-x: auto;
                    white-space: nowrap;
                    flex: 1;
                    position: relative;
                    scroll-behavior: smooth;
                    /* Thêm hiệu ứng cuộn mượt */
                }

                .scrollable-content-container button {
                    color: #fff;
                    border: none;
                    cursor: pointer;
                    transition: opacity 0.3s ease;
                    position: absolute;
                    top: 50%;
                    height: 96%;
                    width: 50px;
                    transform: translateY(-50%);
                    z-index: 1;
                }

                .scrollable-content-container button::before {
                    content: "";
                    position: absolute;
                    top: 50%;
                    left: 10px;
                    transform: translateY(-50%);
                    width: 30px;
                    height: 30px;
                    border-radius: 100%;
                    background: #000;
                    z-index: -1;
                }

                .scrollable-content-container button:hover::before {
                    background-color: #2f8932;
                }

                .scrollable-content-container button.hidden {
                    opacity: 0;
                    pointer-events: none;
                    /* Ngăn chặn sự kiện chuột khi ẩn */
                }

                .scrollable-content-container .scroll-left {
                    left: 0px;
                    flex: 0 0 auto;
                    background: linear-gradient(to right, rgb(255 255 255), rgb(255 255 255 / 0%));
                }

                .scrollable-content-container .scroll-right {
                    right: 0px;
                    flex: 0 0 auto;
                    background: linear-gradient(to left, rgb(255 255 255), rgb(255 255 255 / 0%));
                }
            </style>

            <!-- <div style="min-height: 125px;display: flex;padding: 0px 10px 0px 0px;">
                <div class="col-md-2 d-flex align-items-center justify-content-center" style="margin-right: 10px;">
                    <div class="current-block d-flex align-items-center" style="position: relative"
                        data-bs-toggle="modal" data-bs-target="#manageBlock">
                        <div class="d-flex align-items-center" style="flex-direction: row; flex:1">
                            <div class="icon-blocks">
                                <span class="count-block">1</span>
                                <i data-feather="home" class="feather-size-18"> </i>
                            </div>

                            <div style="padding: 20px 0px 20px 5px; flex:1">
                                <span style="font-size: 12px;">Đang quản lý</span>
                                <h4
                                    style="font-size: 14px; color: #15a05c; padding:0px; margin:0px; white-space: nowrap;max-width: 150px; overflow: hidden; text-overflow: ellipsis; ">
                                    <span>Nhà trọ IT MOTEL</span>
                                </h4>
                            </div>
                        </div>
                        <button class="shadow" id="add-block" style="position: absolute;
                    right: -14px;
                    top: 29px;
                    border-radius: 100%;
                    height: 35px;
                    width: 35px;
                    text-align: center;
                    padding: 0px;
                    background-color: #1175c6;
                    color: #fff;
                    border: 1px solid #1175c6;
                        z-index: 10;" data-bs-toggle="modal" data-bs-target="#addBlock">
                            <span data-bs-toggle="tooltip" data-bs-placement="top" title="Thêm mới nhà cho thuê">
                                <i data-feather="plus"> </i>
                            </span>
                        </button>
                    </div>
                </div> -->
                <!-- <div class="col-md-10" style="align-items: center; justify-content: space-between; display: flex;">
                    <div class=" scrollable-content-container"
                        style="position: relative; align-items: center; justify-content: space-between; display: flex;overflow: hidden;">
                        <button class="scroll-left">←</button>
                        <div style="display: flex; flex-wrap: nowrap; overflow-x: auto; position: relative;"
                            class="scrollable-content">
                            <a href="/quan-ly" class="item-menu">
                                <div class="icon text-center">
                                    <img width=55px src="/images/icons/menus/thu_tien.png" />
                                </div>
                                <div class="key">
                                    <span class="title"><b>Quản lý phòng</b></span>
                                </div>
                            </a>
                            <a href="/quan-ly/6920/lap-phieu-thu" class="item-menu">
                                <div class="icon text-center">
                                    <img width=55px src="/images/icons/menus/thu_tien.png" />
                                </div>
                                <div class="key">
                                    <span class="title"><b>Quản lý hóa đơn</b></span>
                                </div>
                            </a>
                            <a href="/quan-ly/6920/quan-ly-dich-vu" class="item-menu">
                                <div class="icon text-center">
                                    <img width=55px src="/images/icons/menus/ghi_chu.png" />
                                </div>
                                <div class="key">
                                    <span class="title"><b>Quản lý dịch vụ</b></span>
                                </div>
                            </a>
                            <a href="/quan-ly/6920/quan-ly-tai-san" class="item-menu">
                                <div class="icon text-center">
                                    <img width=55px src="/images/icons/menus/ghi_chu.png" />
                                </div>
                                <div class="key">
                                    <span class="title"><b>Quản lý tài sản</b></span>
                                </div>
                            </a>
                            <a href="/quan-ly/6920/tat-ca-hop-dong" class="item-menu">
                                <div class="icon text-center">
                                    <img width=55px src="/images/icons/menus/report_customer_use.png" />
                                </div>
                                <div class="key">
                                    <span class="title"><b>Quản lý hợp đồng</b></span>
                                </div>
                            </a>
                            <a href="/quan-ly/6920/tat-ca-khach-thue" class="item-menu">
                                <div class="icon text-center">
                                    <img width=55px src="/images/icons/menus/danh_sach_lien_he.png" />
                                </div>
                                <div class="key">
                                    <span class="title"><b>Quản lý khách thuê</b></span>
                                </div>
                            </a>
                            <a href="/quan-ly/6920/thu-chi-tong-ket" class="item-menu">
                                <div class="icon text-center">
                                    <img width=55px src="/images/icons/menus/thu_tien.png" />
                                </div>
                                <div class="key">
                                    <span class="title"><b>Thu/Chi - Tổng kết</b></span>
                                </div>
                            </a>
                            <a href="/quan-ly/6920/cai-dat-nha-tro" class="item-menu">
                                <div class="icon text-center">
                                    <img width=55px src="/images/icons/menus/setting.png" />
                                </div>
                                <div class="key">
                                    <span class="title"><b>Cài đặt</b></span>
                                </div>
                            </a>
                            <a href="/quan-ly/6920/lich-su-gui-zalo" class="item-menu">
                                <div class="icon text-center">
                                    <img width=45px src="/images/icons/icon-zalo.png" />
                                </div>
                                <div class="key">
                                    <span class="title"><b>Lịch sử gửi zalo</b></span>
                                </div>
                            </a>
                        </div>
                        <button class="scroll-right">→</button>
                    </div>
                </div>
            </div> -->

            <script type="text/javascript">
                const $scrollableContent = $('.scrollable-content');
                const $scrollLeft = $('.scroll-left');
                const $scrollRight = $('.scroll-right');

                function updateButtonVisibility() {
                    const scrollLeft = $scrollableContent.scrollLeft();
                    const scrollWidth = $scrollableContent[0].scrollWidth - 10;
                    const clientWidth = $scrollableContent[0].clientWidth;

                    $scrollLeft.toggleClass('hidden', scrollLeft === 0);
                    $scrollRight.toggleClass('hidden', scrollLeft + clientWidth >= scrollWidth);
                }

                $scrollLeft.click(function () {
                    $scrollableContent.animate({ scrollLeft: 0 }, 100); // Hiệu ứng cuộn mượt
                });

                $scrollRight.click(function () {
                    const scrollWidth = $scrollableContent[0].scrollWidth - 10;
                    $scrollableContent.animate({ scrollLeft: scrollWidth }, 100); // Hiệu ứng cuộn mượt
                });

                $scrollableContent.on('scroll', updateButtonVisibility);

                updateButtonVisibility(); // Cập nhật trạng thái nút khi trang được tải
            </script>
            <div
                style="padding:15px 15px 15px 15px; background-color: #fff; border-radius: 10px; margin: 0 10px 10px 10px">
                <style>
                    #myTab {
                        border-radius: 50px;
                        border: 0.5px solid #ccc;
                        box-shadow: 0 0.5rem 1rem rgb(0 0 0 / 3%) !important;
                        flex-direction: row;
                        list-style-type: none;
                        justify-content: center;
                        display: inline-flex;
                        align-self: center;
                        margin: auto;
                        overflow: hidden;
                        padding: 0;
                    }

                    #myTab .nav-item a {
                        background-color: #fff;
                        border: 0px;
                        padding: 15px 30px;
                        font-weight: bold;
                    }

                    #myTab a.active {
                        background-color: #15a05c !important;
                        color: #fff;
                        height: 100%;
                    }

                    .number,
                    .currency {
                        font-size: 18px;
                        font-weight: bold;
                    }
                </style>
                <script type="text/javascript"
                    src="https://quanlytro.me/householder-admin/plugins/flatpickr/js/flatpickr-4.6.9.min.js"></script>
                <script type="text/javascript"
                    src="https://quanlytro.me/householder-admin/plugins/flatpickr/js/month-select-4.6.9.min.js"></script>
                <script type="text/javascript"
                    src="https://quanlytro.me/householder-admin/plugins/flatpickr/js/vn.js"></script>

                <link href="https://quanlytro.me/householder-admin/plugins/flatpickr/css/flatpickr.min.css"
                    rel="stylesheet">
                <link href="https://quanlytro.me/householder-admin/plugins/flatpickr/css/month-select.min.css"
                    rel="stylesheet">
                <div>
                    <div class="text-center">
                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <a href="#report-blocks" class="active" id="report-blocks-tab" data-bs-toggle="tab"
                                    data-bs-target="#report-blocks" type="button" role="tab"
                                    aria-controls="report-blocks" aria-selected="true">
                                    <i data-feather="pie-chart"></i>
                                    Tình trạng nhà cho thuê
                                </a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a href="#report-finance" id="report-finance-tab" data-bs-toggle="tab"
                                    data-bs-target="#report-finance" type="button" role="tab"
                                    aria-controls="report-finance" aria-selected="false">
                                    <i data-feather="dollar-sign"></i>
                                    Báo cáo tài chính
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div class="tab-pane active" id="report-blocks" role="tabpanel"
                            aria-labelledby="report-blocks-tab">
                            <div class="page-report">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="mt-3">
                                            <h4 class="title-item" style="margin-top:-20px">
                                                Tình trạng các nhà cho thuê
                                                <i class="des">Thông tin về số phòng đang ở, đang nợ, đang cọc....</i>
                                            </h4>

                                            <div class="padding: 30px">
                                                <div id="blocks_report" class="tab-pane"><br>
                                                    <table class="table table-bordered text-center">
                                                        <tr>
                                                            <td style="width: 20%"><b>Tên nhà cho thuê</b></td>
                                                            <td><b>Tổng phòng</b></td>
                                                            <td><b>Có thể cho thuê</b></td>
                                                            <td><b>Đang thuê</b></td>

                                                            <td><b>Đang cọc giữ phòng</b></td>
                                                            <td><b>Đang nợ</b></td>
                                                            <td><b>Báo kết thúc</b></td>
                                                            <td><b>Sắp kết thúc</b></td>
                                                            <td><b>Quá hạn hợp đồng</b></td>
                                                            <td><b>Hợp đồng đã liên kết </b></td>
                                                        </tr>
                                                        <tr>
                                                            <td style="font-weight: bold">MONIEQEWQ</td>
                                                            <td class="number">20</td>
                                                            <td class="number">20 <span class="text-success"
                                                                    style="font-size: 12px">(100%)</span></td>
                                                            <td class="number">0 <span class="text-success"
                                                                    style="font-size: 12px">(0%)</span></td>

                                                            <td class="number">0 <span class="text-success"
                                                                    style="font-size: 12px">(0%)</span></td>
                                                            <td class="number">0 <span class="text-danger"
                                                                    style="font-size: 12px">(0%)</span></td>
                                                            <td class="number">0 <span class="text-danger"
                                                                    style="font-size: 12px">(0%)</span></td>
                                                            <td class="number">0 <span class="text-danger"
                                                                    style="font-size: 12px">(0%)</span></td>
                                                            <td class="number">0 <span class="text-secondary"
                                                                    style="font-size: 12px">(0%)</span></td>
                                                            <td class="number">0</td>
                                                        </tr>
                                                        <tr style="background-color: #4caf5026;">
                                                            <td style="font-weight: bold">Tổng cộng</td>
                                                            <td class="number">20</td>
                                                            <td class="number">20 <span class="text-success"
                                                                    style="font-size: 12px">(100%)</span></td>
                                                            <td class="number">0 <span class="text-success"
                                                                    style="font-size: 12px">(0%)</span></td>
                                                            <td class="number">0 <span class="text-success"
                                                                    style="font-size: 12px">(0%)</span></td>
                                                            <td class="number">0 <span class="text-danger"
                                                                    style="font-size: 12px">(0%)</span></td>
                                                            <td class="number">0 <span class="text-danger"
                                                                    style="font-size: 12px">(0%)</span></td>
                                                            <td class="number">0 <span class="text-danger"
                                                                    style="font-size: 12px">(0%)</span></td>
                                                            <td class="number">0 <span class="text-secondary"
                                                                    style="font-size: 12px">(0%)</span></td>
                                                            <td class="number">0</td>
                                                        </tr>


                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 mt-3">
                                        <div class="padding: 30px">
                                            <div id="contracts_report" class="tab-pane">
                                                <div class="header-item">
                                                    <h4 class="title-item" style="margin-top:-20px">
                                                        Hợp đồng sắp kết thúc
                                                        <i class="des">Hợp đồng báo kết thúc, sắp hết hạn.</i>
                                                    </h4>
                                                    <div>
                                                        <div class="form-floating" style="min-width: 200px;">
                                                            <select data-format="numeric" name="block_id"
                                                                class="form-select form-control">
                                                                <option value="">Tất cả nhà cho thuê</option>
                                                                <option value="6920" selected="selected">MONIEQEWQ
                                                                </option>
                                                            </select>
                                                            <label for="select_block">Nhà cho thuê</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div style="margin-top: 10px" class="table-contract">
                                                    <table class="table table-bordered text-center celled"
                                                        id="contract_report_table">
                                                        <tr class="header">
                                                            <td style="width: 20%"><b>Chủ hợp đồng</b></td>
                                                            <td style="width: 20%"><b>Phòng/Giường</b></td>
                                                            <td><b>Ngày ký hợp đồng</b></td>
                                                            <td><b>Ngày kết thúc hợp đồng</b></td>
                                                            <td><b>Tình trạng</b></td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                            <script type="text/javascript">
                                                $(document).ready(function () {
                                                    var __el = {
                                                        table: $("#contract_report_table"),
                                                        container: $("#contracts_report"),
                                                    };

                                                    var filter = {};
                                                    var block_ids = [];

                                                    __el.container.find('select[name="block_id"]').on('change', function (e) {
                                                        block_ids = [];
                                                        if (this.value != "") {
                                                            block_ids.push(parseInt(this.value));
                                                        }
                                                        else {
                                                            __el.container.find('select[name="block_id"] option').not(':eq(0)').each(function () {
                                                                block_ids.push(parseInt($(this).val()));
                                                            });
                                                        }
                                                        loadData(filter);
                                                    });

                                                    const loadReportContractTable = (data) => {
                                                        var html = '';
                                                        $.each(data, function (key, item) {
                                                            html += `<tr>
                <td class="price-item-cell"><b>${item.customer_name}</b><div>${item.customer_phone}</div></td>
                <td class="price-item-cell">${item.room.name}</td>
                <td class="price-item-cell">${item.date_contract_format}</td>
                <td class="price-item-cell">${item.date_terminate_format ?? item.date_tick_terminate_format}</td>
                <td class="price-item-cell"><span class="badge" style="font-size: 12px; background-color: ${item.status_color}">${item.status_text}</span></td>
                </tr>`;
                                                        })
                                                        return html;
                                                    }

                                                    const loadData = (filter = null) => $.transferData({
                                                        method: "POST",
                                                        url: __helper.url.urlPattern(__routeApi.reportcontracts),
                                                        data: {
                                                            filter: filter ?? null,
                                                            block_ids: block_ids
                                                        },
                                                        success: (res) => {
                                                            if (Object.keys(res.data.payload).length > 0) {
                                                                __el.container.find('.table-contract > .alert').remove();
                                                                __el.table.removeClass('d-none');
                                                                __el.table.find('.header').nextAll('tr').remove();
                                                                __el.table.find('.header').after(loadReportContractTable(res.data.payload))
                                                            } else {
                                                                __el.table.addClass('d-none')
                                                                __el.container.find('.table-contract > .alert').remove();
                                                                __el.container.find('.table-contract').append(`<div class="alert alert-danger" role="alert">
                        Không có hợp đồng nào sặp kết thúc
                    </div>`)
                                                            }

                                                        },
                                                        error: (e) => {
                                                            console.log(e);
                                                        }
                                                    });
                                                    block_ids.push(parseInt(__el.container.find('select[name="block_id"]').val()));
                                                    loadData(filter);

                                                })
                                            </script>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="mt-3">
                                            <h4 class="title-item" style="margin-top:-30px">
                                                Tình trạng khách thuê
                                                <i class="des">Tổng khách thuê, số khách thuê đã ghi nhận giấy tờ, khai
                                                    báo tạm trú</i>
                                            </h4>
                                            <div class="padding: 30px">
                                                <div id="customers_report" class="tab-pane"><br>
                                                    <table class="table table-contract table-bordered text-center">
                                                        <tr>
                                                            <td style="width: 25%"><b>Tên nhà cho thuê</b></td>
                                                            <td><b>Tổng khách thuê hiện tại</b></td>
                                                            <td><b>Số nguời chưa đang ký tạm trú</b></td>
                                                            <td><b>Số người chưa đủ thông tin liên lạc</b></td>
                                                        </tr>
                                                        <tr>
                                                            <td style="font-weight: bold">MONIEQEWQ</td>
                                                            <td class="number">0</td>
                                                            <td class="number">0</td>
                                                            <td class="number">0</td>
                                                        </tr>


                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="report-finance" role="tabpanel" aria-labelledby="report-finance-tab">
                            <div class="page-report">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="mt-3">
                                            <h4 class="title-item" style="margin-top:-20px">
                                                Thống kê các khoản thu của nhà cho thuê
                                                <i class="des">Thông tin về các khoản tiền thu vào như tiền phòng, dịch
                                                    vụ....</i>
                                            </h4>
                                            <div class="padding: 30px">
                                                <div id="finance_report" class="tab-pane"><br>
                                                    <table class="table table-bordered">
                                                        <tr>
                                                            <td class="text-center"><b>Tên nhà cho thuê</b></td>
                                                            <td class="text-center"><b>Tổng số tiền cọc</b></td>
                                                            <td class="text-center"><b>Tổng số tiền cọc giữ chân</b>
                                                            </td>
                                                            <td class="text-center"><b>Tổng số tiền khách đang nợ</b>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-center"><b>MONIEQEWQ</b></td>
                                                            <td class="text-end currency">0đ</td>
                                                            <td class="text-end currency">0đ</td>
                                                            <td class="text-end currency">0đ</td>
                                                        </tr>

                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="mt-3">
                                            <div class="padding: 30px">
                                                <style type="text/css">
                                                    .price-item-cell {
                                                        padding: 0.5rem 0.5rem;
                                                        border-bottom-width: 1px;
                                                    }
                                                </style>
                                                <div id="price_item_report" class="tab-pane">
                                                    <div class="header-item">
                                                        <h4 class="title-item" style="margin-top:0px">
                                                            Thống kê dịch vụ
                                                            <i class="des">Mức sử dụng, chỉ số tiêu thu trong các nhà
                                                                cho thuê</i>
                                                        </h4>
                                                        <div class="filter"
                                                            style="display: flex; justify-content: center;">
                                                            <div class="form-floating"
                                                                style="min-width: 200px; margin-right: 15px">
                                                                <select data-format="numeric" name="block_id"
                                                                    class="form-select form-control">
                                                                    <option value="6920">MONIEQEWQ</option>
                                                                </select>
                                                                <label for="select_block">Nhà cho thuê</label>
                                                            </div>
                                                            <div class="input-group" style="min-width: 200px">
                                                                <div class="form-floating">
                                                                    <input type="text"
                                                                        class="form-control month-flat-picker"
                                                                        name="month" id="month"
                                                                        placeholder="Nhập tháng">
                                                                    <label for="month">Tháng</label>
                                                                </div>
                                                                <label class="input-group-text" for="month"><i
                                                                        data-feather="calendar"> </i></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <table class="table table-bordered text-center celled"
                                                        style="margin-top:15px;" id="price_item_report_table">
                                                        <tbody>
                                                        </tbody>
                                                    </table>
                                                </div>


                                                <script type="text/javascript">
                                                    $(document).ready(function () {
                                                        var __el = {
                                                            table: $("#price_item_report_table tbody"),
                                                            container: $("#price_item_report"),
                                                        };

                                                        var filter = {};
                                                        var block_id = parseInt(__el.container.find('select[name="block_id"]').val());

                                                        flatpickr(__el.container.find('input[name="month"]'), {
                                                            allowInput: true,
                                                            enableTime: false,
                                                            dateFormat: "m/Y",
                                                            locale: 'vn',
                                                            defaultDate: 'today',
                                                            plugins: [
                                                                new monthSelectPlugin({
                                                                    shorthand: true, //defaults to false
                                                                    dateFormat: "m/Y", //defaults to "F Y"
                                                                    altFormat: "F Y", //defaults to "F Y"
                                                                    theme: "light" // defaults to "light"
                                                                })
                                                            ]
                                                        });

                                                        __el.container.find('input[name="month"]').change(function () {
                                                            if (parseInt($(this).val().split("/")[0]) !== filter.month) {
                                                                filter.month = parseInt($(this).val().split("/")[0]);
                                                                filter.year = parseInt($(this).val().split("/")[1]);
                                                                loadData(filter);
                                                            }

                                                        });

                                                        __el.container.find('select[name="block_id"]').on('change', function (e) {
                                                            block_id = this.value;
                                                            loadData(filter);
                                                        });
                                                        const loadPriceItemReportTable = (price_item) => {
                                                            var html = '<tr>';
                                                            $.each(price_item, function (key, item) {
                                                                html += `<td colspan="2"  class="price-item-cell title"><b>${item.name} (${item.unit_text})</b></td>`
                                                            })
                                                            html += '</tr>';
                                                            html += '<tr>';
                                                            $.each(price_item, function (key, item) {
                                                                html += `<td class="price-item-cell title">Mức sử dụng</td>`;
                                                                html += `<td class="price-item-cell title">Tổng tiền</td>`;
                                                            })
                                                            html += '</tr>';

                                                            html += `<tr>`;
                                                            $.each(price_item, function (key, item) {
                                                                html += `<td class="price-item-cell number">${item.value}</td>`
                                                                html += `<td class="price-item-cell currency">${__format.currency(item.total)}</td>`
                                                            })
                                                            html += '</tr>';
                                                            return html;
                                                        }

                                                        const loadData = (filter = null) => $.transferData({
                                                            method: "POST",
                                                            url: __helper.url.urlPattern(__routeApi.block.customerUse, {
                                                                block_id: block_id
                                                            }),
                                                            data: {
                                                                filter: filter ?? null
                                                            },
                                                            success: (res) => {
                                                                if (Object.keys(res.data).length > 0) {
                                                                    __el.container.find('.alert').remove();
                                                                    __el.table.removeClass('d-none');
                                                                    __el.table.find('tr').remove();
                                                                    __el.table.append(loadPriceItemReportTable(res.data))
                                                                } else {
                                                                    __el.table.find('tr').remove();
                                                                    __el.table.addClass('d-none')
                                                                    __el.container.find('.alert').remove();
                                                                    __el.container.append(`<div class="mt-3 alert alert-danger" role="alert">
                        Trong tháng ${filter.month} chưa có dich vụ nào được sử dụng
                    </div>`)
                                                                }

                                                            },
                                                            error: (e) => {
                                                                console.log(e);
                                                            }
                                                        });

                                                        filter.month = parseInt(__el.container.find('input[name="month"]').val().split("/")[0]);
                                                        filter.year = parseInt(__el.container.find('input[name="month"]').val().split("/")[1]);
                                                        loadData(filter);
                                                    })
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="mt-3">
                                            <h4 class="title-item" style="margin-top:-30px">
                                                Thống kê các khoản thu, chi của nhà cho thuê
                                                <i class="des">Thông tin về các khoản tiền thu và chi như tiền phòng,
                                                    dịch vụ....</i>
                                            </h4>
                                            <style type="text/css">
                                                .box-home,
                                                .item-home {
                                                    position: relative;
                                                }

                                                .icon-home {
                                                    border-radius: 100%;
                                                    width: 40px;
                                                    height: 40px;
                                                    background: hsla(0, 0%, 100%, .2);
                                                    color: #fff;
                                                    text-align: center;
                                                    display: flex;
                                                    align-items: center;
                                                    justify-content: center;
                                                    margin-right: 5px;
                                                }

                                                .icon-warning {
                                                    display: flex;
                                                    background-color: #ffe9e9;
                                                    border-radius: 100%;
                                                    color: red;
                                                    width: 50px;
                                                    height: 50px;
                                                    align-items: center;
                                                    justify-content: center;
                                                    margin-right: 15px;
                                                }

                                                .item-home .title {
                                                    flex: 1
                                                }

                                                .create-home {
                                                    position: absolute;
                                                    bottom: 0px;
                                                    right: 0;
                                                    border-radius: 40px 0 0 0px;
                                                    width: 60px;
                                                    height: 55px;
                                                    background: hsla(0, 0%, 100%, .2);
                                                    z-index: 2;
                                                    color: #fff;
                                                    text-align: center;
                                                }

                                                .create-home span {
                                                    width: 35px;
                                                    height: 35px;
                                                    line-height: 30px;
                                                    background: #fff;
                                                    text-align: center;
                                                    color: #000;
                                                    border-radius: 50%;
                                                    display: block;
                                                    margin: 8px 0 0 17px;
                                                }

                                                .box-home {
                                                    padding: 15px;
                                                    border-radius: 10px;
                                                    color: #fff !important;
                                                    display: block;
                                                }

                                                .span-primary {
                                                    background-color: #4CAF50;
                                                }

                                                .span-green {
                                                    background-color: #8bc34a;
                                                }

                                                .span-yellow {
                                                    background-color: #ff9800;
                                                }

                                                .span-red {
                                                    background-color: #ff6161;
                                                }

                                                .label {
                                                    max-width: 25%;
                                                }
                                            </style>
                                            <div id="receipt_expense_report" class="tab-pane"><br>
                                                <div style="display: flex;justify-content: center;">
                                                    <div class="form-floating" style="width: 20%;margin-right: 15px;">
                                                        <select data-format="numeric" name="block_id"
                                                            class="form-select form-control">
                                                            <option value="">Tất cả nhà cho thuê</option>
                                                            <option value="6920" selected="selected">MONIEQEWQ</option>
                                                        </select>
                                                        <label for="select_block">Nhà cho thuê</label>
                                                    </div>
                                                    <div class="input-group" style="width: 20%;margin-right: 15px;">
                                                        <div class="form-floating">
                                                            <select class="form-select" name="type-filter"
                                                                id="input-type-filter">
                                                                <option value="date">Theo ngày</option>
                                                                <option value="month" selected="selected">Theo tháng
                                                                </option>
                                                                <option value="quarter">Theo quý</option>
                                                                <option value="year">Theo năm</option>
                                                            </select>
                                                            <label for="input-type-filter">Tổng kết theo</label>
                                                        </div>
                                                        <span class="input-group-text" id="basic-addon1"><i
                                                                data-feather="filter"> </i></span>
                                                    </div>
                                                    <div class="input-group month"
                                                        style="width: 20%;margin-right: 15px;">
                                                        <div class="form-floating">
                                                            <input type="text" class="form-control month-flat-picker"
                                                                name="month" id="month" placeholder="Nhập tháng">
                                                            <label for="month">Tháng</label>
                                                        </div>
                                                        <label class="input-group-text" for="month"><i
                                                                data-feather="calendar"> </i></label>
                                                    </div>
                                                    <div class="input-group d-none quarter"
                                                        style="width: 20%;margin-right: 15px;">
                                                        <div class="form-floating">
                                                            <select class="form-select" name="quarter"
                                                                id="input-type-filter">
                                                                <option value="1">Qúy 1</option>
                                                                <option value="2">Qúy 2</option>
                                                                <option value="3">Qúy 3</option>
                                                                <option value="4" selected="selected">Qúy 4</option>
                                                            </select>
                                                            <label for="quarter">Qúy</label>
                                                        </div>
                                                        <label class="input-group-text" for="quarter"><i
                                                                data-feather="calendar"> </i></label>
                                                    </div>
                                                    <div class="input-group d-none year"
                                                        style="width: 20%;margin-right: 15px;">
                                                        <div class="form-floating">
                                                            <select class="form-select" name="year"
                                                                id="input-type-filter">
                                                                <option value="2024" selected="selected">Năm 2024
                                                                </option>
                                                                <option value="2023">Năm 2023</option>
                                                                <option value="2022">Năm 2022</option>
                                                                <option value="2021">Năm 2021</option>
                                                            </select>
                                                            <label for="year">Năm</label>
                                                        </div>
                                                        <label class="input-group-text" for="year"><i
                                                                data-feather="calendar"> </i></label>
                                                    </div>
                                                    <div class="input-group d-none date"
                                                        style="width: 40%;margin-right: 15px;">
                                                        <div class="form-floating">
                                                            <input type="text" class="form-control month-flat-picker"
                                                                name="range-date" id="range-date" data-format="date"
                                                                placeholder="Nhập tháng">
                                                            <label for="range-date">Ngày <span
                                                                    style="font-size: 12px;color: red;">(Tối đa 60
                                                                    ngày)</span></label>
                                                        </div>
                                                        <label class="input-group-text" for="range-date"><i
                                                                data-feather="calendar"> </i></label>
                                                    </div>
                                                </div>
                                                <div class="row mt-4" style="display: flex;justify-content: center;">
                                                    <div class="col-sm-3 label">
                                                        <div class="item-home box-home span-green">
                                                            <div class="d-flex">
                                                                <span class="icon-home"><i
                                                                        data-feather="trending-up"></i></span>
                                                                <div>
                                                                    <span class="title">
                                                                        Tổng thu
                                                                    </span>
                                                                    <h3 class="text-center" id="sum_receipt">0đ</h3>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3 label">
                                                        <div class="item-home box-home span-yellow">
                                                            <div class="d-flex">
                                                                <span class="icon-home"><i
                                                                        data-feather="trending-down"></i></span>
                                                                <div>
                                                                    <span class="title">
                                                                        Tổng chi
                                                                    </span>
                                                                    <h3 class="text-center" id="sum_expense">0đ</h3>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3 label">
                                                        <div class="item-home box-home span-primary">
                                                            <div class="d-flex">
                                                                <span class="icon-home"><i
                                                                        data-feather="dollar-sign"></i></span>
                                                                <div>
                                                                    <span class="title">
                                                                        Lợi nhuận
                                                                    </span>
                                                                    <h3 class="text-center" id="interest">0đ</h3>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row mt-5">
                                                    <div class="col-6 table-receipt">
                                                        <h5 class="title-item" style="margin-top:-20px">
                                                            Chi tiết tất cả các khoản thu
                                                            <i class="des">Thông tin về các khoản tiền thu vào như tiền
                                                                phòng....</i>
                                                        </h5>
                                                        <table class="table table-bordered text-center"
                                                            id="receipt_report_table">
                                                            <tr class="header">
                                                                <td><b>Nội dung</b></td>
                                                                <td class="text-end"><b>Tổng tiền thu</b></td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                    <div class="col-6 table-expense">
                                                        <h5 class="title-item" style="margin-top:-20px">
                                                            Chi tiết tất cả các khoản chi
                                                            <i class="des">Thông tin về các khoản tiền chi ra như phí
                                                                dịch vụ....</i>
                                                        </h5>
                                                        <table class="table table-bordered text-center"
                                                            id="expense_report_table">
                                                            <tr class="header">
                                                                <td><b>Nội dung</b></td>
                                                                <td class="text-end"><b>Tổng tiền Chi</b></td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <script type="text/javascript">
                                                $(document).ready(function () {
                                                    var __el = {
                                                        table_receipt: $("#receipt_report_table"),
                                                        table_expense: $("#expense_report_table"),
                                                        container: $("#receipt_expense_report"),
                                                    };

                                                    let filter = {
                                                        type_filter: __el.container.find('select[name="type-filter"]').val(),
                                                        quarter: parseInt(__el.container.find('select[name="quarter"]').val()),
                                                    };

                                                    var block_id = parseInt(__el.container.find('select[name="block_id"]').val());

                                                    flatpickr(__el.container.find('input[name="month"]'), {
                                                        allowInput: true,
                                                        enableTime: false,
                                                        dateFormat: "m/Y",
                                                        locale: 'vn',
                                                        defaultDate: 'today',
                                                        plugins: [
                                                            new monthSelectPlugin({
                                                                shorthand: true, //defaults to false
                                                                dateFormat: "m/Y", //defaults to "F Y"
                                                                altFormat: "F Y", //defaults to "F Y"
                                                                theme: "light" // defaults to "light"
                                                            })
                                                        ]
                                                    });

                                                    flatpickr(__el.container.find('input[name="range-date"]'), {
                                                        mode: "range",
                                                        enableTime: false,
                                                        dateFormat: "d/m/Y",
                                                        locale: 'vn',
                                                        defaultDate: 'today',
                                                        maxDate: "today",
                                                        minDate: new Date().fp_incr(-60),
                                                        onChange: ([start, end]) => {
                                                            if (start && end) {
                                                                if (filter.date_start != start && filter.date_end != end) {
                                                                    filter.date_start = start;
                                                                    filter.date_end = end;
                                                                    loadData(filter);
                                                                }
                                                            }
                                                        }
                                                    });

                                                    __el.container.find('input[name="month"]').change(function () {
                                                        if (parseInt($(this).val().split("/")[0]) !== filter.month) {
                                                            filter.month = parseInt($(this).val().split("/")[0]);
                                                            filter.year = parseInt($(this).val().split("/")[1]);
                                                            loadData(filter);
                                                        }
                                                    });

                                                    __el.container.find('select[name="block_id"]').on('change', function (e) {
                                                        block_id = this.value;
                                                        loadData(filter);
                                                    });

                                                    __el.container.find('select[name="quarter"]').on('change', function (e) {
                                                        if (parseInt(this.value) !== filter.quarter) {
                                                            filter.quarter = parseInt(this.value);
                                                            loadData(filter);
                                                        }
                                                    });

                                                    __el.container.find('select[name="year"]').on('change', function (e) {
                                                        if (parseInt(this.value) !== filter.year) {
                                                            filter.year = parseInt(this.value);
                                                            loadData(filter);
                                                        }
                                                    });

                                                    __el.container.find('select[name="type-filter"]').on('change', function (e) {
                                                        var type_filter = this.value;
                                                        filter.type_filter = type_filter;

                                                        if (type_filter === 'month') {
                                                            __el.container.find('.month').removeClass('d-none');
                                                            __el.container.find('.quarter').addClass('d-none');
                                                            __el.container.find('.year').addClass('d-none');
                                                            __el.container.find('.date').addClass('d-none');
                                                        };

                                                        if (type_filter === 'quarter') {
                                                            __el.container.find('.quarter').removeClass('d-none');
                                                            __el.container.find('.year').removeClass('d-none');
                                                            __el.container.find('.month').addClass('d-none');
                                                            __el.container.find('.date').addClass('d-none');
                                                        };

                                                        if (type_filter === 'year') {
                                                            __el.container.find('.year').removeClass('d-none');
                                                            __el.container.find('.month').addClass('d-none');
                                                            __el.container.find('.quarter').addClass('d-none');
                                                            __el.container.find('.date').addClass('d-none');
                                                        }

                                                        if (type_filter === 'date') {
                                                            __el.container.find('.date').removeClass('d-none');
                                                            __el.container.find('.month').addClass('d-none');
                                                            __el.container.find('.quarter').addClass('d-none');
                                                            __el.container.find('.year').addClass('d-none');
                                                        }
                                                        //loadData(filter);
                                                    });

                                                    const loadReceiptExpenseReportTable = (data) => {
                                                        var html = '';
                                                        $.each(data, function (key, item) {
                                                            html += `<tr>
                    <td class="price-item-cell">${item.category_name}</td>
                    <td class="price-item-cell currency text-end">${item.total}</td>
                </tr>`;

                                                        })
                                                        return html;
                                                    }

                                                    const loadData = (filter = null) => $.transferData({
                                                        method: "POST",
                                                        url: __helper.url.urlPattern(__routeApi.block.reportReceiptExpense),
                                                        data: {
                                                            filter: filter ?? null,
                                                            block_id: block_id
                                                        },
                                                        success: (res) => {
                                                            __el.container.find('#sum_receipt').text(res.data.sum_receipt);
                                                            __el.container.find('#sum_expense').text(res.data.sum_expense);
                                                            __el.container.find('#interest').text(res.data.interest);

                                                            if (Object.keys(res.data.receipt).length > 0) {
                                                                __el.container.find('.table-receipt > .alert').remove();
                                                                __el.table_receipt.removeClass('d-none');
                                                                __el.table_receipt.find('.header').nextAll('tr').remove();
                                                                __el.table_receipt.find('.header').after(loadReceiptExpenseReportTable(res.data.receipt))
                                                            } else {
                                                                __el.table_receipt.addClass('d-none')
                                                                __el.container.find('.table-receipt > .alert').remove();
                                                                __el.container.find('.table-receipt').append(`<div class="mt-3 alert alert-danger" role="alert">
                        Chưa có phiếu thu nào
                    </div>`)
                                                            }

                                                            if (Object.keys(res.data.expense).length > 0) {
                                                                __el.container.find('.table-expense > .alert').remove();
                                                                __el.table_expense.removeClass('d-none')
                                                                __el.table_expense.find('.header').nextAll('tr').remove();
                                                                __el.table_expense.find('.header').after(loadReceiptExpenseReportTable(res.data.expense))
                                                            } else {
                                                                __el.table_expense.addClass('d-none')
                                                                __el.container.find('.table-expense > .alert').remove();
                                                                __el.container.find('.table-expense').append(`<div class="mt-3 alert alert-danger" role="alert">
                        Chưa có phiếu chi nào
                    </div>`)
                                                            }

                                                        },
                                                        error: (e) => {
                                                            console.log(e);
                                                        }
                                                    });

                                                    filter.month = parseInt(__el.container.find('input[name="month"]').val().split("/")[0]),
                                                        filter.year = parseInt(__el.container.find('input[name="month"]').val().split("/")[1])
                                                    loadData(filter);
                                                })
                                            </script>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <script type="text/javascript">
                    $(document).ready(function () {
                        if (window.location.hash !== '') {
                            var triggerEl = document.querySelector(`#myTab a[href="${window.location.hash}"]`)
                            var tab = new bootstrap.Tab(triggerEl);
                            tab.show();
                        }
                    });
                </script>
            </div>
        </div>
        <!-- Modal manage block -->
        <div class="modal fade" id="manageBlock" tabindex="-1" aria-labelledby="manageBlockLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header modal-header--sticky">
                        <i style="margin-right: 15px" data-feather="home"> </i>
                        <h5 class="modal-title" id="manageBlockLabel">
                            Danh sách nhà trọ của bạn
                            <p style="font-size: 14px; font-weight: normal; font-style: italic; margin: 0">Tới 1 nhà trọ
                                và quản lý</p>
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"> </button>
                    </div>
                    <div class="modal-body">
                        <div class="item-feature active d-flex align-items-center justify-content-between mb-2">
                            <div class="info" style="flex: 1">
                                <h6>Nhà trọ MONIEQEWQ</h6>
                                <p>12313123 - Đường Phan Đình, Thanh Hòa, Bù Đốp, Bình Phước</p>
                            </div>

                            <div class="btn-round disabled btn-secondary" data-bs-toggle="tooltip"
                                data-bs-placement="top" title="Không thể xóa nhà trọ đang thao tác">
                                <i data-feather="trash-2"> </i>
                            </div>

                            <div class="btn-round btn-edit" data-bs-toggle="modal" data-bs-target="#addBlock"
                                data-block='{"id":6920,"name":"MONIEQEWQ","name_full":"Nh\u00e0 tr\u1ecd MONIEQEWQ","user_id":8168,"category":0,"category_name":"Nh\u00e0 tr\u1ecd","category_name_short":"Nh\u00e0 tr\u1ecd","room_type":"room","room_type_name":"ph\u00f2ng","type":"floor","room_total":20,"count_floor":1,"area":15,"room_amount":1000,"ele_amount":0,"water_amount":0,"price_items_cache":[{"id":22810,"name":"Ti\u1ec1n \u0111i\u1ec7n","type":"constant","unit":"kwh","price":1700,"rooms":{"payload":[{"id":100355,"name":"Ph\u00f2ng 1","sort":null,"value":100355,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100356,"name":"Ph\u00f2ng 2","sort":null,"value":100356,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100357,"name":"Ph\u00f2ng 3","sort":null,"value":100357,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100358,"name":"Ph\u00f2ng 4","sort":null,"value":100358,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100359,"name":"Ph\u00f2ng 5","sort":null,"value":100359,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100360,"name":"Ph\u00f2ng 6","sort":null,"value":100360,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100361,"name":"Ph\u00f2ng 7","sort":null,"value":100361,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100362,"name":"Ph\u00f2ng 8","sort":null,"value":100362,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100363,"name":"Ph\u00f2ng 9","sort":null,"value":100363,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100364,"name":"Ph\u00f2ng 10","sort":null,"value":100364,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100365,"name":"Ph\u00f2ng 11","sort":null,"value":100365,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100366,"name":"Ph\u00f2ng 12","sort":null,"value":100366,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100367,"name":"Ph\u00f2ng 13","sort":null,"value":100367,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100368,"name":"Ph\u00f2ng 14","sort":null,"value":100368,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100369,"name":"Ph\u00f2ng 15","sort":null,"value":100369,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100370,"name":"Ph\u00f2ng 16","sort":null,"value":100370,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100371,"name":"Ph\u00f2ng 17","sort":null,"value":100371,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100372,"name":"Ph\u00f2ng 18","sort":null,"value":100372,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100373,"name":"Ph\u00f2ng 19","sort":null,"value":100373,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100374,"name":"Ph\u00f2ng 20","sort":null,"value":100374,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"}]},"value":null,"frames":[],"status":"is_active","history":null,"user_id":8168,"block_id":6920,"category":"ele","type_text":"Theo gi\u00e1 tr\u1ecb c\u1ed1 \u0111\u1ecbnh","unit_text":"KWh","is_default":1,"status_text":"\u0110ang s\u1eed d\u1ee5ng","subtraction":1},{"id":22811,"name":"Ti\u1ec1n n\u01b0\u1edbc","type":"constant","unit":"khoi","price":18000,"rooms":{"payload":[{"id":100355,"name":"Ph\u00f2ng 1","sort":null,"value":100355,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100356,"name":"Ph\u00f2ng 2","sort":null,"value":100356,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100357,"name":"Ph\u00f2ng 3","sort":null,"value":100357,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100358,"name":"Ph\u00f2ng 4","sort":null,"value":100358,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100359,"name":"Ph\u00f2ng 5","sort":null,"value":100359,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100360,"name":"Ph\u00f2ng 6","sort":null,"value":100360,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100361,"name":"Ph\u00f2ng 7","sort":null,"value":100361,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100362,"name":"Ph\u00f2ng 8","sort":null,"value":100362,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100363,"name":"Ph\u00f2ng 9","sort":null,"value":100363,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100364,"name":"Ph\u00f2ng 10","sort":null,"value":100364,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100365,"name":"Ph\u00f2ng 11","sort":null,"value":100365,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100366,"name":"Ph\u00f2ng 12","sort":null,"value":100366,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100367,"name":"Ph\u00f2ng 13","sort":null,"value":100367,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100368,"name":"Ph\u00f2ng 14","sort":null,"value":100368,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100369,"name":"Ph\u00f2ng 15","sort":null,"value":100369,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100370,"name":"Ph\u00f2ng 16","sort":null,"value":100370,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100371,"name":"Ph\u00f2ng 17","sort":null,"value":100371,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100372,"name":"Ph\u00f2ng 18","sort":null,"value":100372,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100373,"name":"Ph\u00f2ng 19","sort":null,"value":100373,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"},{"id":100374,"name":"Ph\u00f2ng 20","sort":null,"value":100374,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"}]},"value":null,"frames":[],"status":"is_active","history":null,"user_id":8168,"block_id":6920,"category":"water","type_text":"Theo gi\u00e1 tr\u1ecb c\u1ed1 \u0111\u1ecbnh","unit_text":"Kh\u1ed1i","is_default":1,"status_text":"\u0110ang s\u1eed d\u1ee5ng","subtraction":1},{"id":22834,"name":"Ti\u1ec1n \u0111i\u1ec7n","type":"constant","unit":"kwh","price":1700,"rooms":{"payload":[{"id":100355,"name":"Ph\u00f2ng 1","sort":null,"value":100355,"status":"is_empty","group_id":null,"priority":null,"room_amount":null,"status_text":"\u0110ang tr\u1ed1ng","circle_month":null,"active_status":"pending_create_bill","priority_text":"Kh\u00f4ng x\u00e1c \u0111\u1ecbnh","customer_count":null,"active_status_text":"Ch\u1edd k\u1ef3 thu t\u1edbi"}]},"value":null,"frames":[],"status":"is_active","history":null,"user_id":8168,"block_id":6920,"category":"other","type_text":"Theo gi\u00e1 tr\u1ecb c\u1ed1 \u0111\u1ecbnh","unit_text":"KWh","is_default":0,"status_text":"\u0110ang s\u1eed d\u1ee5ng","subtraction":0}],"circle_order":30,"deadline_bill":30,"bill_setting":{"note":{"content":null},"enable_qr":1,"payment_default":"cash","show_circle_day":0,"single_send_zalo":0,"template_bill_zalo":1,"enable_rounding_money":1,"extract_receipt_expense":0},"app_renter_setting":{"allow_update_car":1,"default_password":123456789,"allow_close_clock":0,"auto_create_account":0,"allow_ticket_contract":1,"allow_update_customer":1},"room_group":[{"id":1,"name":"T\u1ea7ng tr\u1ec7t","index":0,"label":"T\u1ea7ng tr\u1ec7t","value":1}],"max_member":1,"open_door":null,"close_door":null,"rule":null,"extension":null,"data_log":{"id":6920,"menu_label":{"pay_bill":0,"room_list":"0\/20","new_session":20,"deposit_request":"0\/20","terminate_contract":"0\/0"},"block_report":{"id":6911,"data":null,"block_id":6920,"call_count":0,"debt_count":0,"post_count":0,"view_count":0,"empty_count":20,"active_count":0,"can_sale_count":20,"debt_amount_total":0,"deposit_temp_count":0,"deposit_amount_total":0,"male_dormitory_count":0,"tick_terminate_count":0,"will_terminate_count":0,"deposit_contract_count":0,"female_dormitory_count":0,"renter_connected_count":0,"deposit_temp_amount_total":0,"debt_customer_amount_total":0,"deposit_contract_amount_total":0}},"setting":{"car_function":1,"post_function":1,"agent_function":1,"asset_function":1,"price_item_ele":3,"price_item_wifi":0,"price_item_trash":0,"price_item_water":3,"task_job_function":1,"send_sms_when_create_bill":1,"contract_document_function":0},"province_id":70,"district_id":693,"ward_id":25315,"address_component":{"address":"12313123 - \u0110\u01b0\u1eddng Phan \u0110\u00ecnh, Thanh H\u00f2a, B\u00f9 \u0110\u1ed1p, B\u00ecnh Ph\u01b0\u1edbc","ward_id":"25315","position":{"latitude":"10.7829132","longitude":"106.6961898"},"district_id":"693","province_id":"70","address_detail":"12313123 - \u0110\u01b0\u1eddng Phan \u0110\u00ecnh"},"address":"12313123 - \u0110\u01b0\u1eddng Phan \u0110\u00ecnh, Thanh H\u00f2a, B\u00f9 \u0110\u1ed1p, B\u00ecnh Ph\u01b0\u1edbc","latitude":10.7829132,"longitude":106.6961898,"auto_create_room":1,"post_ids":[]}'>
                                <div style="width: 100%; height: 100%; align-items: center;
                            display: inherit;
                            text-align: center;
                            justify-content: center; color: #000" data-bs-toggle="tooltip" data-bs-placement="top"
                                    title="Chỉnh sửa Nhà trọ">
                                    <i data-feather="edit"> </i>
                                </div>
                            </div>

                            <a class="btn-round btn-go-to" data-bs-toggle="tooltip" data-bs-placement="top"
                                title="Tới quản lý Nhà trọ" href="/quan-ly/nha-tro/6920">
                                <i data-feather="arrow-right"> </i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#manageBlock .btn-edit").click(function (e) {
                    let ModalAddBlock = $($(this).data('bsTarget'));
                    ModalAddBlock &&
                        ModalAddBlock.data('block', $(this).data('block'));
                });

                $("#manageBlock .btn-delete").click(function (e) {
                    Swal.fire({
                        title: 'Thông báo!',
                        text: "Bạn có chắc chắn muốn xóa nhà trọ",
                        icon: 'warning',
                        showCancelButton: true,
                        cancelButtonColor: '#d33',
                        confirmButtonColor: '#3085d6',
                        confirmButtonText: 'Vâng! tôi muốn xóa',
                        cancelButtonText: 'Không xóa'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $.transferData({
                                method: "GET",
                                url: __helper.url.urlPattern(__routeApi.block.delete, {
                                    block_id: parseInt($(this).data('id'))
                                }),
                                success: (res) => {
                                    Swal.fire({
                                        title: 'Thành công!',
                                        text: res.message,
                                        icon: 'success',
                                        confirmButtonColor: '#3c9e47',
                                        confirmButtonText: 'Đóng'
                                    }).then((result) => {
                                        window.location.href = "/quan-ly";
                                    });
                                }
                            });
                        }
                    });
                });
            });
        </script>
        <!-- Modal add block -->
        <div class="modal fade" data-bs-backdrop="static" id="addBlock" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <div
                            style="margin-right: 15px;outline: 0;box-shadow: 0 0 0 .25rem rgb(76 175 80 / 16%);opacity: 1;border-radius: 100%;width: 36px;height: 36px;justify-content: center;align-items: center;display: flex;background-color: #b1e1b8;">
                            <i data-feather="home"> </i>
                        </div>
                        <h5 class="modal-title">Thêm nhà trọ</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"> </button>
                    </div>
                    <div class="modal-body">
                        <form method="POST" class="needs-validation" id="add-block-form" novalidate>
                            <input type="hidden" name="_token" value="9bs2SmME9AQZBHs8I7jQCUEim92A5FOWdHcrUSvh">
                            <div class="row g-3">
                                <div class="col-12">
                                    <div class="title-item-small">
                                        <b>Thông tin:</b>
                                        <i class="des">Các thông tin nhà trọ cơ bản</i>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="category" name="category"
                                            class="form-select form-control" required>
                                            <option value="0">Nhà trọ</option>
                                            <option value="1">Ký túc xá/sleepbox</option>
                                            <option value="2">Chung cư mini</option>
                                            <option value="5">Tòa nhà chung cư</option>
                                            <option value="3">Nhà nguyên căn</option>
                                            <option value="4">Văn phòng cho thuê</option>
                                        </select>
                                        <label for="category">Loại nhà trọ</label>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-floating">
                                        <input type="text" class="form-control" name="name" id="name" required
                                            placeholder="Tên nhà trọ">
                                        <label for="name">Tên nhà trọ</label>
                                        <div class="invalid-feedback">
                                            Vui lòng nhập tên nhà trọ
                                        </div>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 invisible d-none">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="room_type_room"
                                            name="room_type" value="room">
                                        <label class="form-check-label" for="room_type_room">
                                            <b>Thuê theo phòng</b>
                                            <p>Tính tiền thuê theo phòng</p>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="room_type_bed" name="room_type"
                                            value="bed">
                                        <label class="form-check-label" for="room_type_bed">
                                            <b>Thuê theo giường</b>
                                            <p>Tính tiền theo giường</p>
                                        </label>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="title-item-small">
                                        <b>Chọn phương thức khởi tạo dữ liệu</b>
                                        <i class="des">Chọn 1 trong 3 phương thức tạo khởi tạo dữ liệu</i>
                                    </div>
                                </div>
                                <div class="col-12 mt-2 type-input-room hide-when-edit d-flex"
                                    style="text-align: center;">
                                    <style type="text/css">
                                        .type-input-room .item {
                                            width: 100%;
                                            border: 1px solid #ccc;
                                            margin: 5px;
                                            padding: 5px;
                                            border-radius: 10px;
                                        }
                                    </style>
                                    <div class="item">
                                        <div class="form-check form-check-inline">
                                            <input data-format="numeric" class="form-check-input" type="radio"
                                                name="auto_create_room" id="enable" checked value="1">
                                            <label class="form-check-label" for="enable">
                                                <b>Tạo dữ liệu <span class="room_type_name">phòng</span> tự động </b>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="form-check form-check-inline">
                                            <input data-format="numeric" class="form-check-input" type="radio"
                                                name="auto_create_room" id="excel" value="2">
                                            <label class="form-check-label" for="excel">
                                                <b>Tạo dữ liệu <span class="room_type_name">phòng</span> từ Excel</b>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="form-check form-check-inline">
                                            <input data-format="numeric" class="form-check-input" type="radio"
                                                name="auto_create_room" id="disable" value="0">
                                            <label class="form-check-label" for="disable">
                                                <b>Tạo dữ liệu <span class="room_type_name">phòng</span> thủ công </b>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2 info-auto-create-room-enable">
                                    <div class="loz-alert info mt-2 mb-2">
                                        <div class="icon flex-0">
                                            <i data-feather="info" size="20"> </i>
                                        </div>
                                        <div class="des flex-1">
                                            <b>Ghi chú:</b> Vui lòng chọn số tầng và nhập số <span
                                                class="room_type_name">phòng</span> để hệ thống tự động tạo dữ liệu
                                            <span class="room_type_name">phòng</span> cho bạn
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2 d-none info-auto-create-room-disable">
                                    <div class="loz-alert warning mt-2 mb-2">
                                        <div class="icon flex-0">
                                            <i data-feather="info" size="20"> </i>
                                        </div>
                                        <div class="des flex-1">
                                            <b>Ghi chú:</b> Bạn phải thực hiện tạo dữ liệu cho từng <span
                                                class="room_type_name">phòng</span> bằng thủ công.
                                        </div>
                                    </div>
                                </div>

                                <div class="d-none import-from-excel-layout">
                                    <style type="text/css">
                                        .stepProgress {
                                            position: relative;
                                            padding-left: 45px;
                                            list-style: none;
                                        }

                                        .stepProgress::before {
                                            display: inline-block;
                                            content: '';
                                            position: absolute;
                                            top: 0;
                                            left: 15px;
                                            width: 10px;
                                            height: 100%;
                                            border-left: 2px solid #CCC;
                                        }

                                        .stepProgress-item {
                                            position: relative;
                                            counter-increment: list;
                                        }

                                        .stepProgress-item:not(:last-child) {
                                            padding-bottom: 20px;
                                        }

                                        .stepProgress-item::before {
                                            display: inline-block;
                                            content: '';
                                            position: absolute;
                                            left: -30px;
                                            height: 100%;
                                            width: 10px;
                                        }

                                        .stepProgress-item::after {
                                            content: '';
                                            display: inline-block;
                                            position: absolute;
                                            top: 0;
                                            left: -39px;
                                            width: 20px;
                                            height: 20px;
                                            border: 2px solid #CCC;
                                            border-radius: 50%;
                                            background-color: #FFF;
                                        }
                                    </style>
                                    <ul class="stepProgress">
                                        <li class="stepProgress-item">Bước 1: Tải file mẫu</li>
                                        <li class="stepProgress-item">Bước 2: Nhập dữ liệu của bạn vào file mẫu</li>
                                        <li class="stepProgress-item">Bước 3: Upload file mẫu lên để nhập liệu</li>
                                    </ul>
                                    <div class="row g-2">
                                        <div class="col-6 mt-2 import-excel">
                                            <div class="image-upload-simple" style="height: 100px;">
                                                <input type="file" style="display: none" id="file-excel" accept=".xlsx">
                                                <div class="container-upload " id="import-excel-trigger"
                                                    style="border: 2px dashed #ccc;">
                                                    <div class="placeholder __add-more-imge"
                                                        style="display: grid;cursor: pointer !important;width: 100%;align-items: center;justify-content: center;height: 100%;margin:-10px;">
                                                        <div class="icon-upload" style="margin:auto"><svg
                                                                xmlns="http://www.w3.org/2000/svg" width="30"
                                                                height="30" viewBox="0 0 24 24" fill="none"
                                                                stroke="currentColor" stroke-width="2"
                                                                stroke-linecap="round" stroke-linejoin="round"
                                                                class="feather feather-upload-cloud">
                                                                <polyline points="16 16 12 12 8 16"></polyline>
                                                                <line x1="12" y1="12" x2="12" y2="21"></line>
                                                                <path
                                                                    d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3">
                                                                </path>
                                                                <polyline points="16 16 12 12 8 16"></polyline>
                                                            </svg>
                                                        </div>
                                                        <label style="text-decoration:underline" id="text-import">File
                                                            Excel cần nhập dữ liệu</label>
                                                    </div>
                                                </div>
                                                <div class="invalid-feedback"> Vui lòng chọn file Excel</div>
                                            </div>
                                        </div>
                                        <div class="col-6 mt-2 download-template-excel">
                                            <a href="/download-template-excel" style=" color: inherit;">
                                                <div class="image-upload-simple" style="height: 100px;">
                                                    <div class="container-upload " id="download-excel-trigger"
                                                        style="border: 2px dashed #ccc;">
                                                        <div class="placeholder __add-more-imge"
                                                            style="display: grid;cursor: pointer !important;width: 100%;align-items: center;justify-content: center;height: 100%;margin:-10px;">
                                                            <div class="icon-upload" style="margin:auto">
                                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                                    viewBox="0 0 24 24" width="24" height="24"
                                                                    class="main-grid-item-icon" fill="none"
                                                                    stroke="currentColor" stroke-linecap="round"
                                                                    stroke-linejoin="round" stroke-width="2">
                                                                    <polyline points="8 17 12 21 16 17" />
                                                                    <line x1="12" x2="12" y1="12" y2="21" />
                                                                    <path
                                                                        d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29" />
                                                                </svg>
                                                            </div>
                                                            <label style="text-decoration:underline"
                                                                id="text-download">Tải file Excel mẫu</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </a>

                                        </div>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 count_floor">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="count_floor" name="count_floor"
                                            class="form-select form-control" required>
                                            <option value="1">Tầng trệt (không có tầng)</option>
                                            <option value="2">2 tầng (Gồm 1 trệt + 1 tầng)</option>
                                            <option value="3">3 tầng (Gồm 1 trệt + 2 tầng)</option>
                                            <option value="4">4 tầng (Gồm 1 trệt + 3 tầng)</option>
                                            <option value="5">5 tầng (Gồm 1 trệt + 4 tầng)</option>
                                            <option value="6">6 tầng (Gồm 1 trệt + 5 tầng)</option>
                                            <option value="7">7 tầng (Gồm 1 trệt + 6 tầng)</option>
                                            <option value="8">8 tầng (Gồm 1 trệt + 7 tầng)</option>
                                        </select>
                                        <label for="count_floor">Loại nhà trọ</label>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 total-room">
                                    <div class="form-floating">
                                        <input data-format="numeric" type="text" class="form-control" name="room_total"
                                            id="room_total" placeholder="Số phòng/giường" required>
                                        <label for="room_total">Số <span class="room_type_name">phòng</span></label>
                                        <div class="invalid-feedback">
                                            Vui lòng nhập tổng số <span class="room_type_name">phòng</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="title-item-small">
                                        <b>Địa chỉ:</b>
                                        <i class="des">Giúp cho khách thuê của bạn có thể tìm thấy nhà trọ của bạn dễ
                                            dàng hơn</i>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div id="block_address" class="address_component_container row g-2">
                                        <div class="col-6 mt-2">
                                            <div class="form-floating">
                                                <select data-format="numeric" name="address_component[province_id]"
                                                    class="form-select form-control province" required>
                                                    <option value="">Tỉnh/Thành phố</option>
                                                </select>
                                                <label for="province">Chọn Tỉnh/Thành phố</label>
                                                <div class="invalid-feedback">
                                                    Vui lòng chọn thành phố
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-6 mt-2">
                                            <div class="form-floating">
                                                <select data-format="numeric" name="address_component[district_id]"
                                                    class="form-select form-control district" required>
                                                    <option value="">Quận/Huyện</option>
                                                </select>
                                                <label for="district">Chọn Quận/Huyện</label>
                                                <div class="invalid-feedback">
                                                    Vui lòng chọn quận hoặc huyện
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 mt-2">
                                            <div class="form-floating">
                                                <select data-format="numeric" name="address_component[ward_id]"
                                                    class="form-select form-control ward" required>
                                                    <option value="">Phường/Xã</option>
                                                </select>
                                                <label for="ward">Chọn Phường/Xã</label>
                                                <div class="invalid-feedback">
                                                    Vui lòng chọn phường hoặc xã
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 mt-2">
                                            <div class="form-floating">
                                                <input type="text" class="form-control address_detail"
                                                    name="address_component[address_detail]"
                                                    placeholder="ví dụ: 122 - Đường Nguyễn Duy Trinh" required>
                                                <label for="address_detail">Địa chỉ chi tiết. Ví dụ: 122 - Đường Nguyễn
                                                    Duy Trinh</label>
                                                <div class="invalid-feedback">
                                                    Vui lòng nhập địa chỉ chi tiết
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <script type="text/javascript">
                                        $(document).ready(function () {
                                            let __el = {
                                                province: $("#block_address").find(".province"),
                                                district: $("#block_address").find(".district"),
                                                ward: $("#block_address").find(".ward"),

                                                address_detail: $("#block_address").find(".address_detail"),
                                                address_show_container: $("#block_address").find(".address-detail-show-container"),
                                                address_show: $("#block_address").find(".address-detail-show"),
                                            };

                                            function getAddressFull() {
                                                let arrayText = [
                                                    __el.address_detail.val(),
                                                    __el.ward.find('option:selected').text().trim(),
                                                    __el.district.find('option:selected').text().trim(),
                                                    __el.province.find('option:selected').text().trim()
                                                ];
                                                if (arrayText[0].lengh !== '' && arrayText[1].lengh !== '' && arrayText[2].lengh !== '' && arrayText[2].lengh !== '') {
                                                    __el.address_show_container.show();
                                                    __el.address_show.text(arrayText.join(', '));
                                                } else {
                                                    __el.address_show_container.hide();
                                                }
                                            }

                                            __el.address_detail.keyup((e) => {
                                                getAddressFull();
                                            });

                                            __el.province.change(function () {
                                                __el.district.empty();
                                                __el.ward.empty();

                                                $.transferData({
                                                    url: __helper.url.urlPattern(__routeApi.location.showProvince, {
                                                        id: parseInt($(this).val())
                                                    }),
                                                    method: 'GET',
                                                    success: function (res) {
                                                        __el.district.append(`<option value=''>Quận/Huyện</option>`);
                                                        $.each(res.data.districts, function (key, value) {
                                                            __el.district.append(`<option value='${value.id}'>${value.name}</option>`);
                                                        });
                                                        getAddressFull();
                                                    }
                                                });

                                            });

                                            __el.district.change(function () {
                                                __el.ward.empty();
                                                $.transferData({
                                                    url: __helper.url.urlPattern(__routeApi.location.showDistrict, {
                                                        id: parseInt($(this).val())
                                                    }),
                                                    method: 'GET',
                                                    success: function (res) {
                                                        __el.ward.append(`<option value=''>Phường/Xã</option>`);
                                                        $.each(res.data.wards, function (key, value) {
                                                            __el.ward.append(`<option value='${value.id}'>${value.name}</option>`);
                                                        });
                                                        getAddressFull();
                                                    }
                                                });
                                            });

                                            __el.ward.change(function () {
                                                getAddressFull();
                                            });
                                        });
                                    </script>

                                </div>

                                <div class="col-12 mt-2 text-center" style="display: none">
                                    <div style="border: 1px solid #ccc; border-radius: 5px; padding: 10px">
                                        <i data-feather="map-pin"></i>
                                        <input type="hidden" required value="10.7829132" class="form-control"
                                            name="address_component[position][latitude]"
                                            id="address_component[position][latitude]">
                                        <input type="hidden" required value="106.6961898" class="form-control"
                                            name="address_component[position][longitude]"
                                            id="address_component[position][longitude]">
                                        <div class="invalid-feedback">
                                            Vui lòng thêm vị trí nhà trọ
                                        </div>
                                        <b>Vị trí nhà trọ</b>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="title-item-small">
                                        <b>Thông tin cơ bản:</b>
                                        <i class="des not-edit">Thông tin diện tích, giá thuê, số lượng thành viên</i>
                                        <i class="des note" style="color:red; display: none"> <b>*Các thông tin dưới đây
                                                chỉ áp dụng cho lúc tạo nhà trọ tự động và khởi tạo đăng tin cho
                                                thuê</b></i>
                                    </div>
                                </div>

                                <div class="col-6 hide-when-not-room">
                                    <div class="form-floating">
                                        <input data-format="numeric" type="text" class="form-control" name="area"
                                            id="area" value="15" required placeholder="Nhập diện tích">
                                        <label for="area">Diện tích (m2)</label>
                                        <div class="invalid-feedback">
                                            Vui lòng nhập diện tích
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-floating">
                                        <input data-format="numeric" type="text" class="form-control" name="room_amount"
                                            id="room_amount" placeholder="Giá thuê" required>
                                        <label for="room_amount">Giá thuê trung bình (đ)</label>
                                        <div class="invalid-feedback">
                                            Vui lòng nhập giá thuê
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 hide-when-not-room">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="max_member" name="max_member"
                                            class="form-select form-control">
                                            <option value="1">1 người ở</option>
                                            <option value="2">2 người ở</option>
                                            <option value="3">3 người ở</option>
                                            <option value="4">4 người ở</option>
                                            <option value="5">5-6 người ở</option>
                                            <option value="6">7-10 người ở</option>
                                            <option value="0">Không giới hạn</option>
                                        </select>
                                        <label for="max_member">Tối đa người ở / <span
                                                class="room_type_name">phòng</span></label>
                                    </div>
                                </div>

                                <div class="col-12 hide-when-edit">
                                    <div class="title-item-small">
                                        <b>Cài đặt dịch vụ:</b>
                                        <i class="des">Thiết lập các dịch vụ khi khách thuê sử dụng khi thuê</i>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="setting[price_item_ele]"
                                            name="setting[price_item_ele]" class="form-select form-control">
                                            <option value="0">Miễn phí/Không sử dụng</option>
                                            <option value="1">Tính theo người</option>
                                            <option value="2">Tính theo tháng</option>
                                            <option value="3" selected>Tính theo đồng hồ (phổ biến)</option>
                                        </select>
                                        <label for="setting[price_item_ele]">Dịch vụ điện</label>
                                    </div>
                                </div>
                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="setting[price_item_water]"
                                            name="setting[price_item_water]" class="form-select form-control">
                                            <option value="0">Miễn phí/Không sử dụng</option>
                                            <option value="1">Tính theo người</option>
                                            <option value="2">Tính theo tháng</option>
                                            <option value="3" selected>Tính theo đồng hồ (phổ biến)</option>
                                        </select>
                                        <label for="setting[price_item_water]">Dịch vụ nước</label>
                                    </div>
                                </div>
                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="setting[price_item_trash]"
                                            name="setting[price_item_trash]" class="form-select form-control">
                                            <option value="0">Miễn phí/Không sử dụng</option>
                                            <option value="1">Tính theo người</option>
                                            <option value="2">Tính theo tháng</option>
                                        </select>
                                        <label for="setting[price_item_trash]">Dịch vụ rác</label>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-floating">
                                        <select data-format="numeric" id="setting[price_item_wifi]"
                                            name="setting[price_item_wifi]" class="form-select form-control">
                                            <option value="0">Miễn phí/Không sử dụng</option>
                                            <option value="1">Tính theo người</option>
                                            <option value="2">Tính theo tháng</option>
                                        </select>
                                        <label for="setting[price_item_wifi]">Dịch vụ wifi/internet</label>
                                    </div>
                                </div>

                                <div class="col-12 hide-when-edit">
                                    <div class="title-item-small">
                                        <b>Cài đặt tính năng:</b>
                                        <i class="des">Thiết lập các tính năng cho nhà trọ</i>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" value="1"
                                            id="setting[asset_function]" name="setting[asset_function]" checked>
                                        <label class="form-check-label" for="setting[asset_function]">
                                            <b>Quản lý tài sản</b>
                                            <p>Quản lý tài sản khách thuê sử dụng</p>
                                        </label>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" value="1"
                                            id="setting[car_function]" name="setting[car_function]" checked>
                                        <label class="form-check-label" for="setting[car_function]">
                                            <b>Quản lý xe</b>
                                            <p>Các thông tin xe của khách thuê</p>
                                        </label>
                                    </div>
                                </div>

                                <div class="col-6 mt-2">
                                    <div class="form-check form-switch">
                                        <input data-format="numeric" class="form-check-input" type="checkbox" value="1"
                                            id="setting[agent_function]" name="setting[agent_function]" checked>
                                        <label class="form-check-label" for="setting[agent_function]">
                                            <b>Quản lý mô giới</b>
                                            <p>Các thông tin về mô giới</p>
                                        </label>
                                    </div>
                                </div>

                                <div class="col-6 mt-2">
                                    <div class="form-check form-switch">
                                        <input data-format="numeric" class="form-check-input" type="checkbox" value="1"
                                            id="setting[post_function]" name="setting[post_function]" checked>
                                        <label class="form-check-label" for="setting[post_function]">
                                            <b>Quản lý tin đăng</b>
                                            <p>Các thông tin về tin đăng</p>
                                        </label>
                                    </div>
                                </div>

                                <div class="col-6 mt-2 hide-when-edit">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" value="1"
                                            id="setting[send_sms_when_create_bill]"
                                            name="setting[send_sms_when_create_bill]" checked>
                                        <label class="form-check-label" for="setting[send_sms_when_create_bill]">
                                            <b>Gửi tin nhắn tự động cho khách thuê</b>
                                            <p>Giửi tin nhắn SMS tự động cho khách thuê sau khi lập phiếu</p>
                                        </label>
                                    </div>

                                </div>

                                <div class="col-12">
                                    <div class="title-item-small">
                                        <b>Cài đặt cho phiếu thu (hóa đơn):</b>
                                        <i class="des">Thiết lập cho hóa đơn khi bạn lập hóa đơn tiền thuê cho khách
                                            thuê</i>
                                    </div>
                                </div>

                                <div class="col-6">
                                    <div class="form-floating">
                                        <input data-format="numeric" type="text" class="form-control" id="circle_order"
                                            name="circle_order" placeholder="Ngày lập hóa đơn" min="1" max="31"
                                            required>
                                        <label for="circle_order">Ngày lập hóa đơn và trong khoảng 1 đến 31</label>
                                        <div class="invalid-feedback">
                                            Vui lòng nhập ngày lập hóa đơn
                                        </div>
                                    </div>
                                    <div class="loz-alert info mt-2 mb-2">
                                        <div class="icon flex-0">
                                            <i data-feather="info" size="20"> </i>
                                        </div>
                                        <div class="des flex-1">
                                            <b>Thông tin:</b> Khi đến ngày lập hóa đơn hệ thống sẽ nhắc nhở qua
                                            thông báo
                                        </div>
                                    </div>
                                    <p>
                                        - Là ngày lập hóa đơn tiền điện, nước...<br>
                                        - Nhập một ngày trong tháng. Nếu không nhập mặc định là cuối tháng.
                                    </p>
                                </div>

                                <div class="col-6">
                                    <div class="form-floating">
                                        <input data-format="numeric" type="text" class="form-control" id="deadline_bill"
                                            name="deadline_bill" placeholder="Ngày lập hóa đơn" min="1" max="20"
                                            required>
                                        <label for="deadline_bill">Hạn đóng tiền</label>
                                        <div class="invalid-feedback">
                                            Vui lòng nhập hạn đóng tiền và trong khoảng 1 đến 20 ngày
                                        </div>
                                    </div>
                                    <div class="loz-alert info mt-2 mb-2">
                                        <div class="icon flex-0">
                                            <i data-feather="info" size="20"> </i>
                                        </div>
                                        <div class="des flex-1">
                                            <b>Thông tin:</b> Khi khách đóng tiền không đúng thời hạn hệ thống sẽ nhắc
                                            nhở
                                        </div>
                                    </div>
                                    <p>
                                        <b>Ví dụ:</b> Bạn lập phiếu ngày 01 và hạn đóng tiền thuê trọ ở đây là 5 ngày
                                        thì ngày 05
                                        sẽ là ngày hết hạn
                                    </p>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer modal-footer--sticky">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                        <button type="button" id="submit-block" class="btn btn-primary">
                            <i data-feather="plus"> </i>
                            Thêm nhà trọ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            $(document).ready(function () {
                var __el = {
                    form: $('#add-block-form'),
                    modal: $("#addBlock"),
                    submit: $('#submit-block'),
                    province: $("#province"),
                    district: $("#district"),
                    ward: $("#ward"),

                };

                let dataBlock = null;

                const excelFile = (file) => {
                    try {
                        var reader = new FileReader();
                        reader.readAsBinaryString(file);
                        reader.onload = function (e) {

                            var data = e.target.result;

                            var workbook = XLSX.read(data, {
                                type: 'binary',
                                UTC: false
                            });

                            if (workbook.SheetNames && workbook.SheetNames.length !== 0) {
                                const jsonData = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]], { header: 1 });
                                if (jsonData.length !== 0) {
                                    let header = jsonData[0];
                                    let data = [];
                                    jsonData.forEach((row, rowIndex) => {
                                        if (row.length !== 0 && rowIndex !== 0) {
                                            data[rowIndex] = []
                                            row.forEach((value, colIndex) => {
                                                let header = jsonData[0][colIndex];
                                                data[rowIndex].push({
                                                    colIndex: colIndex,
                                                    name: header,
                                                    value: value
                                                });
                                            })
                                        }

                                    })

                                    $.transferData({
                                        method: "POST",
                                        url: __helper.url.urlPattern(__routeApi.checkDataFromFile),
                                        data: {
                                            data_excel: data
                                        },
                                        success: (res) => {
                                            __el.form.find('#count_floor').val(res.data.count_floor).change();
                                            Swal.fire({
                                                title: 'Thành công!',
                                                text: res.message,
                                                icon: 'success',
                                                confirmButtonColor: '#3c9e47',
                                                confirmButtonText: 'Đóng'
                                            });
                                        },
                                        fail: (res) => {
                                            Swal.fire({
                                                title: 'Dữ liệu không chính xác',
                                                html: res.message,
                                                icon: 'error',
                                                confirmButtonText: 'Đã hiểu'
                                            });

                                            $('#file-excel').val('');
                                            $('#text-import').text('Chưa có tệp nào được chọn');
                                        }
                                    });
                                }
                            }
                        }
                    } catch (e) {
                        console.error(e);
                    }
                }

                const changeRoomType = (room_type) => {
                    if (room_type === 'room') {
                        __el.form.find('input[name="room_total"]').attr('placeholder', 'Nhập số phòng');
                        __el.form.find('.room_type_name').text('phòng');
                        __el.form.find('.hide-when-not-room').show();

                    } else {
                        __el.form.find('input[name="room_total"]').attr('placeholder', 'Nhập số giường');
                        __el.form.find('.room_type_name').text('giường');
                        __el.form.find('.hide-when-not-room').hide();
                    }
                };

                __el.form.find("#import-excel-trigger").on("click", function () {
                    __el.form.find("#file-excel").click();
                });

                __el.modal.find("#province").change(function () {
                    __el.modal.find("#district").empty();
                    __el.modal.find("#ward").empty();

                    $.transferData({
                        url: __helper.url.urlPattern(__routeApi.location.showProvince, {
                            id: parseInt($(this).val())
                        }),
                        method: 'GET',
                        loadingEle: false,
                        success: function (res) {
                            __el.modal.find("#district").append(`<option value=''>Chọn Quận/Huyện</option>`);
                            $.each(res.data.districts, function (key, value) {
                                __el.modal.find("#district").append(`<option value='${value.id}'>${value.name}</option>`);
                            });
                        }
                    });

                });

                __el.modal.find("#district").change(function () {
                    __el.modal.find("#ward").empty();
                    $.transferData({
                        url: __helper.url.urlPattern(__routeApi.location.showDistrict, {
                            id: parseInt($(this).val())
                        }),
                        method: 'GET',
                        loadingEle: false,
                        success: function (res) {
                            __el.modal.find("#ward").append(`<option value=''>Chọn Phường/Xã</option>`);
                            $.each(res.data.wards, function (key, value) {
                                __el.modal.find("#ward").append(`<option value='${value.id}'>${value.name}</option>`);
                            });
                        }
                    });
                });


                __el.form.on("change", "#file-excel", function (e) {
                    var file = e.target.files[0];
                    if (file) {
                        __el.form.find("#text-import").text(file.name)
                        excelFile(file);
                    } else {
                        alert("Vui lòng chọn file excel để tiếp tục!");
                    }
                });

                __el.form.on('change', 'input[name="room_type"]', function (e) {
                    changeRoomType($(this).val())
                });

                __el.form.on('change', 'select[name="category"]', function (e) {
                    if ($(this).val() == 1)
                        __el.form.find('#room_type_bed').prop('checked', true).change();
                    else
                        __el.form.find('#room_type_room').prop('checked', true).change();

                });

                __el.form.on('change', 'input[name="auto_create_room"]', function (e) {
                    if (__el.form.find("#disable").is(':checked')) {
                        __el.form.find("#file-excel").removeAttr('required');
                        __el.form.find("#room_total").removeAttr('required');

                        __el.form.find("#room_total").attr("disabled", true);
                        __el.form.find("#room_total").val(0);

                        __el.form.find('.total-room').removeClass("d-none");
                        __el.form.find('.count_floor').removeClass("d-none");
                        __el.form.find('.import-from-excel-layout').addClass("d-none");
                        __el.form.find(".info-auto-create-room-enable").addClass("d-none");
                        __el.form.find(".info-auto-create-room-disable").removeClass("d-none");
                        __el.form.find('.total-room').addClass("d-none");
                        __el.form.find('.count_floor').addClass("d-none");

                        __el.form.find('#file-excel').val('');
                        __el.form.find('#text-import').text('File Excel cần nhập dữ liệu');

                    } else if (__el.form.find("#enable").is(':checked')) {
                        __el.form.find("#room_total").attr('required', 'required');
                        __el.form.find("#file-excel").removeAttr('required');

                        __el.form.find("#room_total").removeAttr("disabled");
                        __el.form.find("#room_total").val('');

                        __el.form.find('.total-room').removeClass("d-none");
                        __el.form.find('.count_floor').removeClass("d-none");
                        __el.form.find(".info-auto-create-room-enable").removeClass("d-none");
                        __el.form.find(".info-auto-create-room-disable").addClass("d-none");

                        __el.form.find('.import-from-excel-layout').addClass("d-none");

                        __el.form.find('#file-excel').val('');
                        __el.form.find('#text-import').text('File Excel cần nhập dữ liệu');

                    } else if (__el.form.find("#excel").is(':checked')) {
                        __el.form.find('.total-room').addClass("d-none");
                        __el.form.find('.count_floor').addClass("d-none");
                        __el.form.find(".info-auto-create-room-enable").addClass("d-none");
                        __el.form.find('.import-from-excel-layout').removeClass("d-none");
                        __el.form.find(".info-auto-create-room-disable").addClass("d-none");
                        __el.form.find("#room_total").removeAttr('required');

                        __el.form.find("#file-excel").attr('required', 'required');
                    }
                });

                __el.form.on('change', '#room_total', function (e) {
                    if (parseInt($(this).val()) === 0) {
                        __el.form.find('#auto_create_room').prop('checked', false);
                        __el.form.find("#auto_create_room").attr("disabled", true);
                    } else {
                        __el.form.find('#auto_create_room').prop('checked', true);
                        __el.form.find("#auto_create_room").removeAttr("disabled");
                    }
                });


                new __modalForm(
                    __el.modal.get(0),
                    __el.form.get(0),
                    __el.submit.get(0)
                ).start(null, {
                    __openModalForm: function () {
                        __el.form.get(0).reset();
                        dataBlock = __el.modal.data('block');
                        __el.modal.find('.title-disable').remove();
                        __el.modal.find('input[name="count_floor"]').remove();
                        __el.modal.find("#province").empty();
                        __el.modal.find("#district").empty();
                        __el.modal.find("#ward").empty();
                        if (dataBlock) {
                            __el.modal.find('.count_floor').before(`
                    <div class="col-12 title-disable">
                        <div class="title-item-small">
                            <b>Thông tin không thể chỉnh sửa:</b>
                            <i class="des">Các thông tin dưới đây không thể được chỉnh sửa</i>
                        </div>
                    </div>`);
                            __el.modal.find('.not-edit').hide();
                            __el.modal.find('.note').show();
                            __el.modal.find('#count_floor').attr("disabled", true);
                            __el.modal.find('#count_floor').after(`<input type="hidden" data-format="numeric" class="form-control" name="count_floor" placeholder="Số phòng/giường" value="${dataBlock.count_floor}">`);
                            __el.modal.find('#room_total').attr("readonly", true);
                            __el.modal.find('.hide-when-edit').addClass("d-none");

                            $.transferData({
                                method: "POST",
                                url: __helper.url.urlPattern(__routeApi.location.init),
                                data: {
                                    'province_id': dataBlock.province_id,
                                    'district_id': dataBlock.district_id,
                                    'ward_id': dataBlock.ward_id,
                                },
                                loadingEle: false,
                                success: (res) => {
                                    $.each(res.data.provinces, function (key, province) {
                                        __el.modal.find(".province").append(`<option value='${province.id}'>${province.short_name}</option>`);
                                        if (parseInt(province.id) === parseInt(dataBlock.province_id))
                                            $(`.province option[value=${province.id}]`).prop('selected', true);
                                    });

                                    $.each(res.data.districts, function (key, district) {
                                        __el.modal.find(".district").append(`<option value='${district.id}'>${district.name}</option>`);
                                        if (parseInt(district.id) === parseInt(dataBlock.district_id))
                                            $(`.district option[value=${district.id}]`).prop('selected', true);
                                    });

                                    $.each(res.data.wards, function (key, ward) {
                                        __el.modal.find(".ward").append(`<option value='${ward.id}'>${ward.name}</option>`);
                                        if (parseInt(ward.id) === parseInt(dataBlock.ward_id))
                                            $(`.ward option[value=${ward.id}]`).prop('selected', true);
                                    });
                                },
                            });

                            __el.modal.find('.modal-title').text(`Chỉnh sửa ${dataBlock.category_name} ${dataBlock.name}`);
                            __el.modal.find('.modal-footer .btn-primary').text(`Chỉnh sửa ${dataBlock.category_name}`);
                            __el.form.setObjectToForm(dataBlock);
                            changeRoomType(dataBlock.room_type);
                        } else {
                            __el.modal.find('.not-edit').show();
                            __el.modal.find('.note').hide();
                            __el.modal.find('input[name="count_floor"]').remove();
                            __el.modal.find('.title-disable').remove();
                            __el.modal.find('#count_floor').attr("disabled", false);
                            __el.modal.find('#room_total').attr("readonly", false);
                            __el.form.find('input[name="room_type"]').val(['room']);
                            __el.modal.find('.hide-when-edit').removeClass("d-none");
                            changeRoomType('room');

                            __el.modal.find(".district").empty();
                            __el.modal.find(".ward").empty();
                            if (!__el.modal.find(".province option[value='79']").length) {
                                $.transferData({
                                    method: "GET",
                                    url: __helper.url.urlPattern(__routeApi.location.provinces),
                                    loadingEle: false,
                                    success: (res) => {
                                        __el.modal.find(".province").empty();
                                        __el.modal.find(".province").append(`<option value=''>Chọn Tỉnh/Thành phố</option>`);
                                        $.each(res.data, function (key, value) {
                                            __el.modal.find(".province").append(`<option value='${value.id}'>${value.short_name}</option>`);
                                        });
                                    },
                                });
                            }
                        }
                    },
                    __closeModalForm: function () {
                        __el.form.get(0).reset();
                        __el.form.get(0).classList.remove('was-validated');

                        __el.modal.data('block', null);

                        __el.modal.find('.modal-title').text("Thêm nhà trọ");
                        __el.modal.find('.modal-footer .btn-primary').text("Thêm nhà trọ");
                        __el.modal.find('input[name="auto_create_room"][value="1"]').prop('checked', true).change();
                    },
                    __submitModalForm: function (e) {
                        let data = __el.form.getObjectOfForm();
                        if (!__el.form.get(0).checkValidity()) {
                            __el.form.get(0).classList.add('was-validated');
                            Swal.fire({
                                title: 'Thông báo!',
                                text: "Vui lòng nhập đầy đủ thông tin trước khi thực hiện",
                                icon: 'error',
                                confirmButtonText: 'Đã hiểu'
                            });
                            return false;
                        }

                        if (parseInt(__el.form.find('input[name="auto_create_room"]:checked').val()) === 2) { }
                        data.file = $("#file-excel")[0].files[0]

                        data.address_component['address'] = ([
                            __el.modal.find(".address_detail").val(),
                            __el.modal.find(".ward option:selected").val() ? __el.modal.find(".ward option:selected").text() : '',
                            __el.modal.find(".district option:selected").val() ? __el.modal.find(".district option:selected").text() : '',
                            __el.modal.find(".province option:selected").val() ? __el.modal.find(".province option:selected").text() : '',
                        ]).join(', ');

                        let url = !dataBlock ? __helper.url.urlPattern(__routeApi.block.create) : __helper.url.urlPattern(__routeApi.block.update, {
                            block_id: parseInt(dataBlock.id)
                        });

                        $.transferForm({
                            method: "POST",
                            url,
                            data,
                            success: function (res) {
                                Swal.fire({
                                    title: 'Thành công!',
                                    text: res.message,
                                    icon: 'success',
                                    confirmButtonColor: '#3c9e47',
                                    confirmButtonText: 'Đóng'
                                }).then((result) => {
                                    window.location.href = "/quan-ly";
                                });
                            },
                            fail: (res) => {
                                Swal.fire({
                                    title: 'Thông báo!',
                                    text: res.message,
                                    icon: 'error',
                                    confirmButtonText: 'Đã hiểu'
                                });
                            }
                        });
                    },
                });
            });
        </script>
    </div>
    <div class="text-center mt-5"><span style="color: #727272; font-style: italic;">Copyright @ <strong
                style="color: #000">LOZIDO - Quản lý nhà cho thuê</strong> 2020</span></div>
    <div class="text-center">
        <p style="color: #727272; font-style: italic;">Version <strong style="color: #000">1.3.8</strong></p>
    </div>
    <div class="zalo-container fix item-contact">
        <a id="zalo-btn" href="https://zalo.me/0965227453" target="_blank" rel="noopener">
            <div class="animated_zalo infinite zoomIn_zalo cmoz-alo-circle"></div>
            <div class="animated_zalo infinite pulse_zalo cmoz-alo-circle-fill"></div>
            <span>
                <img width="100%" src="https://quanlytro.me/images/icons/zalo-icon-white.webp"
                    alt="Liên hệ với LOZIDO - Quản lý nhà cho thuê qua Zalo">
            </span>
        </a>
    </div>

    <script>
        feather.replace();

        $(document).ready(function () {
            $(document).find('input[data-format="numeric"][type="text"]').map((key, element) => {
                element.addEventListener('keyup', e => {
                    let value = $(element).val();
                    let number = __helper.convertStringToNumber(value);
                    let newVal = __format.currencyInput(number);

                    $(element).val(value === '' ? '' : isNaN(number) ? '' : newVal);
                });
            });

            $(document).find('input[data-format="stringNumber"]').map((key, element) => {
                element.addEventListener('keyup', e => {
                    $(element).val(__format.phone($(element).val()));
                });
            });

            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl)
            });

            setTimeout(() => {
                $.transferData({
                    url: __helper.url.urlPattern(__routeApi.notification.all, {
                        page: 1
                    }),
                    loadingEle: false,
                    success: (res) => {
                        $('.count-notification').text(res?.data?.unread_count ?? 0);
                        res?.data?.notifications?.length > 0 &&
                            $(".notication-dropdown").html('') &&
                            res.data.notifications.map((notification) => {
                                $(".notication-dropdown").append($(`
                                <li style="cursor: pointer" class="item-notication d-flex align-items-center">
                                        <div class="icon ${!notification?.read_at ? 'not-read' : ''}">
                                            <i data-feather="bell" size="20"></i>
                                        </div>
                                        <div class="content">
                                            <div class="des">
                                                <b>
                                                    ${notification?.data?.title ?? ''}
                                                </b>
                                                <p>${notification?.data?.body ?? ''}</p>
                                            </div>
                                            <div class="time">${notification?.created_at ?? ''}</div>
                                        </div>
                                </li>
                            `).click((e) => {
                                    Swal.fire({
                                        title: 'Thông báo!',
                                        text: "Tính năng đi đến thông báo đang phát triển. Hệ thống sẽ hoàn thành sớm!",
                                        icon: 'warning',
                                        confirmButtonText: 'Đã hiểu'
                                    });
                                }));
                            });
                        feather.replace();
                    },
                    fail: (res) => {

                    }
                });
            }, 5000);

        });
    </script>
</body>

</html>